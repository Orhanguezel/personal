(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90092,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);e.s(["RefreshCcw",()=>a],90092)},15288,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(75157);function s(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("div",{"data-slot":"card",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}function i(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("div",{"data-slot":"card-header",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}function l(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("leading-none font-semibold",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("div",{"data-slot":"card-title",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}function n(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("text-muted-foreground text-sm",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("div",{"data-slot":"card-description",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}function d(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("px-6",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("div",{"data-slot":"card-content",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},87486,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(86011),s=e.i(25913),i=e.i(75157);let l=(0,s.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let s,n,d,c,o,u,m=(0,t.c)(12);m[0]!==e?({className:s,variant:c,asChild:d,...n}=e,m[0]=e,m[1]=s,m[2]=n,m[3]=d,m[4]=c):(s=m[1],n=m[2],d=m[3],c=m[4]);let p=void 0!==d&&d?r.Slot.Slot:"span";return m[5]!==s||m[6]!==c?(o=(0,i.cn)(l({variant:c}),s),m[5]=s,m[6]=c,m[7]=o):o=m[7],m[8]!==p||m[9]!==n||m[10]!==o?(u=(0,a.jsx)(p,{"data-slot":"badge",className:o,...n}),m[8]=p,m[9]=n,m[10]=o,m[11]=u):u=m[11],u}e.s(["Badge",()=>n])},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},5861,e=>{"use strict";var a=e.i(932);e.i(70272);var t=e.i(14321);let r=e=>String(e||"").trim().toLowerCase().replace("_","-").split("-")[0].trim();function s(){let e,s,u,m,p,h,f,x,v,g=(0,a.c)(22);g[0]===Symbol.for("react.memo_cache_sentinel")?(e={keys:["app_locales","default_locale"]},g[0]=e):e=g[0];let{data:b,isLoading:y,isFetching:j}=(0,t.useListSiteSettingsAdminQuery)(e);if(g[1]!==b){let e=b??[],a=e.find(o),t=e.find(c),h=function(e){let a=new Set,t=[];for(let s of e){let e=r(s?.code);e&&(a.has(e)||(a.add(e),t.push({...s,code:e})))}return t}((function e(a){if(!a)return[];if(Array.isArray(a))return a.map(e=>({code:r(e?.code??e),label:"string"==typeof e?.label?e.label:void 0,is_active:e?.is_active,is_default:e?.is_default})).filter(e=>!!e.code);if("string"==typeof a){let t=a.trim();if(!t)return[];try{let a=JSON.parse(t);return e(a)}catch{return[]}}return"object"==typeof a&&null!==a&&Array.isArray(a.locales)?e(a.locales):[]})(a?.value).filter(d));if(s=h.map(n).filter(Boolean),!(u=r(t?.value))){let e=h.find(l);u=e?r(e.code):""}u&&!s.includes(u)&&(u=s[0]??""),m=h.map(i),p=new Set(s),g[1]=b,g[2]=s,g[3]=u,g[4]=m,g[5]=p}else s=g[2],u=g[3],m=g[4],p=g[5];let k=p;g[6]!==k?(h=e=>{let a=r(e);return!!a&&k.has(a)},g[6]=k,g[7]=h):h=g[7];let N=h;g[8]!==s||g[9]!==u||g[10]!==k?(f=(e,a)=>{let t=r(e);if(t&&k.has(t))return t;let i=r(a);return i&&k.has(i)?i:u&&k.has(u)?u:s[0]??""},g[8]=s,g[9]=u,g[10]=k,g[11]=f):f=g[11];let _=f;g[12]!==s||g[13]!==_||g[14]!==u||g[15]!==N||g[16]!==m?(x={localeOptions:m,defaultLocaleFromDb:u,activeLocaleCodes:s,hasLocale:N,coerceLocale:_},g[12]=s,g[13]=_,g[14]=u,g[15]=N,g[16]=m,g[17]=x):x=g[17];let w=x;return g[18]!==w||g[19]!==j||g[20]!==y?(v={...w,loading:y,fetching:j},g[18]=w,g[19]=j,g[20]=y,g[21]=v):v=g[21],v}function i(e){return{value:r(e.code),label:function(e){let a=r(e.code),t=String(e.label||"").trim();if(t)return`${t} (${a})`;let s=null;try{s=new Intl.DisplayNames(["de"],{type:"language"})}catch{s=null}let i=s?.of(a)??"";return i?`${i} (${a})`:`${a.toUpperCase()} (${a})`}(e)}}function l(e){return!0===e.is_default}function n(e){return r(e.code)}function d(e){return e&&e.code&&!1!==e.is_active}function c(e){return"default_locale"===e.key}function o(e){return"app_locales"===e.key}e.s(["useAdminLocales",()=>s])},31658,e=>{"use strict";var a=e.i(19929);function t(e){let t=String(e??"").trim();return t&&(0,a.normLocaleTag)(t)||""}function r(e,a="de"){return t(e)||a}e.s(["localeShortClient",()=>t,"localeShortClientOr",()=>r])},20995,e=>{"use strict";var a=e.i(31658);function t(e,r,s="de"){let i=Array.isArray(e)?e:[],l=new Set(i.map(e=>(0,a.localeShortClient)(e?.value)).filter(Boolean)),n=(0,a.localeShortClient)(r);if(n&&l.has(n))return n;let d=(0,a.localeShortClient)(i[0]?.value);return d&&l.has(d)?d:(0,a.localeShortClientOr)(s,s)}e.s(["resolveAdminApiLocale",()=>t])},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},24687,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(75157);function s(e){let s,i,l,n,d=(0,t.c)(8);return d[0]!==e?({className:s,...i}=e,d[0]=e,d[1]=s,d[2]=i):(s=d[1],i=d[2]),d[3]!==s?(l=(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),d[3]=s,d[4]=l):l=d[4],d[5]!==i||d[6]!==l?(n=(0,a.jsx)("textarea",{"data-slot":"textarea",className:l,...i}),d[5]=i,d[6]=l,d[7]=n):n=d[7],n}e.s(["Textarea",()=>s])},80352,e=>{"use strict";var a=e.i(43476),t=e.i(71645);let r=(0,e.i(75254).default)("braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);var s=e.i(75157),i=e.i(10204),l=e.i(24687),n=e.i(87486);let d=e=>{try{return JSON.stringify(e??{},null,2)}catch{return""}};e.s(["AdminJsonEditor",0,({label:e,value:c,onChange:o,onErrorChange:u,disabled:m,helperText:p,height:h=260})=>{let[f,x]=(0,t.useState)(()=>d(c)),[v,g]=(0,t.useState)(null);return(0,t.useEffect)(()=>{x(d(c))},[c]),(0,a.jsxs)("div",{className:"space-y-2",children:[e?(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(i.Label,{className:"text-sm",children:e}),(0,a.jsxs)(n.Badge,{variant:"secondary",className:"gap-1",children:[(0,a.jsx)(r,{className:"size-3.5"}),"JSON editor"]})]}):null,(0,a.jsx)(l.Textarea,{value:f,onChange:e=>x(e.target.value),onBlur:()=>{if(!f.trim()){o({}),g(null),u?.(null);return}try{let e=JSON.parse(f);o(e),g(null),u?.(null)}catch(a){let e=a?.message?String(a.message):"Geçersiz JSON";g(e),u?.(e)}},disabled:m,spellCheck:!1,className:(0,s.cn)("font-mono text-xs leading-5",v&&"border-destructive focus-visible:ring-destructive"),style:{minHeight:h,whiteSpace:"pre",fontFamily:"SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"}}),p&&!v?(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:p}):null,v?(0,a.jsxs)("div",{className:"text-xs text-destructive",children:["JSON hatası: ",(0,a.jsx)("span",{className:"font-medium",children:v})]}):null]})}],80352)},77572,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(71645),s=e.i(81140),i=e.i(30030),l=e.i(42727),n=e.i(96626),d=e.i(48425),c=e.i(86318),o=e.i(69340),u=e.i(10772),m="Tabs",[p,h]=(0,i.createContextScope)(m,[l.createRovingFocusGroupScope]),f=(0,l.createRovingFocusGroupScope)(),[x,v]=p(m),g=r.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:i,defaultValue:l,orientation:n="horizontal",dir:p,activationMode:h="automatic",...f}=e,v=(0,c.useDirection)(p),[g,b]=(0,o.useControllableState)({prop:s,onChange:i,defaultProp:l??"",caller:m});return(0,a.jsx)(x,{scope:r,baseId:(0,u.useId)(),value:g,onValueChange:b,orientation:n,dir:v,activationMode:h,children:(0,a.jsx)(d.Primitive.div,{dir:v,"data-orientation":n,...f,ref:t})})});g.displayName=m;var b="TabsList",y=r.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...i}=e,n=v(b,r),c=f(r);return(0,a.jsx)(l.Root,{asChild:!0,...c,orientation:n.orientation,dir:n.dir,loop:s,children:(0,a.jsx)(d.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:t})})});y.displayName=b;var j="TabsTrigger",k=r.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...c}=e,o=v(j,r),u=f(r),m=w(o.baseId,i),p=C(o.baseId,i),h=i===o.value;return(0,a.jsx)(l.Item,{asChild:!0,...u,focusable:!n,active:h,children:(0,a.jsx)(d.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...c,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||n||!e||o.onValueChange(i)})})})});k.displayName=j;var N="TabsContent",_=r.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,forceMount:l,children:c,...o}=e,u=v(N,s),m=w(u.baseId,i),p=C(u.baseId,i),h=i===u.value,f=r.useRef(h);return r.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(n.Presence,{present:l||h,children:({present:r})=>(0,a.jsx)(d.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!r,id:p,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&c})})});function w(e,a){return`${e}-trigger-${a}`}function C(e,a){return`${e}-content-${a}`}_.displayName=N,e.s(["Content",()=>_,"List",()=>y,"Root",()=>g,"Tabs",()=>g,"TabsContent",()=>_,"TabsList",()=>y,"TabsTrigger",()=>k,"Trigger",()=>k,"createTabsScope",()=>h],26209);var L=e.i(26209),L=L,S=e.i(75157);function M(e){let r,s,i,l,n=(0,t.c)(8);return n[0]!==e?({className:r,...s}=e,n[0]=e,n[1]=r,n[2]=s):(r=n[1],s=n[2]),n[3]!==r?(i=(0,S.cn)("flex flex-col gap-2",r),n[3]=r,n[4]=i):i=n[4],n[5]!==s||n[6]!==i?(l=(0,a.jsx)(L.Root,{"data-slot":"tabs",className:i,...s}),n[5]=s,n[6]=i,n[7]=l):l=n[7],l}function T(e){let r,s,i,l,n=(0,t.c)(8);return n[0]!==e?({className:r,...s}=e,n[0]=e,n[1]=r,n[2]=s):(r=n[1],s=n[2]),n[3]!==r?(i=(0,S.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-0.75",r),n[3]=r,n[4]=i):i=n[4],n[5]!==s||n[6]!==i?(l=(0,a.jsx)(L.List,{"data-slot":"tabs-list",className:i,...s}),n[5]=s,n[6]=i,n[7]=l):l=n[7],l}function z(e){let r,s,i,l,n=(0,t.c)(8);return n[0]!==e?({className:r,...s}=e,n[0]=e,n[1]=r,n[2]=s):(r=n[1],s=n[2]),n[3]!==r?(i=(0,S.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),n[3]=r,n[4]=i):i=n[4],n[5]!==s||n[6]!==i?(l=(0,a.jsx)(L.Trigger,{"data-slot":"tabs-trigger",className:i,...s}),n[5]=s,n[6]=i,n[7]=l):l=n[7],l}function H(e){let r,s,i,l,n=(0,t.c)(8);return n[0]!==e?({className:r,...s}=e,n[0]=e,n[1]=r,n[2]=s):(r=n[1],s=n[2]),n[3]!==r?(i=(0,S.cn)("flex-1 outline-none",r),n[3]=r,n[4]=i):i=n[4],n[5]!==s||n[6]!==i?(l=(0,a.jsx)(L.Content,{"data-slot":"tabs-content",className:i,...s}),n[5]=s,n[6]=i,n[7]=l):l=n[7],l}e.s(["Tabs",()=>M,"TabsContent",()=>H,"TabsList",()=>T,"TabsTrigger",()=>z],77572)},69074,e=>{"use strict";let a=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>a],69074)},1695,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(71645),s=e.i(46696),i=e.i(75254);let l=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),n=(0,i.default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var d=e.i(69074),c=e.i(70273),o=e.i(27612);e.i(70272);var u=e.i(96865),m=e.i(75157),p=e.i(19455),h=e.i(87486),f=e.i(15288),x=e.i(10204),v=e.i(93479),g=e.i(48425),b=r.forwardRef((e,t)=>{let{ratio:r=1,style:s,...i}=e;return(0,a.jsx)("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/r}%`},"data-radix-aspect-ratio-wrapper":"",children:(0,a.jsx)(g.Primitive.div,{...i,ref:t,style:{...s,position:"absolute",top:0,right:0,bottom:0,left:0}})})});b.displayName="AspectRatio",e.s(["AspectRatio",()=>b,"Root",()=>b],85959);var y=e.i(85959),y=y;function j(e){let r,s,i=(0,t.c)(4);return i[0]!==e?({...r}=e,i[0]=e,i[1]=r):r=i[1],i[2]!==r?(s=(0,a.jsx)(y.Root,{"data-slot":"aspect-ratio",...r}),i[2]=r,i[3]=s):s=i[3],s}let k=e=>String(e??"").trim(),N=e=>{let a=k(e);if(!a)return!1;let t=a.toLowerCase();return!!(t.split("?")[0].split("#")[0].endsWith(".svg")||t.startsWith("data:image/svg+xml")||t.includes("format=svg")||t.includes("f_svg"))},_=e=>{let a=k(e);if(!a)return"";if(!N(a)||a.startsWith("data:image/svg+xml")||!a.includes("res.cloudinary.com")||a.includes("/raw/upload/")||a.includes("fl_sanitize"))return a;let t="/upload/",r=a.indexOf(t);if(r<0)return a;let s=a.slice(0,r+t.length),i=a.slice(r+t.length),l=i.split("/")[0]||"",n=i.slice(l.length);return l.startsWith("v")?`${s}fl_sanitize/${i}`:`${s}${l},fl_sanitize${n}`},w=e=>{let r,i,n,d,c,o,u,m,h=(0,t.c)(16),{url:f,disabled:x}=e;if(h[0]!==f){n=Symbol.for("react.early_return_sentinel");e:{if(!(r=k(f))){n=null;break e}i=((e,a=72)=>{let t=k(e);if(!t)return"";if(t.length<=a)return t;try{let e=new URL(t),r=e.host,s=(e.pathname||"").split("/").filter(Boolean).pop()||"",i=`${r}/…/${s}`;if(i.length<=a)return i}catch{}let r=t.slice(0,Math.max(18,Math.floor(.55*a))),s=t.slice(-Math.max(12,Math.floor(.25*a)));return`${r}…${s}`})(r,80)}h[0]=f,h[1]=r,h[2]=i,h[3]=n}else r=h[1],i=h[2],n=h[3];if(n!==Symbol.for("react.early_return_sentinel"))return n;let v=i;h[4]!==r?(d=async()=>{try{await navigator.clipboard.writeText(r),s.toast.success("URL kopyalandı.")}catch{s.toast.error("Kopyalanamadı.")}},h[4]=r,h[5]=d):d=h[5];let g=d;return h[6]!==r||h[7]!==v?(c=(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)("div",{className:"truncate text-xs text-muted-foreground",title:r,children:v})}),h[6]=r,h[7]=v,h[8]=c):c=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(l,{className:"mr-2 size-4"}),h[9]=o):o=h[9],h[10]!==g||h[11]!==x?(u=(0,a.jsxs)(p.Button,{type:"button",variant:"outline",size:"sm",onClick:g,disabled:x,title:"Kopyala",children:[o,"Kopyala"]}),h[10]=g,h[11]=x,h[12]=u):u=h[12],h[13]!==c||h[14]!==u?(m=(0,a.jsxs)("div",{className:"mt-2 flex min-w-0 items-center gap-2",children:[c,u]}),h[13]=c,h[14]=u,h[15]=m):m=h[15],m};e.s(["AdminImageUploadField",0,({label:e="Görsel",helperText:t,bucket:i="public",folder:l="uploads",metadata:g,value:b,onChange:y,values:C,onChangeMultiple:L,onSelectAsCover:S,coverValue:M,disabled:T,openLibraryHref:z,onOpenLibraryClick:H,multiple:I=!1,previewAspect:A="16x9",previewObjectFit:R="cover"})=>{let B=(0,r.useRef)(null),[E,{isLoading:D}]=(0,u.useCreateAssetAdminMutation)(),$=(0,r.useMemo)(()=>(e=>{if(e)return Object.fromEntries(Object.entries(e).map(([e,a])=>[e,String(a)]))})(g),[g]),F=(0,r.useMemo)(()=>Array.isArray(C)?C.map(k).filter(Boolean):[],[C]),V=!!T||D,q=async e=>{let a=Array.from(e.target.files??[]);if(e.target.value="",!a.length)return;if(!I){let e=a[0];try{let a=await E({file:e,bucket:i,folder:l,metadata:$}).unwrap(),t=k(a?.url);if(!t)throw Error("Görsel URL'i alınamadı.");y?.(t),s.toast.success("Görsel yüklendi.")}catch(e){s.toast.error(e?.data?.error?.message||e?.message||"Görsel yüklenirken hata oluştu.")}return}let t=[],r=0;for(let e of a)try{let a=await E({file:e,bucket:i,folder:l,metadata:$}).unwrap(),s=k(a?.url);s&&(t.push(s),r+=1)}catch(e){s.toast.error(e?.data?.error?.message||e?.message||"Bazı görseller yüklenirken hata oluştu.")}r>0&&(L?L(((e,a)=>{let t=new Set(e.map(e=>k(e))),r=[...e];for(let e of a){let a=k(e);a&&!t.has(a)&&(t.add(a),r.push(a))}return r})(F,t)):y?.(t[0]),s.toast.success(1===r?"Görsel yüklendi.":`${r} g\xf6rsel y\xfcklendi.`))},O="4x3"===A?4/3:"1x1"===A?1:16/9;return(0,a.jsxs)(f.Card,{children:[(0,a.jsx)(f.CardHeader,{className:"space-y-1 pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-semibold",children:e}),t?(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:t}):null]}),D?(0,a.jsx)(h.Badge,{variant:"secondary",children:"Yükleniyor…"}):null]})}),(0,a.jsxs)(f.CardContent,{className:"space-y-3",children:[(0,a.jsx)(x.Label,{className:"sr-only",children:"Upload"}),(0,a.jsx)(v.Input,{ref:B,type:"file",accept:"image/*",multiple:!!I,className:"hidden",onChange:q,disabled:V}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)(p.Button,{type:"button",variant:"outline",onClick:()=>{V||B.current?.click()},disabled:V,children:[(0,a.jsx)(d.Upload,{className:"mr-2 size-4"}),I?"Görseller Yükle":"Görsel Yükle"]}),z||H?(0,a.jsx)(p.Button,{asChild:!0,variant:"ghost",size:"sm",disabled:V&&!H,children:(0,a.jsxs)("a",{href:z||"#",onClick:e=>{H&&(e.preventDefault(),H())},children:[(0,a.jsx)(n,{className:"mr-2 size-4"}),"Kütüphaneyi aç"]})}):null]}),I?(0,a.jsx)(()=>F.length?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Galeri"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:F.map((e,t)=>{let r=!!M&&k(M)===e,i=N(e),l=i?_(e):e;return(0,a.jsx)("div",{className:(0,m.cn)("rounded-md border p-2",r&&"border-primary"),children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-35 shrink-0",children:(0,a.jsx)("div",{className:"overflow-hidden rounded-md border bg-background",children:(0,a.jsx)(j,{ratio:16/9,children:i?(0,a.jsx)("object",{data:l,type:"image/svg+xml",className:"h-full w-full","aria-label":`SVG image ${t+1}`,children:(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:"SVG yüklenemedi."})}):(0,a.jsx)("div",{className:"relative h-full w-full",children:(0,a.jsx)("img",{src:l,alt:`image-${t+1}`,className:"h-full w-full object-cover",onError:e=>{let a=e.currentTarget;a.style.display="none";let t=a.parentElement;if(t&&!t.querySelector(".error-placeholder")){let e=document.createElement("div");e.className="error-placeholder absolute inset-0 flex items-center justify-center bg-muted/50",e.innerHTML=`
                                    <svg class="size-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                  `,t.appendChild(e)}}})})})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"truncate text-sm font-medium",title:e,children:r?"Kapak":`G\xf6rsel ${t+1}`}),r?(0,a.jsx)(h.Badge,{variant:"secondary",className:"mt-1",children:"Kapak"}):null]}),(0,a.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[S?(0,a.jsxs)(p.Button,{type:"button",variant:r?"default":"outline",size:"sm",disabled:V,onClick:()=>S(e),title:"Kapak yap",children:[(0,a.jsx)(c.Star,{className:"mr-2 size-4"}),"Kapak"]}):null,(0,a.jsxs)(p.Button,{type:"button",variant:"outline",size:"sm",disabled:V||!L||r,onClick:()=>(e=>{if(!L)return;let a=F[e];M&&k(M)===a?s.toast.error("Kapak görseli silinemez. Önce başka bir kapak seç."):L(F.filter((a,t)=>t!==e))})(t),title:r?"Kapak silinemez":"Sil",children:[(0,a.jsx)(o.Trash2,{className:"mr-2 size-4"}),"Sil"]})]})]}),(0,a.jsx)(w,{url:e,disabled:V}),L?null:(0,a.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Not: ",(0,a.jsx)("code",{children:"onChangeMultiple"})," verilmediği için galeri parent tarafından yönetilmiyor."]})]})]})},`${e}-${t}`)})})]}):(0,a.jsx)("div",{className:"rounded-md border bg-muted/20 p-3 text-center text-sm text-muted-foreground",children:"Henüz galeri görseli yok."}),{}):(0,a.jsx)(()=>{if(!b)return(0,a.jsx)("div",{className:"rounded-md border bg-muted/20 p-3 text-center text-sm text-muted-foreground",children:"Henüz görsel seçilmedi."});let e=N(b),t=e?_(b):b;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Önizleme"}),(0,a.jsx)("div",{className:"overflow-hidden rounded-md border bg-background",children:(0,a.jsx)(j,{ratio:O,children:e?(0,a.jsx)("object",{data:t,type:"image/svg+xml",className:"h-full w-full","aria-label":"SVG preview",children:(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:"SVG önizleme açılamadı."})}):(0,a.jsx)("div",{className:"relative h-full w-full",children:(0,a.jsx)("img",{src:t,alt:"Görsel",className:"h-full w-full",style:{objectFit:R},onError:e=>{let a=e.currentTarget;a.style.display="none";let t=a.parentElement;if(t&&!t.querySelector(".error-placeholder")){let e=document.createElement("div");e.className="error-placeholder absolute inset-0 flex flex-col items-center justify-center gap-2 bg-muted/50",e.innerHTML=`
                        <svg class="size-12 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span class="text-xs text-muted-foreground">G\xf6rsel y\xfcklenemedi</span>
                      `,t.appendChild(e)}}})})})}),(0,a.jsxs)("div",{className:"rounded-md border bg-muted/50 p-2",children:[(0,a.jsx)("div",{className:"mb-1 text-xs font-medium text-muted-foreground",children:"URL:"}),(0,a.jsx)("code",{className:"block wrap-break-word text-xs font-mono leading-relaxed text-foreground",children:b})]}),(0,a.jsx)(w,{url:b,disabled:V})]})},{})]})]})}],1695)},57428,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(71645),s=e.i(20783),i=e.i(30030),l=e.i(81140),n=e.i(69340),d=e.i(99682),c=e.i(35804),o=e.i(96626),u=e.i(48425),m="Checkbox",[p,h]=(0,i.createContextScope)(m),[f,x]=p(m);function v(e){let{__scopeCheckbox:t,checked:s,children:i,defaultChecked:l,disabled:d,form:c,name:o,onCheckedChange:u,required:p,value:h="on",internal_do_not_use_render:x}=e,[v,g]=(0,n.useControllableState)({prop:s,defaultProp:l??!1,onChange:u,caller:m}),[b,y]=r.useState(null),[j,k]=r.useState(null),N=r.useRef(!1),_=!b||!!c||!!b.closest("form"),C={checked:v,disabled:d,setChecked:g,control:b,setControl:y,name:o,form:c,value:h,hasConsumerStoppedPropagationRef:N,required:p,defaultChecked:!w(l)&&l,isFormControl:_,bubbleInput:j,setBubbleInput:k};return(0,a.jsx)(f,{scope:t,...C,children:"function"==typeof x?x(C):i})}var g="CheckboxTrigger",b=r.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:i,...n},d)=>{let{control:c,value:o,disabled:m,checked:p,required:h,setControl:f,setChecked:v,hasConsumerStoppedPropagationRef:b,isFormControl:y,bubbleInput:j}=x(g,e),k=(0,s.useComposedRefs)(d,f),N=r.useRef(p);return r.useEffect(()=>{let e=c?.form;if(e){let a=()=>v(N.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[c,v]),(0,a.jsx)(u.Primitive.button,{type:"button",role:"checkbox","aria-checked":w(p)?"mixed":p,"aria-required":h,"data-state":C(p),"data-disabled":m?"":void 0,disabled:m,value:o,...n,ref:k,onKeyDown:(0,l.composeEventHandlers)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.composeEventHandlers)(i,e=>{v(e=>!!w(e)||!e),j&&y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});b.displayName=g;var y=r.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:i,defaultChecked:l,required:n,disabled:d,value:c,onCheckedChange:o,form:u,...m}=e;return(0,a.jsx)(v,{__scopeCheckbox:r,checked:i,defaultChecked:l,disabled:d,required:n,onCheckedChange:o,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{...m,ref:t,__scopeCheckbox:r}),e&&(0,a.jsx)(_,{__scopeCheckbox:r})]})})});y.displayName=m;var j="CheckboxIndicator",k=r.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,l=x(j,r);return(0,a.jsx)(o.Presence,{present:s||w(l.checked)||!0===l.checked,children:(0,a.jsx)(u.Primitive.span,{"data-state":C(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=j;var N="CheckboxBubbleInput",_=r.forwardRef(({__scopeCheckbox:e,...t},i)=>{let{control:l,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:m,required:p,disabled:h,name:f,value:v,form:g,bubbleInput:b,setBubbleInput:y}=x(N,e),j=(0,s.useComposedRefs)(i,y),k=(0,d.usePrevious)(o),_=(0,c.useSize)(l);r.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,a=!n.current;if(k!==o&&e){let t=new Event("click",{bubbles:a});b.indeterminate=w(o),e.call(b,!w(o)&&o),b.dispatchEvent(t)}},[b,k,o,n]);let C=r.useRef(!w(o)&&o);return(0,a.jsx)(u.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??C.current,required:p,disabled:h,name:f,value:v,form:g,...t,tabIndex:-1,ref:j,style:{...t.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function w(e){return"indeterminate"===e}function C(e){return w(e)?"indeterminate":e?"checked":"unchecked"}_.displayName=N,e.s(["Checkbox",()=>y,"CheckboxIndicator",()=>k,"Indicator",()=>k,"Root",()=>y,"createCheckboxScope",()=>h,"unstable_BubbleInput",()=>_,"unstable_CheckboxBubbleInput",()=>_,"unstable_CheckboxProvider",()=>v,"unstable_CheckboxTrigger",()=>b,"unstable_Provider",()=>v,"unstable_Trigger",()=>b],88474);var L=e.i(88474),L=L,S=e.i(78784),M=e.i(75157);function T(e){let r,s,i,l,n,d=(0,t.c)(9);return d[0]!==e?({className:r,...s}=e,d[0]=e,d[1]=r,d[2]=s):(r=d[1],s=d[2]),d[3]!==r?(i=(0,M.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),d[3]=r,d[4]=i):i=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(L.Indicator,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,a.jsx)(S.CheckIcon,{className:"size-3.5"})}),d[5]=l):l=d[5],d[6]!==s||d[7]!==i?(n=(0,a.jsx)(L.Root,{"data-slot":"checkbox",className:i,...s,children:l}),d[6]=s,d[7]=i,d[8]=n):n=d[8],n}e.s(["Checkbox",()=>T],57428)},97625,e=>{"use strict";let a=(0,e.i(75254).default)("code-xml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);e.s(["Code2",()=>a],97625)},73708,e=>{"use strict";let a=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>a],73708)},5228,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(75254);let s=(0,r.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),i=(0,r.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),l=(0,r.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),n=(0,r.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),d=(0,r.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),c=(0,r.default)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),o=(0,r.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),u=(0,r.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),m=(0,r.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),p=(0,r.default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);var h=e.i(73708),f=e.i(97625);let x=(0,r.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=e.i(75157),g=e.i(19455),b=e.i(10204),y=e.i(24687),j=e.i(15288),k=e.i(77572),N=e.i(87486);let _="260px";function w(e){if(!e)return"";let a=e.trim();if(a.startsWith("{")&&a.endsWith("}"))try{let e=JSON.parse(a);if(e&&"string"==typeof e.html)return e.html}catch{}return e}function C(e){let a=window.getSelection();if(!a||0===a.rangeCount)return;let t=a.getRangeAt(0);t.deleteContents();let r=document.createElement("div");r.innerHTML=e;let s=document.createDocumentFragment(),i=null;for(;r.firstChild;)i=r.firstChild,s.appendChild(r.firstChild);if(t.insertNode(s),i){let e=document.createRange();e.setStartAfter(i),e.collapse(!0),a.removeAllRanges(),a.addRange(e)}}e.s(["default",0,({label:e="İçerik",value:r,onChange:L,disabled:S=!1,height:M=_,onUploadImage:T})=>{let z=(0,t.useRef)(null),H=(0,t.useRef)(null),[I,A]=(0,t.useState)("visual"),[R,B]=(0,t.useState)(w(r));(0,t.useEffect)(()=>{let e=w(r);B(e),z.current&&"visual"===I&&z.current.innerHTML!==e&&(z.current.innerHTML=e||""),"string"==typeof r&&r.trim().startsWith("{")&&r.trim().endsWith("}")&&e!==r&&L(e)},[r]),(0,t.useEffect)(()=>{"visual"===I&&z.current&&z.current.innerHTML!==R&&(z.current.innerHTML=R||"")},[I,R]);let E=e=>{B(e),L(e)},D=()=>z.current?.focus(),$=(e,a)=>{if(!S&&"u">typeof document){D();try{document.execCommand(e,!1,a),z.current&&E(z.current.innerHTML)}catch{}}},F=async()=>{if(!S){if(T&&H.current)return void H.current.click();{let e=window.prompt("Resim URL'si girin:");if(e&&e.trim()){let a=e.trim(),t=`<img src="${a}" alt="" style="max-width:100%; height:auto;" />`;D(),C(t),z.current&&E(z.current.innerHTML)}}}},V=async e=>{if(!T)return;let a=e.target.files?.[0];if(e.target.value="",a)try{let e=await T(a);if(!e)return;let t=a.name.replace(/"/g,"&quot;"),r=`<img src="${e}" alt="${t}" style="max-width:100%; height:auto;" />`;D(),C(r),z.current&&E(z.current.innerHTML)}catch{}},q=e=>(0,a.jsx)(g.Button,{type:"button",variant:"outline",size:"sm",...e});return(0,a.jsxs)(j.Card,{children:[(0,a.jsx)(j.CardHeader,{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(b.Label,{className:"text-sm",children:e}),(0,a.jsxs)(N.Badge,{variant:"secondary",className:"gap-1",children:[(0,a.jsx)(x,{className:"size-3.5"}),"Live preview"]})]})}),(0,a.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,a.jsxs)(k.Tabs,{value:I,onValueChange:e=>A(e),children:[(0,a.jsxs)(k.TabsList,{className:"w-fit",children:[(0,a.jsx)(k.TabsTrigger,{value:"visual",disabled:S,children:"Görsel editör"}),(0,a.jsx)(k.TabsTrigger,{value:"source",disabled:S,children:"Kaynak (HTML)"})]}),(0,a.jsxs)("div",{className:"mt-3 rounded-md border",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-1 border-b bg-muted/30 p-2",children:[(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("bold")),disabled:S||"visual"!==I,title:"Kalın",children:(0,a.jsx)(s,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("italic")),disabled:S||"visual"!==I,title:"İtalik",children:(0,a.jsx)(i,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("underline")),disabled:S||"visual"!==I,title:"Altı çizili",children:(0,a.jsx)(l,{className:"size-4"})}),(0,a.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("formatBlock","<p>")),disabled:S||"visual"!==I,title:"Paragraf",children:(0,a.jsx)(m,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("formatBlock","<h2>")),disabled:S||"visual"!==I,title:"Başlık (H2)",children:(0,a.jsx)(o,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("formatBlock","<h3>")),disabled:S||"visual"!==I,title:"Alt başlık (H3)",children:(0,a.jsx)(u,{className:"size-4"})}),(0,a.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("insertUnorderedList")),disabled:S||"visual"!==I,title:"Madde işaretli liste",children:(0,a.jsx)(n,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("insertOrderedList")),disabled:S||"visual"!==I,title:"Numaralı liste",children:(0,a.jsx)(d,{className:"size-4"})}),(0,a.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),D(),void(C(`
      <table style="width:100%; border-collapse:collapse;" border="1">
        <thead>
          <tr>
            <th style="padding:8px; text-align:left;">Başlık 1</th>
            <th style="padding:8px; text-align:left;">Başlık 2</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:8px;">H\xfccre 1</td>
            <td style="padding:8px;">H\xfccre 2</td>
          </tr>
        </tbody>
      </table>
      <p></p>
    `.trim()),z.current&&E(z.current.innerHTML))),disabled:S||"visual"!==I,title:"Tablo ekle",children:(0,a.jsx)(p,{className:"size-4"})}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),void F()),disabled:S||"visual"!==I,title:T?"Resim yükle ve ekle":"Resim URL'si ile ekle",children:(0,a.jsx)(h.Image,{className:"size-4"})}),(0,a.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,a.jsx)(q,{onMouseDown:e=>(e.preventDefault(),$("removeFormat")),disabled:S||"visual"!==I,title:"Biçimlendirmeyi temizle",children:(0,a.jsx)(c,{className:"size-4"})}),T?(0,a.jsx)("input",{ref:H,type:"file",accept:"image/*",className:"hidden",onChange:V}):null]}),(0,a.jsx)(k.TabsContent,{value:"visual",className:"m-0",children:(0,a.jsx)("div",{ref:z,className:(0,v.cn)("px-3 py-2 text-sm outline-none",S?"cursor-not-allowed bg-muted/20":"bg-background"),style:{minHeight:M,maxHeight:"600px",overflowY:"auto"},contentEditable:!S,onInput:e=>{S||E(e.currentTarget.innerHTML)},suppressContentEditableWarning:!0})}),(0,a.jsx)(k.TabsContent,{value:"source",className:"m-0",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(f.Code2,{className:"size-4"}),"HTML kaynak"]}),(0,a.jsx)(y.Textarea,{value:R,onChange:e=>E(e.target.value),disabled:S,className:"font-mono text-xs leading-5",style:{height:M,maxHeight:"600px",resize:"vertical"},placeholder:"<p>HTML içeriği buraya yaz...</p>"})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Önizleme"}),(0,a.jsx)("div",{className:"rounded-md border bg-background p-3",children:R&&R.trim()?(0,a.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:R}}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Henüz içerik yok. Yazdıkça burada anlık olarak gözükecek."})}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Not: Görsel editör ",(0,a.jsx)("code",{children:"execCommand"})," tabanlıdır; tarayıcı davranışları farklılık gösterebilir."]})]})]})]})}],5228)},72820,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566),s=e.i(46696),i=e.i(71689),l=e.i(56909),n=e.i(90092),d=e.i(5861),c=e.i(20995),o=e.i(31658),u=e.i(65994),m=e.i(19455),p=e.i(87486),h=e.i(15288),f=e.i(93479),x=e.i(10204),v=e.i(24687),g=e.i(77572),b=e.i(72436),y=e.i(57428),j=e.i(67489),k=e.i(80352),N=e.i(5228);let _=e=>"string"==typeof e?e.trim().toLowerCase():"",w=e=>null==e?"":String(e),C=(e,a,t)=>{let r=_(e?.locale_resolved??a??t??"")||_(t)||"";return e?{id:e.id,locale:r,name:w(e.name),slug:w(e.slug),summary:w(e.summary),content:w(e.content),description:w(e.description),material:w(e.material),price:w(e.price),includes:w(e.includes),warranty:w(e.warranty),image_alt:w(e.image_alt),is_active:!!e.is_active,featured:!!e.featured,display_order:Number.isFinite(e.display_order)?String(e.display_order):"0",type:w(e.type)||"other",featured_image:w(e.featured_image),image_url:w(e.image_url),image_asset_id:w(e.image_asset_id),area:w(e.area),duration:w(e.duration),maintenance:w(e.maintenance),season:w(e.season),equipment:w(e.equipment),tags:w(e.tags),meta_title:w(e.meta_title),meta_description:w(e.meta_description),meta_keywords:w(e.meta_keywords),replicate_all_locales:!0,apply_all_locales:!1}:{id:void 0,locale:r,name:"",slug:"",summary:"",content:"",description:"",material:"",price:"",includes:"",warranty:"",image_alt:"",is_active:!0,featured:!1,display_order:"0",type:"other",featured_image:"",image_url:"",image_asset_id:"",area:"",duration:"",maintenance:"",season:"",equipment:"",tags:"",meta_title:"",meta_description:"",meta_keywords:"",replicate_all_locales:!0,apply_all_locales:!1}};var L=e.i(1695);e.i(70272);var S=e.i(83661);let M=e=>String(e??"").trim(),T=e=>{let a=[],t=new Set;for(let r of e){let e=M(r);e&&(t.has(e)||(t.add(e),a.push(e)))}return a},z=({serviceId:e,locale:i,disabled:l,metadata:n,featuredImageValue:d,onFeaturedImageChange:c,onGalleryChange:o})=>{let m=(0,r.useRouter)(),p=(0,u.useAdminT)(),{data:h,isLoading:f,isFetching:x,refetch:v}=(0,S.useListServiceImagesAdminQuery)(e,{skip:!e}),g=t.useMemo(()=>[...h??[]].sort((e,a)=>{let t=Number(e?.display_order??0),r=Number(a?.display_order??0);if(t!==r)return t-r;let s=String(e?.created_at??""),i=String(a?.created_at??"");return s<i?-1:+(s>i)}),[h]),[b,{isLoading:y}]=(0,S.useCreateServiceImageAdminMutation)(),[j,{isLoading:k}]=(0,S.useDeleteServiceImageAdminMutation)(),[N,{isLoading:_}]=(0,S.useUpdateServiceAdminMutation)(),w=t.useMemo(()=>(g??[]).map(e=>M(e?.image_url)).filter(Boolean),[g]),[C,z]=t.useState(w);t.useEffect(()=>{z(w)},[w]);let H=l||f||x||y||k||_,I=async a=>{let t;if(!e)return null;let r=M(a);return r?(t=M(r))&&(g??[]).some(e=>M(e?.image_url)===t)?g??null:await b({serviceId:e,payload:{image_url:r,image_asset_id:null,is_active:!0,display_order:void 0,title:null,alt:null,caption:null,locale:i,replicate_all_locales:!0}}).unwrap():null},A=async a=>{if(!e)return;let t=M(a);if(!t)return;let r=(g??[]).find(e=>M(e?.image_url)===t);if(!r)return;let s=await j({serviceId:e,imageId:r.id}).unwrap();return o?.(s),s},R=async a=>{if(!e)return;let t=M(a);if(!t)return;let r={image_url:t,featured_image:t},s=null;for(let a of[()=>N({id:e,patch:r}).unwrap(),()=>N({serviceId:e,patch:r}).unwrap(),()=>N({id:e,payload:r}).unwrap(),()=>N({serviceId:e,payload:r}).unwrap(),()=>N({id:e,data:r}).unwrap(),()=>N({serviceId:e,data:r}).unwrap()])try{await a();return}catch(e){s=e}throw s},B=e=>{c(M(e))},E=M(d);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(L.AdminImageUploadField,{label:p("admin.services.formImage.coverLabel"),helperText:(0,a.jsxs)(a.Fragment,{children:[p("admin.services.formImage.coverHelperPrefix")," ",(0,a.jsx)("code",{children:"services.image_url"})," ",p("admin.services.formImage.coverHelperField")," ",p("admin.services.formImage.coverHelperSuffix")]}),bucket:"public",folder:"services/cover",metadata:{...n||{},section:"cover"},value:E,onChange:a=>{let t=M(a);B(t),e&&t&&(z(e=>T([t,...e??[]])),(async()=>{try{let e=await I(t);e&&o?.(e),await R(t),await v(),s.toast.success(p("admin.services.formImage.coverSaved"))}catch(a){let e=a?.data?.error?.message||a?.data?.message||a?.message||p("admin.services.formImage.coverSaveError");s.toast.error(e)}})())},disabled:l,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>m.push("/admin/storage")}),e?(0,a.jsx)(L.AdminImageUploadField,{label:p("admin.services.formImage.galleryLabel"),helperText:(0,a.jsxs)(a.Fragment,{children:[p("admin.services.formImage.galleryHelperPrefix")," (",(0,a.jsx)("code",{children:"service_images"}),")."," ",p("admin.services.formImage.galleryHelperSuffix")]}),bucket:"public",folder:"services/gallery",metadata:{...n||{},section:"gallery"},multiple:!0,values:C,onChangeMultiple:a=>{if(!e)return;let t=T((a??[]).map(e=>M(e)));z(t);let r=new Set(w),i=new Set(t),l=t.filter(e=>!r.has(e)),n=w.filter(e=>!i.has(e)),c=M(d),u=n.filter(e=>e!==c);n.length>0&&u.length!==n.length&&(z(e=>T([c,...e??[]])),s.toast.error(p("admin.services.formImage.coverDeleteError"))),l.length>0&&(async()=>{try{let e=null;for(let a of l){let t=await I(a);t&&(e=t)}e&&o?.(e),await v()}catch(a){let e=a?.data?.error?.message||a?.data?.message||a?.message||p("admin.services.formImage.galleryAddError");s.toast.error(e),await v()}})(),u.length>0&&(async()=>{try{for(let e of u)await A(e);await v()}catch(a){let e=a?.data?.error?.message||a?.data?.message||a?.message||p("admin.services.formImage.galleryDeleteError");s.toast.error(e),await v()}})()},onSelectAsCover:a=>{let t=M(a);!t||(B(t),z(e=>T([t,...e??[]])),e&&(async()=>{try{let e=await I(t);e&&o?.(e),await R(t),await v(),s.toast.success(p("admin.services.formImage.coverSaved"))}catch(a){let e=a?.data?.error?.message||a?.data?.message||a?.message||p("admin.services.formImage.coverSaveError");s.toast.error(e)}})())},coverValue:E,disabled:H,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>m.push("/admin/storage")}):(0,a.jsx)("div",{className:"rounded-md border p-3 text-sm text-muted-foreground",children:p("admin.services.formImage.galleryPlaceholder")})]})};var H=e.i(96865);let I=e=>String(e??"").trim(),A=({mode:e,initialData:r,loading:i,saving:l,locales:n,localesLoading:c,defaultLocale:o,onSubmit:w,onCancel:L,onLocaleChange:S})=>{let M=(0,d.useAdminLocales)(),T=(0,u.useAdminT)(),A=!!M?.loading||!!M?.isLoading||!!M?.isFetching,R=_(M?.defaultLocale??M?.default_locale??M?.default??""),B=t.useMemo(()=>(Array.isArray(M?.locales)?M.locales:Array.isArray(M?.options)?M.options:Array.isArray(M?.localeOptions)?M.localeOptions:[]).map(e=>({value:_(e?.value??e?.code??e),label:String(e?.label??e?.name??e?.value??e?.code??e??"").trim()})).filter(e=>!!e.value).map(e=>({value:e.value,label:e.label||e.value.toUpperCase()})),[M]),E=t.useMemo(()=>_(o||R||B?.[0]?.value||"")||"",[o,R,B]),[D,$]=t.useState(()=>C(r,o,E)),[F,V]=t.useState(!1);t.useEffect(()=>{let e=C(r,o,E),a=I(r?.image_url)||I(r?.featured_image)||"",t=I(e?.image_url)||I(e?.featured_image)||a||"";$({...e,image_url:t,featured_image:t,tags:I(e?.tags)||I(r?.tags),meta_title:I(e?.meta_title)||I(r?.meta_title),meta_description:I(e?.meta_description)||I(r?.meta_description),meta_keywords:I(e?.meta_keywords)||I(r?.meta_keywords)}),V(!1)},[r,o,E]);let q=i||l,O=_(D.locale||E);t.useEffect(()=>{if(A)return;let e=B.map(e=>e.value),a=_(D.locale),t=(a&&e.includes(a)?a:_(E))||e[0]||"";t&&t!==a&&($(e=>({...e,locale:t})),S?.(t))},[A,B,E]);let P=t.useMemo(()=>({module_key:"service",locale:O,service_slug:D.slug||D.name||"",...D.id?{service_id:D.id}:{}}),[O,D.slug,D.name,D.id]),{onUpload:U}=(e=>{let[a]=(0,H.useCreateAssetAdminMutation)(),t=(0,u.useAdminT)();return{onUpload:async r=>{try{let s,i=await a({file:r,bucket:"public",folder:"services/content",metadata:(s=e.metadata,Object.fromEntries(Object.entries(s).map(([e,a])=>[e,String(a)])))}).unwrap(),l=i?.url;if(!l)throw Error(t("admin.services.upload.noUrl"));return l}catch(a){let e=a?.data?.error?.message||a?.data?.message||a?.message||t("admin.services.upload.error");return s.toast.error(e),""}}}})({metadata:P}),G=I(D.image_url)||I(D.featured_image),K=q||A||0===B.length;return(0,a.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),q)return;let a=_(D.locale||E);if(!a)return void s.toast.error(T("admin.services.form.localeRequired"));if(!D.name.trim()||!D.slug.trim())return void s.toast.error(T("admin.services.form.nameSlugRequired"));let t=I(D.image_url)||I(D.featured_image);w({...D,locale:a,name:D.name.trim(),slug:D.slug.trim(),description:String(D.description||""),featured:!!D.featured,is_active:!!D.is_active,display_order:((e,a=0)=>{let t=Number(String(e??"").trim());return Number.isFinite(t)?t:a})(D.display_order,0),image_url:I(t)||null,featured_image:I(t)||null,image_asset_id:I(D.image_asset_id)||null,image_alt:I(D.image_alt)||null,material:I(D.material)||null,price:I(D.price)||null,includes:I(D.includes)||null,warranty:I(D.warranty)||null,tags:I(D.tags)||null,meta_title:I(D.meta_title)||null,meta_description:I(D.meta_description)||null,meta_keywords:I(D.meta_keywords)||null,area:I(D.area)||null,duration:I(D.duration)||null,maintenance:I(D.maintenance)||null,season:I(D.season)||null,equipment:I(D.equipment)||null})},className:"space-y-4",children:(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(h.CardHeader,{className:"gap-2",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(h.CardTitle,{className:"text-base",children:"create"===e?T("admin.services.form.createTitle"):T("admin.services.form.editTitle")}),(0,a.jsx)(h.CardDescription,{children:T("admin.services.form.description")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:justify-end",children:[i?(0,a.jsx)(p.Badge,{variant:"secondary",children:T("admin.services.form.loading")}):null,L?(0,a.jsx)(m.Button,{type:"button",variant:"outline",onClick:L,disabled:q,children:T("admin.services.form.backButton")}):null,(0,a.jsx)(m.Button,{type:"submit",disabled:q,children:l?"create"===e?T("admin.services.form.creating"):T("admin.services.form.saving"):"create"===e?T("admin.services.form.createButton"):T("admin.services.form.saveButton")})]})]})}),(0,a.jsx)(h.CardContent,{className:"space-y-4",children:(0,a.jsxs)(g.Tabs,{defaultValue:"form",children:[(0,a.jsxs)(g.TabsList,{children:[(0,a.jsx)(g.TabsTrigger,{value:"form",children:T("admin.services.form.formTab")}),(0,a.jsx)(g.TabsTrigger,{value:"json",children:T("admin.services.form.jsonTab")})]}),(0,a.jsx)(g.TabsContent,{value:"json",className:"mt-4",children:(0,a.jsx)(k.AdminJsonEditor,{value:D,disabled:q,onChange:e=>$(e),label:T("admin.services.form.jsonLabel"),helperText:T("admin.services.form.jsonHelperText")})}),(0,a.jsx)(g.TabsContent,{value:"form",className:"mt-4",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,a.jsxs)("div",{className:"space-y-4 lg:col-span-8",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.localeLabel")}),(0,a.jsxs)(j.Select,{value:_(D.locale)||"",onValueChange:e=>{let a=_(e),t=B.map(e=>e.value),r=a&&t.includes(a)?a:_(E);r?($(e=>({...e,locale:r})),S?.(r)):s.toast.error(T("admin.services.form.localeRequired"))},disabled:K,children:[(0,a.jsx)(j.SelectTrigger,{children:(0,a.jsx)(j.SelectValue,{placeholder:T("admin.services.form.localePlaceholder")})}),(0,a.jsx)(j.SelectContent,{children:B.map(e=>(0,a.jsx)(j.SelectItem,{value:e.value,children:e.label},`${e.value}:${e.label}`))})]}),A||0!==B.length?null:(0,a.jsx)("p",{className:"text-xs text-destructive",children:T("admin.services.form.localeEmptyError")})]}),(0,a.jsxs)("div",{className:"flex items-end gap-4 md:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Checkbox,{id:"svc_is_active",checked:!!D.is_active,onCheckedChange:e=>$(a=>({...a,is_active:!0===e})),disabled:q}),(0,a.jsx)(x.Label,{htmlFor:"svc_is_active",children:T("admin.services.form.activeLabel")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Checkbox,{id:"svc_featured",checked:!!D.featured,onCheckedChange:e=>$(a=>({...a,featured:!0===e})),disabled:q}),(0,a.jsx)(x.Label,{htmlFor:"svc_featured",children:T("admin.services.form.featuredLabel")})]})]})]}),(0,a.jsx)(b.Separator,{}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.nameLabel")}),(0,a.jsx)(f.Input,{value:D.name,onChange:e=>{let a=e.target.value;$(e=>{let t={...e,name:a};return F||(t.slug=(e=>{if(!e)return"";let a=e.trim(),t={ç:"c",Ç:"c",ğ:"g",Ğ:"g",ı:"i",I:"i",İ:"i",ö:"o",Ö:"o",ş:"s",Ş:"s",ü:"u",Ü:"u"};return(a=(a=a.split("").map(e=>t[e]??e).join("")).replace(/ß/g,"ss").replace(/ẞ/g,"ss")).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")})(a)),t})},disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.slugLabel")}),(0,a.jsx)(f.Input,{value:D.slug,onFocus:()=>V(!0),onChange:e=>{V(!0),$(a=>({...a,slug:e.target.value}))},disabled:q})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.descriptionLabel")}),(0,a.jsx)(N.default,{label:"",value:D.description||"",onChange:e=>$(a=>({...a,description:e})),disabled:q,height:"280px",onUploadImage:U})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.materialLabel")}),(0,a.jsx)(f.Input,{value:D.material,onChange:e=>$(a=>({...a,material:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.priceLabel")}),(0,a.jsx)(f.Input,{value:D.price,onChange:e=>$(a=>({...a,price:e.target.value})),disabled:q})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.includesLabel")}),(0,a.jsx)(v.Textarea,{rows:2,value:D.includes,onChange:e=>$(a=>({...a,includes:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.warrantyLabel")}),(0,a.jsx)(v.Textarea,{rows:2,value:D.warranty,onChange:e=>$(a=>({...a,warranty:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:[T("admin.services.form.tagsLabel")," ",(0,a.jsx)("span",{className:"text-muted-foreground",children:T("admin.services.form.tagsHelp")})]}),(0,a.jsx)(f.Input,{value:D.tags,onChange:e=>$(a=>({...a,tags:e.target.value})),disabled:q,placeholder:T("admin.services.form.tagsPlaceholder")})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.metaTitleLabel")}),(0,a.jsx)(f.Input,{value:D.meta_title,onChange:e=>$(a=>({...a,meta_title:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.metaKeywordsLabel")}),(0,a.jsx)(f.Input,{value:D.meta_keywords,onChange:e=>$(a=>({...a,meta_keywords:e.target.value})),disabled:q})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.metaDescriptionLabel")}),(0,a.jsx)(v.Textarea,{rows:2,value:D.meta_description,onChange:e=>$(a=>({...a,meta_description:e.target.value})),disabled:q})]}),(0,a.jsx)(b.Separator,{}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.areaLabel")}),(0,a.jsx)(f.Input,{value:D.area,onChange:e=>$(a=>({...a,area:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.durationLabel")}),(0,a.jsx)(f.Input,{value:D.duration,onChange:e=>$(a=>({...a,duration:e.target.value})),disabled:q})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.maintenanceLabel")}),(0,a.jsx)(f.Input,{value:D.maintenance,onChange:e=>$(a=>({...a,maintenance:e.target.value})),disabled:q})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.seasonLabel")}),(0,a.jsx)(f.Input,{value:D.season,onChange:e=>$(a=>({...a,season:e.target.value})),disabled:q})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.equipmentLabel")}),(0,a.jsx)(f.Input,{value:D.equipment,onChange:e=>$(a=>({...a,equipment:e.target.value})),disabled:q})]})]}),(0,a.jsxs)("div",{className:"space-y-4 lg:col-span-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.displayOrderLabel")}),(0,a.jsx)(f.Input,{type:"number",min:0,value:D.display_order,onChange:e=>$(a=>({...a,display_order:e.target.value})),disabled:q})]}),(0,a.jsx)(z,{serviceId:D.id,locale:O,disabled:q||!1,metadata:P,featuredImageValue:G,onFeaturedImageChange:e=>{let a=I(e);$(e=>({...e,image_url:a,featured_image:a}))}}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:T("admin.services.form.imageAltLabel")}),(0,a.jsx)(f.Input,{value:D.image_alt,onChange:e=>$(a=>({...a,image_alt:e.target.value})),disabled:q})]}),(0,a.jsx)(b.Separator,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:T("admin.services.form.multiLocaleTitle")}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(y.Checkbox,{id:"svc_replicate_all",checked:!!D.replicate_all_locales,onCheckedChange:e=>$(a=>({...a,replicate_all_locales:!0===e})),disabled:q}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(x.Label,{htmlFor:"svc_replicate_all",className:"leading-none",children:T("admin.services.form.replicateAllLocales")}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,a.jsx)("code",{children:"replicate_all_locales"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(y.Checkbox,{id:"svc_apply_all",checked:!!D.apply_all_locales,onCheckedChange:e=>$(a=>({...a,apply_all_locales:!0===e})),disabled:q}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(x.Label,{htmlFor:"svc_apply_all",className:"leading-none",children:T("admin.services.form.applyAllLocales")}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,a.jsx)("code",{children:"apply_all_locales"})})]})]})]})]})]})})]})})]})})};function R(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}function B({id:e}){let f=(0,u.useAdminT)(),x=(0,r.useRouter)(),v=(0,r.useSearchParams)(),g="new"===String(e),{localeOptions:b,defaultLocaleFromDb:y,loading:j,fetching:k}=(0,d.useAdminLocales)(),N=t.useMemo(()=>(0,c.resolveAdminApiLocale)(b,y,"de"),[b,y]),_=t.useMemo(()=>new Set((b??[]).map(e=>(0,o.localeShortClient)(e.value)).filter(Boolean)),[b]),w=t.useMemo(()=>{let e=v?.get("locale");return(0,o.localeShortClient)(e)||""},[v]),[C,L]=t.useState("");t.useEffect(()=>{b&&0!==b.length&&L(e=>{let a=(0,o.localeShortClient)(e),t=(0,o.localeShortClient)(w),r=(0,o.localeShortClientOr)(N,"de"),s=e=>!!e&&(0===_.size||_.has(e));return a&&s(a)?a:t&&s(t)?t:r&&s(r)?r:(0,o.localeShortClient)(b?.[0]?.value)||"de"})},[b,_,w,N]);let M=t.useMemo(()=>{let e=(0,o.localeShortClient)(C);return e&&(0===_.size||_.has(e))?e:(0,o.localeShortClientOr)(N,"de")},[C,_,N]);t.useEffect(()=>{let a=(0,o.localeShortClient)(C);if(!a||a===w)return;let t=new URLSearchParams(v?.toString()||"");t.set("locale",a),g?x.replace(`/admin/services/new?${t.toString()}`):x.replace(`/admin/services/${encodeURIComponent(String(e))}?${t.toString()}`)},[C]);let T=!j&&!k,z=(b?.length??0)>0,H=g||!R(String(e||""))||!M,{data:I,isLoading:B,isFetching:E,error:D,refetch:$}=(0,S.useGetServiceAdminQuery)({id:String(e),locale:M},{skip:H}),[F,V]=(0,S.useCreateServiceAdminMutation)(),[q,O]=(0,S.useUpdateServiceAdminMutation)(),P=j||k||B||E,U=V.isLoading||O.isLoading,G=P||U;function K(){x.push(`/admin/services?locale=${encodeURIComponent(M||"de")}`)}async function J(a){try{let t,r=(t=a.locale||M||N,String(t??"").trim().toLowerCase());if(!r||_.size>0&&!_.has((0,o.localeShortClient)(r)))return void s.toast.error(f("admin.services.formHeader.localeError"));let i={featured:a.featured,is_active:a.is_active,display_order:a.display_order?Number(a.display_order):void 0,featured_image:a.featured_image||null,image_url:a.image_url||null,image_asset_id:a.image_asset_id||null,area:a.area||null,duration:a.duration||null,maintenance:a.maintenance||null,season:a.season||null,equipment:a.equipment||null,locale:r,name:a.name?.trim()||"",slug:a.slug?.trim()||"",description:a.description||void 0,material:a.material||void 0,price:a.price||void 0,includes:a.includes||void 0,warranty:a.warranty||void 0,image_alt:a.image_alt||void 0,tags:a.tags||null,meta_title:a.meta_title||null,meta_description:a.meta_description||null,meta_keywords:a.meta_keywords||null};if(!i.name||!i.slug)return void s.toast.error(f("admin.services.formHeader.nameSlugRequired"));if(g){let e={...i,replicate_all_locales:a.replicate_all_locales},t=await F(e).unwrap(),l=String(t?.id??"").trim();if(!R(l))return void s.toast.error(f("admin.services.formHeader.createdNoId"));s.toast.success(f("admin.services.formHeader.created")),x.replace(`/admin/services/${encodeURIComponent(l)}?locale=${encodeURIComponent((0,o.localeShortClient)(r)||r)}`),x.refresh();return}let l=String(I?.id??e);if(!R(l))return void s.toast.error(f("admin.services.formHeader.idNotFound"));let n={...i,apply_all_locales:a.apply_all_locales};await q({id:l,patch:n}).unwrap(),s.toast.success(f("admin.services.formHeader.updated"));let d=(0,o.localeShortClient)(r);d&&d!==M&&L(d)}catch(e){s.toast.error(function(e,a){let t=e?.data?.error?.message;if("string"==typeof t&&t.trim())return t;let r=e?.data?.message;if("string"==typeof r&&r.trim())return r;let s=e?.error;return"string"==typeof s&&s.trim()?s:a}(e,f("admin.services.formHeader.defaultError")))}}if(T&&!z)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:f("admin.services.formHeader.noLocalesTitle")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:f("admin.services.formHeader.noLocalesDescription")})]}),(0,a.jsx)(h.Card,{children:(0,a.jsx)(h.CardContent,{className:"flex items-center justify-between pt-6",children:(0,a.jsx)(m.Button,{variant:"outline",onClick:()=>x.push("/admin/site-settings"),children:f("admin.services.formHeader.goToSettings")})})})]});if(!g&&!R(String(e||"")))return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:f("admin.services.formHeader.invalidIdTitle")}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[f("admin.services.formHeader.invalidIdDescription")," ",(0,a.jsx)("code",{className:"wrap-break-word",children:String(e||"-")})]})]}),(0,a.jsx)(h.Card,{children:(0,a.jsx)(h.CardContent,{className:"flex items-center justify-between pt-6",children:(0,a.jsxs)(m.Button,{variant:"outline",onClick:K,children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),f("admin.services.formHeader.backToList")]})})})]});if(!g&&!P&&!I&&D)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:f("admin.services.formHeader.notFoundTitle")}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[f("admin.services.formHeader.notFoundDescription")," ",(0,a.jsx)("code",{className:"wrap-break-word",children:String(e)})]})]}),(0,a.jsx)(h.Card,{children:(0,a.jsxs)(h.CardContent,{className:"flex items-center justify-between pt-6",children:[(0,a.jsxs)(m.Button,{variant:"outline",onClick:K,children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),f("admin.services.formHeader.backToList")]}),(0,a.jsxs)(m.Button,{variant:"outline",onClick:()=>$(),children:[(0,a.jsx)(n.RefreshCcw,{className:"mr-2 size-4"}),f("admin.services.formHeader.retryButton")]})]})})]});let W=g?f("admin.services.formHeader.createTitle"):I?.name||f("admin.services.formHeader.editTitle");return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)(m.Button,{variant:"outline",onClick:()=>x.back(),disabled:G,children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),f("admin.services.formHeader.backButton")]}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:W})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:f("admin.services.formHeader.description")}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:f("admin.services.formHeader.activeLocale")}),(0,a.jsx)(p.Badge,{variant:"secondary",children:M||"-"}),g?(0,a.jsx)(p.Badge,{children:"CREATE"}):(0,a.jsx)(p.Badge,{variant:"secondary",children:"EDIT"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Button,{variant:"outline",onClick:K,disabled:G,children:f("admin.services.formHeader.cancelButton")}),(0,a.jsxs)(m.Button,{onClick:()=>document.getElementById("service-form-submit")?.click?.(),disabled:G,children:[(0,a.jsx)(l.Save,{className:"mr-2 size-4"}),f("admin.services.formHeader.saveButton")]})]})]}),(0,a.jsx)(A,{mode:g?"create":"edit",initialData:!g&&I?I:void 0,loading:P,saving:U,locales:b??[],localesLoading:j||k,defaultLocale:M||N||"de",onSubmit:J,onCancel:K,onLocaleChange:e=>L((0,o.localeShortClientOr)(e,M||"de"))})]})}e.s(["default",()=>B],72820)}]);