(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99375,e=>{"use strict";var a=e.i(43476),s=e.i(932),t=e.i(71645),r=e.i(81140),i=e.i(20783),d=e.i(30030),n=e.i(69340),l=e.i(99682),c=e.i(35804),o=e.i(48425),u="Switch",[m,h]=(0,d.createContextScope)(u),[p,x]=m(u),f=t.forwardRef((e,s)=>{let{__scopeSwitch:d,name:l,checked:c,defaultChecked:m,required:h,disabled:x,value:f="on",onCheckedChange:v,form:b,...y}=e,[k,w]=t.useState(null),C=(0,i.useComposedRefs)(s,e=>w(e)),N=t.useRef(!1),S=!k||b||!!k.closest("form"),[B,L]=(0,n.useControllableState)({prop:c,defaultProp:m??!1,onChange:v,caller:u});return(0,a.jsxs)(p,{scope:d,checked:B,disabled:x,children:[(0,a.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":h,"data-state":g(B),"data-disabled":x?"":void 0,disabled:x,value:f,...y,ref:C,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{L(e=>!e),S&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),S&&(0,a.jsx)(j,{control:k,bubbles:!N.current,name:l,value:f,checked:B,required:h,disabled:x,form:b,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var v="SwitchThumb",b=t.forwardRef((e,s)=>{let{__scopeSwitch:t,...r}=e,i=x(v,t);return(0,a.jsx)(o.Primitive.span,{"data-state":g(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});b.displayName=v;var j=t.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:d=!0,...n},o)=>{let u=t.useRef(null),m=(0,i.useComposedRefs)(u,o),h=(0,l.usePrevious)(r),p=(0,c.useSize)(s);return t.useEffect(()=>{let e=u.current;if(!e)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==r&&a){let s=new Event("click",{bubbles:d});a.call(e,r),e.dispatchEvent(s)}},[h,r,d]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:m,style:{...n.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function g(e){return e?"checked":"unchecked"}j.displayName="SwitchBubbleInput",e.s(["Root",()=>f,"Switch",()=>f,"SwitchThumb",()=>b,"Thumb",()=>b,"createSwitchScope",()=>h],57287);var y=e.i(57287),y=y,k=e.i(75157);function w(e){let t,r,i,d,n,l=(0,s.c)(9);return l[0]!==e?({className:t,...r}=e,l[0]=e,l[1]=t,l[2]=r):(t=l[1],r=l[2]),l[3]!==t?(i=(0,k.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),l[3]=t,l[4]=i):i=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(y.Thumb,{"data-slot":"switch-thumb",className:(0,k.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),l[5]=d):d=l[5],l[6]!==r||l[7]!==i?(n=(0,a.jsx)(y.Root,{"data-slot":"switch",className:i,...r,children:d}),l[6]=r,l[7]=i,l[8]=n):n=l[8],n}e.s(["Switch",()=>w],99375)},15288,e=>{"use strict";var a=e.i(43476),s=e.i(932),t=e.i(75157);function r(e){let r,i,d,n,l=(0,s.c)(8);return l[0]!==e?({className:r,...i}=e,l[0]=e,l[1]=r,l[2]=i):(r=l[1],i=l[2]),l[3]!==r?(d=(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),l[3]=r,l[4]=d):d=l[4],l[5]!==i||l[6]!==d?(n=(0,a.jsx)("div",{"data-slot":"card",className:d,...i}),l[5]=i,l[6]=d,l[7]=n):n=l[7],n}function i(e){let r,i,d,n,l=(0,s.c)(8);return l[0]!==e?({className:r,...i}=e,l[0]=e,l[1]=r,l[2]=i):(r=l[1],i=l[2]),l[3]!==r?(d=(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),l[3]=r,l[4]=d):d=l[4],l[5]!==i||l[6]!==d?(n=(0,a.jsx)("div",{"data-slot":"card-header",className:d,...i}),l[5]=i,l[6]=d,l[7]=n):n=l[7],n}function d(e){let r,i,d,n,l=(0,s.c)(8);return l[0]!==e?({className:r,...i}=e,l[0]=e,l[1]=r,l[2]=i):(r=l[1],i=l[2]),l[3]!==r?(d=(0,t.cn)("leading-none font-semibold",r),l[3]=r,l[4]=d):d=l[4],l[5]!==i||l[6]!==d?(n=(0,a.jsx)("div",{"data-slot":"card-title",className:d,...i}),l[5]=i,l[6]=d,l[7]=n):n=l[7],n}function n(e){let r,i,d,n,l=(0,s.c)(8);return l[0]!==e?({className:r,...i}=e,l[0]=e,l[1]=r,l[2]=i):(r=l[1],i=l[2]),l[3]!==r?(d=(0,t.cn)("text-muted-foreground text-sm",r),l[3]=r,l[4]=d):d=l[4],l[5]!==i||l[6]!==d?(n=(0,a.jsx)("div",{"data-slot":"card-description",className:d,...i}),l[5]=i,l[6]=d,l[7]=n):n=l[7],n}function l(e){let r,i,d,n,l=(0,s.c)(8);return l[0]!==e?({className:r,...i}=e,l[0]=e,l[1]=r,l[2]=i):(r=l[1],i=l[2]),l[3]!==r?(d=(0,t.cn)("px-6",r),l[3]=r,l[4]=d):d=l[4],l[5]!==i||l[6]!==d?(n=(0,a.jsx)("div",{"data-slot":"card-content",className:d,...i}),l[5]=i,l[6]=d,l[7]=n):n=l[7],n}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>d])},87486,e=>{"use strict";var a=e.i(43476),s=e.i(932),t=e.i(86011),r=e.i(25913),i=e.i(75157);let d=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let r,n,l,c,o,u,m=(0,s.c)(12);m[0]!==e?({className:r,variant:c,asChild:l,...n}=e,m[0]=e,m[1]=r,m[2]=n,m[3]=l,m[4]=c):(r=m[1],n=m[2],l=m[3],c=m[4]);let h=void 0!==l&&l?t.Slot.Slot:"span";return m[5]!==r||m[6]!==c?(o=(0,i.cn)(d({variant:c}),r),m[5]=r,m[6]=c,m[7]=o):o=m[7],m[8]!==h||m[9]!==n||m[10]!==o?(u=(0,a.jsx)(h,{"data-slot":"badge",className:o,...n}),m[8]=h,m[9]=n,m[10]=o,m[11]=u):u=m[11],u}e.s(["Badge",()=>n])},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},81418,e=>{"use strict";let a=(0,e.i(75254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>a],81418)},39941,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),r=e.i(46696),i=e.i(71689),d=e.i(56909),n=e.i(81418);let l=(0,e.i(75254).default)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var c=e.i(27612),o=e.i(19455),u=e.i(87486),m=e.i(99375),h=e.i(10204),p=e.i(93479),x=e.i(15288),f=e.i(72436);e.i(70272);var v=e.i(36892),b=e.i(65994);let j=["admin","moderator","user"];function g({id:e}){let g=(0,t.useRouter)(),y=(0,b.useAdminT)();function k(e){let a=e?.data?.error?.message;if("string"==typeof a&&a.trim())return a;let s=e?.data?.message;if("string"==typeof s&&s.trim())return s;let t=e?.error;return"string"==typeof t&&t.trim()?t:y("admin.users.detail.errorFallback")}function w(e){return"admin"===e?y("admin.users.detail.roles.admin"):"moderator"===e?y("admin.users.detail.roles.moderator"):y("admin.users.detail.roles.user")}let C=(0,v.useGetUserAdminQuery)({id:e}),[N,S]=(0,v.useUpdateUserAdminMutation)(),[B,L]=(0,v.useSetUserActiveAdminMutation)(),[_,M]=(0,v.useSetUserRolesAdminMutation)(),[T,z]=(0,v.useSetUserPasswordAdminMutation)(),[A,R]=(0,v.useRemoveUserAdminMutation)(),H=C.data,[E,P]=s.useState(""),[U,I]=s.useState(""),[V,D]=s.useState(""),[F,O]=s.useState(""),[K,q]=s.useState(!0),[G,Q]=s.useState([]);s.useEffect(()=>{H&&(P(H.full_name??""),I(H.phone??""),D(H.email??""),q(!!H.is_active),Q(H.roles.length>0?H.roles:["user"]))},[H,e]);let X=C.isFetching||S.isLoading||L.isLoading||M.isLoading||z.isLoading||R.isLoading;async function J(){try{await N({id:e,full_name:E.trim()||null,phone:U.trim()||null,email:V.trim()||void 0}).unwrap(),r.toast.success(y("admin.users.detail.profile.saved")),C.refetch()}catch(e){r.toast.error(k(e))}}async function W(a){try{q(a),await B({id:e,is_active:a}).unwrap(),r.toast.success(a?y("admin.users.detail.status.activated"):y("admin.users.detail.status.deactivated")),C.refetch()}catch(e){q(K),r.toast.error(k(e))}}async function Y(){try{await _({id:e,roles:G}).unwrap(),r.toast.success(y("admin.users.detail.roles.saved")),C.refetch()}catch(e){r.toast.error(k(e))}}async function Z(){let a=F.trim();if(a.length<8)return void r.toast.error(y("admin.users.detail.password.minLengthError"));try{await T({id:e,password:a}).unwrap(),r.toast.success(y("admin.users.detail.password.updated")),O("")}catch(e){r.toast.error(k(e))}}async function $(){if(confirm(y("admin.users.detail.delete.confirm")))try{await A({id:e}).unwrap(),r.toast.success(y("admin.users.detail.delete.deleted")),g.replace("/admin/users"),g.refresh()}catch(e){r.toast.error(k(e))}}if(C.isError)return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(o.Button,{variant:"outline",onClick:()=>g.back(),children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),y("admin.users.detail.backButton")]}),(0,a.jsxs)("div",{className:"rounded-md border p-4 text-sm",children:[y("admin.users.detail.loadError")," ",(0,a.jsx)(o.Button,{variant:"link",className:"px-1",onClick:()=>C.refetch(),children:y("admin.users.detail.retryButton")})]})]});if(!H)return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(o.Button,{variant:"outline",onClick:()=>g.back(),children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),y("admin.users.detail.backButton")]}),(0,a.jsx)("div",{className:"rounded-md border p-4 text-sm text-muted-foreground",children:y("admin.users.detail.loading")})]});let ee=G[0]??"user";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(o.Button,{variant:"outline",onClick:()=>g.back(),disabled:X,children:[(0,a.jsx)(i.ArrowLeft,{className:"mr-2 size-4"}),y("admin.users.detail.backButton")]}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:y("admin.users.detail.title")})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:H.full_name?H.full_name:y("admin.users.detail.unknownUser")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[H.roles.includes("admin")?(0,a.jsx)(u.Badge,{children:y("admin.users.detail.roles.admin")}):(0,a.jsx)(u.Badge,{variant:"secondary",children:y("admin.users.detail.roles.user")}),H.is_active?(0,a.jsx)(u.Badge,{variant:"secondary",children:y("admin.users.detail.statusActive")}):(0,a.jsx)(u.Badge,{variant:"destructive",children:y("admin.users.detail.statusInactive")})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{children:[(0,a.jsx)(x.CardTitle,{className:"text-base",children:y("admin.users.detail.profile.title")}),(0,a.jsx)(x.CardDescription,{children:y("admin.users.detail.profile.description")})]}),(0,a.jsxs)(x.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"email",children:y("admin.users.detail.profile.emailLabel")}),(0,a.jsx)(p.Input,{id:"email",value:V,onChange:e=>D(e.target.value),disabled:X})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"full_name",children:y("admin.users.detail.profile.fullNameLabel")}),(0,a.jsx)(p.Input,{id:"full_name",value:E,onChange:e=>P(e.target.value),disabled:X})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"phone",children:y("admin.users.detail.profile.phoneLabel")}),(0,a.jsx)(p.Input,{id:"phone",value:U,onChange:e=>I(e.target.value),disabled:X})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(o.Button,{onClick:J,disabled:X,children:[(0,a.jsx)(d.Save,{className:"mr-2 size-4"}),y("admin.users.detail.profile.saveButton")]})}),(0,a.jsx)(f.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium",children:y("admin.users.detail.status.title")}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:y("admin.users.detail.status.description")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Label,{className:"text-sm text-muted-foreground",children:K?y("admin.users.detail.status.active"):y("admin.users.detail.status.inactive")}),(0,a.jsx)(m.Switch,{checked:K,onCheckedChange:W,disabled:X})]})]})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{children:[(0,a.jsx)(x.CardTitle,{className:"text-base",children:y("admin.users.detail.roles.title")}),(0,a.jsx)(x.CardDescription,{children:y("admin.users.detail.roles.description")})]}),(0,a.jsxs)(x.CardContent,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>{let s=ee===e;return(0,a.jsxs)(o.Button,{type:"button",variant:s?"default":"outline",onClick:()=>{Q([e])},disabled:X,children:[(0,a.jsx)(n.ShieldCheck,{className:"mr-2 size-4"}),w(e)]},e)})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[y("admin.users.detail.roles.currentRole")," ",(0,a.jsx)(u.Badge,{className:"ml-1",variant:"admin"===ee?"default":"secondary",children:w(ee)})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(o.Button,{onClick:Y,disabled:X,children:[(0,a.jsx)(d.Save,{className:"mr-2 size-4"}),y("admin.users.detail.roles.saveButton")]})})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{children:[(0,a.jsx)(x.CardTitle,{className:"text-base",children:y("admin.users.detail.password.title")}),(0,a.jsx)(x.CardDescription,{children:y("admin.users.detail.password.description")})]}),(0,a.jsxs)(x.CardContent,{className:"space-y-3",children:[(0,a.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"password",children:y("admin.users.detail.password.label")}),(0,a.jsx)(p.Input,{id:"password",type:"password",placeholder:y("admin.users.detail.password.placeholder"),value:F,onChange:e=>O(e.target.value),disabled:X})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(o.Button,{onClick:Z,disabled:X,children:[(0,a.jsx)(l,{className:"mr-2 size-4"}),y("admin.users.detail.password.updateButton")]})})]})]}),(0,a.jsxs)(x.Card,{className:"border-destructive/40",children:[(0,a.jsxs)(x.CardHeader,{children:[(0,a.jsx)(x.CardTitle,{className:"text-base",children:y("admin.users.detail.delete.title")}),(0,a.jsx)(x.CardDescription,{children:y("admin.users.detail.delete.description")})]}),(0,a.jsx)(x.CardContent,{className:"flex justify-end",children:(0,a.jsxs)(o.Button,{variant:"destructive",onClick:$,disabled:X,children:[(0,a.jsx)(c.Trash2,{className:"mr-2 size-4"}),y("admin.users.detail.delete.button")]})})]})]})}e.s(["default",()=>g],39941)}]);