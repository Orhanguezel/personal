(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(75157);function l(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("div",{"data-slot":"card",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}function i(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("div",{"data-slot":"card-header",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}function s(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("leading-none font-semibold",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("div",{"data-slot":"card-title",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}function n(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("text-muted-foreground text-sm",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("div",{"data-slot":"card-description",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}function d(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("px-6",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("div",{"data-slot":"card-content",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}e.s(["Card",()=>l,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>s])},87486,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(86011),l=e.i(25913),i=e.i(75157);let s=(0,l.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let l,n,d,o,c,u,m=(0,a.c)(12);m[0]!==e?({className:l,variant:o,asChild:d,...n}=e,m[0]=e,m[1]=l,m[2]=n,m[3]=d,m[4]=o):(l=m[1],n=m[2],d=m[3],o=m[4]);let g=void 0!==d&&d?r.Slot.Slot:"span";return m[5]!==l||m[6]!==o?(c=(0,i.cn)(s({variant:o}),l),m[5]=l,m[6]=o,m[7]=c):c=m[7],m[8]!==g||m[9]!==n||m[10]!==c?(u=(0,t.jsx)(g,{"data-slot":"badge",className:c,...n}),m[8]=g,m[9]=n,m[10]=c,m[11]=u):u=m[11],u}e.s(["Badge",()=>n])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},5861,e=>{"use strict";var t=e.i(932);e.i(70272);var a=e.i(14321);let r=e=>String(e||"").trim().toLowerCase().replace("_","-").split("-")[0].trim();function l(){let e,l,u,m,g,x,h,p,f,b=(0,t.c)(22);b[0]===Symbol.for("react.memo_cache_sentinel")?(e={keys:["app_locales","default_locale"]},b[0]=e):e=b[0];let{data:v,isLoading:y,isFetching:j}=(0,a.useListSiteSettingsAdminQuery)(e);if(b[1]!==v){let e=v??[],t=e.find(c),a=e.find(o),x=function(e){let t=new Set,a=[];for(let l of e){let e=r(l?.code);e&&(t.has(e)||(t.add(e),a.push({...l,code:e})))}return a}((function e(t){if(!t)return[];if(Array.isArray(t))return t.map(e=>({code:r(e?.code??e),label:"string"==typeof e?.label?e.label:void 0,is_active:e?.is_active,is_default:e?.is_default})).filter(e=>!!e.code);if("string"==typeof t){let a=t.trim();if(!a)return[];try{let t=JSON.parse(a);return e(t)}catch{return[]}}return"object"==typeof t&&null!==t&&Array.isArray(t.locales)?e(t.locales):[]})(t?.value).filter(d));if(l=x.map(n).filter(Boolean),!(u=r(a?.value))){let e=x.find(s);u=e?r(e.code):""}u&&!l.includes(u)&&(u=l[0]??""),m=x.map(i),g=new Set(l),b[1]=v,b[2]=l,b[3]=u,b[4]=m,b[5]=g}else l=b[2],u=b[3],m=b[4],g=b[5];let k=g;b[6]!==k?(x=e=>{let t=r(e);return!!t&&k.has(t)},b[6]=k,b[7]=x):x=b[7];let _=x;b[8]!==l||b[9]!==u||b[10]!==k?(h=(e,t)=>{let a=r(e);if(a&&k.has(a))return a;let i=r(t);return i&&k.has(i)?i:u&&k.has(u)?u:l[0]??""},b[8]=l,b[9]=u,b[10]=k,b[11]=h):h=b[11];let N=h;b[12]!==l||b[13]!==N||b[14]!==u||b[15]!==_||b[16]!==m?(p={localeOptions:m,defaultLocaleFromDb:u,activeLocaleCodes:l,hasLocale:_,coerceLocale:N},b[12]=l,b[13]=N,b[14]=u,b[15]=_,b[16]=m,b[17]=p):p=b[17];let w=p;return b[18]!==w||b[19]!==j||b[20]!==y?(f={...w,loading:y,fetching:j},b[18]=w,b[19]=j,b[20]=y,b[21]=f):f=b[21],f}function i(e){return{value:r(e.code),label:function(e){let t=r(e.code),a=String(e.label||"").trim();if(a)return`${a} (${t})`;let l=null;try{l=new Intl.DisplayNames(["de"],{type:"language"})}catch{l=null}let i=l?.of(t)??"";return i?`${i} (${t})`:`${t.toUpperCase()} (${t})`}(e)}}function s(e){return!0===e.is_default}function n(e){return r(e.code)}function d(e){return e&&e.code&&!1!==e.is_active}function o(e){return"default_locale"===e.key}function c(e){return"app_locales"===e.key}e.s(["useAdminLocales",()=>l])},31278,e=>{"use strict";var t=e.i(17521);e.s(["Loader2",()=>t.default])},83683,e=>{"use strict";var t=e.i(43476),a=e.i(932);let r=(0,e.i(75254).default)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var l=e.i(31278),i=e.i(10204),s=e.i(87486),n=e.i(67489);let d=e=>String(e??"").trim();function o(e){return!!e.value}function c(e){return(0,t.jsx)(n.SelectItem,{value:e.value,children:e.label},`${e.value}:${e.label}`)}e.s(["AdminLocaleSelect",0,e=>{let u,m,g,x,h,p,f,b,v,y,j,k,_,N,w=(0,a.c)(41),{value:S,onChange:C,options:M,loading:z,disabled:L,label:T,allowEmpty:A,emptySentinel:D}=e,H=void 0!==z&&z,R=void 0===T?"Dil":T,B=void 0===A||A,$=void 0===D?"__all__":D,I=Array.isArray(M)&&M.length>0,G=void 0!==L&&L||H||!I;w[0]!==B||w[1]!==$?(u=e=>{let t=d(e);return B&&""===t?$:t},w[0]=B,w[1]=$,w[2]=u):u=w[2];let U=u;w[3]!==B||w[4]!==$?(m=e=>{let t=d(e);return B&&t===$?"":t},w[3]=B,w[4]=$,w[5]=m):m=w[5];let O=m;w[6]!==U||w[7]!==S?(g=U(d(S)),w[6]=U,w[7]=S,w[8]=g):g=w[8];let V=g;if(w[9]!==U||w[10]!==M){let e,t=Array.isArray(M)?M:[];w[12]!==U?(e=e=>({value:U(d(e.value).toLowerCase()),raw:d(e.value).toLowerCase(),label:e.label?d(e.label):d(e.value).toLowerCase().toUpperCase()}),w[12]=U,w[13]=e):e=w[13],x=t.map(e).filter(o),w[9]=U,w[10]=M,w[11]=x}else x=w[11];let E=x;return w[14]!==R?(h=(0,t.jsx)(i.Label,{className:"text-sm",children:R}),w[14]=R,w[15]=h):h=w[15],w[16]!==H?(p=H?(0,t.jsxs)(s.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(l.Loader2,{className:"size-3.5 animate-spin"}),"Yükleniyor"]}):(0,t.jsxs)(s.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(r,{className:"size-3.5"}),"Locale"]}),w[16]=H,w[17]=p):p=w[17],w[18]!==h||w[19]!==p?(f=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[h,p]}),w[18]=h,w[19]=p,w[20]=f):f=w[20],w[21]!==O||w[22]!==C?(b=e=>C(O(e)),w[21]=O,w[22]=C,w[23]=b):b=w[23],w[24]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:"Locale seç"})}),w[24]=v):v=w[24],w[25]!==E?(y=E.map(c),w[25]=E,w[26]=y):y=w[26],w[27]!==y?(j=(0,t.jsx)(n.SelectContent,{children:y}),w[27]=y,w[28]=j):j=w[28],w[29]!==G||w[30]!==b||w[31]!==j||w[32]!==V?(k=(0,t.jsxs)(n.Select,{value:V,onValueChange:b,disabled:G,children:[v,j]}),w[29]=G,w[30]=b,w[31]=j,w[32]=V,w[33]=k):k=w[33],w[34]!==I||w[35]!==H?(_=I||H?null:(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Locale seçenekleri bulunamadı."}),w[34]=I,w[35]=H,w[36]=_):_=w[36],w[37]!==f||w[38]!==k||w[39]!==_?(N=(0,t.jsxs)("div",{className:"space-y-2",children:[f,k,_]}),w[37]=f,w[38]=k,w[39]=_,w[40]=N):N=w[40],N}],83683)},31658,e=>{"use strict";var t=e.i(19929);function a(e){let a=String(e??"").trim();return a&&(0,t.normLocaleTag)(a)||""}function r(e,t="de"){return a(e)||t}e.s(["localeShortClient",()=>a,"localeShortClientOr",()=>r])},20995,e=>{"use strict";var t=e.i(31658);function a(e,r,l="de"){let i=Array.isArray(e)?e:[],s=new Set(i.map(e=>(0,t.localeShortClient)(e?.value)).filter(Boolean)),n=(0,t.localeShortClient)(r);if(n&&s.has(n))return n;let d=(0,t.localeShortClient)(i[0]?.value);return d&&s.has(d)?d:(0,t.localeShortClientOr)(l,l)}e.s(["resolveAdminApiLocale",()=>a])},24687,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(75157);function l(e){let l,i,s,n,d=(0,a.c)(8);return d[0]!==e?({className:l,...i}=e,d[0]=e,d[1]=l,d[2]=i):(l=d[1],i=d[2]),d[3]!==l?(s=(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),d[3]=l,d[4]=s):s=d[4],d[5]!==i||d[6]!==s?(n=(0,t.jsx)("textarea",{"data-slot":"textarea",className:s,...i}),d[5]=i,d[6]=s,d[7]=n):n=d[7],n}e.s(["Textarea",()=>l])},80352,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let r=(0,e.i(75254).default)("braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);var l=e.i(75157),i=e.i(10204),s=e.i(24687),n=e.i(87486);let d=e=>{try{return JSON.stringify(e??{},null,2)}catch{return""}};e.s(["AdminJsonEditor",0,({label:e,value:o,onChange:c,onErrorChange:u,disabled:m,helperText:g,height:x=260})=>{let[h,p]=(0,a.useState)(()=>d(o)),[f,b]=(0,a.useState)(null);return(0,a.useEffect)(()=>{p(d(o))},[o]),(0,t.jsxs)("div",{className:"space-y-2",children:[e?(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(i.Label,{className:"text-sm",children:e}),(0,t.jsxs)(n.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(r,{className:"size-3.5"}),"JSON editor"]})]}):null,(0,t.jsx)(s.Textarea,{value:h,onChange:e=>p(e.target.value),onBlur:()=>{if(!h.trim()){c({}),b(null),u?.(null);return}try{let e=JSON.parse(h);c(e),b(null),u?.(null)}catch(t){let e=t?.message?String(t.message):"Geçersiz JSON";b(e),u?.(e)}},disabled:m,spellCheck:!1,className:(0,l.cn)("font-mono text-xs leading-5",f&&"border-destructive focus-visible:ring-destructive"),style:{minHeight:x,whiteSpace:"pre",fontFamily:"SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"}}),g&&!f?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:g}):null,f?(0,t.jsxs)("div",{className:"text-xs text-destructive",children:["JSON hatası: ",(0,t.jsx)("span",{className:"font-medium",children:f})]}):null]})}],80352)},77572,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(71645),l=e.i(81140),i=e.i(30030),s=e.i(42727),n=e.i(96626),d=e.i(48425),o=e.i(86318),c=e.i(69340),u=e.i(10772),m="Tabs",[g,x]=(0,i.createContextScope)(m,[s.createRovingFocusGroupScope]),h=(0,s.createRovingFocusGroupScope)(),[p,f]=g(m),b=r.forwardRef((e,a)=>{let{__scopeTabs:r,value:l,onValueChange:i,defaultValue:s,orientation:n="horizontal",dir:g,activationMode:x="automatic",...h}=e,f=(0,o.useDirection)(g),[b,v]=(0,c.useControllableState)({prop:l,onChange:i,defaultProp:s??"",caller:m});return(0,t.jsx)(p,{scope:r,baseId:(0,u.useId)(),value:b,onValueChange:v,orientation:n,dir:f,activationMode:x,children:(0,t.jsx)(d.Primitive.div,{dir:f,"data-orientation":n,...h,ref:a})})});b.displayName=m;var v="TabsList",y=r.forwardRef((e,a)=>{let{__scopeTabs:r,loop:l=!0,...i}=e,n=f(v,r),o=h(r);return(0,t.jsx)(s.Root,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:l,children:(0,t.jsx)(d.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:a})})});y.displayName=v;var j="TabsTrigger",k=r.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...o}=e,c=f(j,r),u=h(r),m=w(c.baseId,i),g=S(c.baseId,i),x=i===c.value;return(0,t.jsx)(s.Item,{asChild:!0,...u,focusable:!n,active:x,children:(0,t.jsx)(d.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":g,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...o,ref:a,onMouseDown:(0,l.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,l.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,l.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||n||!e||c.onValueChange(i)})})})});k.displayName=j;var _="TabsContent",N=r.forwardRef((e,a)=>{let{__scopeTabs:l,value:i,forceMount:s,children:o,...c}=e,u=f(_,l),m=w(u.baseId,i),g=S(u.baseId,i),x=i===u.value,h=r.useRef(x);return r.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:s||x,children:({present:r})=>(0,t.jsx)(d.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!r,id:g,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:h.current?"0s":void 0},children:r&&o})})});function w(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}N.displayName=_,e.s(["Content",()=>N,"List",()=>y,"Root",()=>b,"Tabs",()=>b,"TabsContent",()=>N,"TabsList",()=>y,"TabsTrigger",()=>k,"Trigger",()=>k,"createTabsScope",()=>x],26209);var C=e.i(26209),C=C,M=e.i(75157);function z(e){let r,l,i,s,n=(0,a.c)(8);return n[0]!==e?({className:r,...l}=e,n[0]=e,n[1]=r,n[2]=l):(r=n[1],l=n[2]),n[3]!==r?(i=(0,M.cn)("flex flex-col gap-2",r),n[3]=r,n[4]=i):i=n[4],n[5]!==l||n[6]!==i?(s=(0,t.jsx)(C.Root,{"data-slot":"tabs",className:i,...l}),n[5]=l,n[6]=i,n[7]=s):s=n[7],s}function L(e){let r,l,i,s,n=(0,a.c)(8);return n[0]!==e?({className:r,...l}=e,n[0]=e,n[1]=r,n[2]=l):(r=n[1],l=n[2]),n[3]!==r?(i=(0,M.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-0.75",r),n[3]=r,n[4]=i):i=n[4],n[5]!==l||n[6]!==i?(s=(0,t.jsx)(C.List,{"data-slot":"tabs-list",className:i,...l}),n[5]=l,n[6]=i,n[7]=s):s=n[7],s}function T(e){let r,l,i,s,n=(0,a.c)(8);return n[0]!==e?({className:r,...l}=e,n[0]=e,n[1]=r,n[2]=l):(r=n[1],l=n[2]),n[3]!==r?(i=(0,M.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),n[3]=r,n[4]=i):i=n[4],n[5]!==l||n[6]!==i?(s=(0,t.jsx)(C.Trigger,{"data-slot":"tabs-trigger",className:i,...l}),n[5]=l,n[6]=i,n[7]=s):s=n[7],s}function A(e){let r,l,i,s,n=(0,a.c)(8);return n[0]!==e?({className:r,...l}=e,n[0]=e,n[1]=r,n[2]=l):(r=n[1],l=n[2]),n[3]!==r?(i=(0,M.cn)("flex-1 outline-none",r),n[3]=r,n[4]=i):i=n[4],n[5]!==l||n[6]!==i?(s=(0,t.jsx)(C.Content,{"data-slot":"tabs-content",className:i,...l}),n[5]=l,n[6]=i,n[7]=s):s=n[7],s}e.s(["Tabs",()=>z,"TabsContent",()=>A,"TabsList",()=>L,"TabsTrigger",()=>T],77572)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},1695,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(71645),l=e.i(46696),i=e.i(75254);let s=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),n=(0,i.default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var d=e.i(69074),o=e.i(70273),c=e.i(27612);e.i(70272);var u=e.i(96865),m=e.i(75157),g=e.i(19455),x=e.i(87486),h=e.i(15288),p=e.i(10204),f=e.i(93479),b=e.i(48425),v=r.forwardRef((e,a)=>{let{ratio:r=1,style:l,...i}=e;return(0,t.jsx)("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/r}%`},"data-radix-aspect-ratio-wrapper":"",children:(0,t.jsx)(b.Primitive.div,{...i,ref:a,style:{...l,position:"absolute",top:0,right:0,bottom:0,left:0}})})});v.displayName="AspectRatio",e.s(["AspectRatio",()=>v,"Root",()=>v],85959);var y=e.i(85959),y=y;function j(e){let r,l,i=(0,a.c)(4);return i[0]!==e?({...r}=e,i[0]=e,i[1]=r):r=i[1],i[2]!==r?(l=(0,t.jsx)(y.Root,{"data-slot":"aspect-ratio",...r}),i[2]=r,i[3]=l):l=i[3],l}let k=e=>String(e??"").trim(),_=e=>{let t=k(e);if(!t)return!1;let a=t.toLowerCase();return!!(a.split("?")[0].split("#")[0].endsWith(".svg")||a.startsWith("data:image/svg+xml")||a.includes("format=svg")||a.includes("f_svg"))},N=e=>{let t=k(e);if(!t)return"";if(!_(t)||t.startsWith("data:image/svg+xml")||!t.includes("res.cloudinary.com")||t.includes("/raw/upload/")||t.includes("fl_sanitize"))return t;let a="/upload/",r=t.indexOf(a);if(r<0)return t;let l=t.slice(0,r+a.length),i=t.slice(r+a.length),s=i.split("/")[0]||"",n=i.slice(s.length);return s.startsWith("v")?`${l}fl_sanitize/${i}`:`${l}${s},fl_sanitize${n}`},w=e=>{let r,i,n,d,o,c,u,m,x=(0,a.c)(16),{url:h,disabled:p}=e;if(x[0]!==h){n=Symbol.for("react.early_return_sentinel");e:{if(!(r=k(h))){n=null;break e}i=((e,t=72)=>{let a=k(e);if(!a)return"";if(a.length<=t)return a;try{let e=new URL(a),r=e.host,l=(e.pathname||"").split("/").filter(Boolean).pop()||"",i=`${r}/…/${l}`;if(i.length<=t)return i}catch{}let r=a.slice(0,Math.max(18,Math.floor(.55*t))),l=a.slice(-Math.max(12,Math.floor(.25*t)));return`${r}…${l}`})(r,80)}x[0]=h,x[1]=r,x[2]=i,x[3]=n}else r=x[1],i=x[2],n=x[3];if(n!==Symbol.for("react.early_return_sentinel"))return n;let f=i;x[4]!==r?(d=async()=>{try{await navigator.clipboard.writeText(r),l.toast.success("URL kopyalandı.")}catch{l.toast.error("Kopyalanamadı.")}},x[4]=r,x[5]=d):d=x[5];let b=d;return x[6]!==r||x[7]!==f?(o=(0,t.jsx)("div",{className:"min-w-0 flex-1",children:(0,t.jsx)("div",{className:"truncate text-xs text-muted-foreground",title:r,children:f})}),x[6]=r,x[7]=f,x[8]=o):o=x[8],x[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(s,{className:"mr-2 size-4"}),x[9]=c):c=x[9],x[10]!==b||x[11]!==p?(u=(0,t.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:b,disabled:p,title:"Kopyala",children:[c,"Kopyala"]}),x[10]=b,x[11]=p,x[12]=u):u=x[12],x[13]!==o||x[14]!==u?(m=(0,t.jsxs)("div",{className:"mt-2 flex min-w-0 items-center gap-2",children:[o,u]}),x[13]=o,x[14]=u,x[15]=m):m=x[15],m};e.s(["AdminImageUploadField",0,({label:e="Görsel",helperText:a,bucket:i="public",folder:s="uploads",metadata:b,value:v,onChange:y,values:S,onChangeMultiple:C,onSelectAsCover:M,coverValue:z,disabled:L,openLibraryHref:T,onOpenLibraryClick:A,multiple:D=!1,previewAspect:H="16x9",previewObjectFit:R="cover"})=>{let B=(0,r.useRef)(null),[$,{isLoading:I}]=(0,u.useCreateAssetAdminMutation)(),G=(0,r.useMemo)(()=>(e=>{if(e)return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,String(t)]))})(b),[b]),U=(0,r.useMemo)(()=>Array.isArray(S)?S.map(k).filter(Boolean):[],[S]),O=!!L||I,V=async e=>{let t=Array.from(e.target.files??[]);if(e.target.value="",!t.length)return;if(!D){let e=t[0];try{let t=await $({file:e,bucket:i,folder:s,metadata:G}).unwrap(),a=k(t?.url);if(!a)throw Error("Görsel URL'i alınamadı.");y?.(a),l.toast.success("Görsel yüklendi.")}catch(e){l.toast.error(e?.data?.error?.message||e?.message||"Görsel yüklenirken hata oluştu.")}return}let a=[],r=0;for(let e of t)try{let t=await $({file:e,bucket:i,folder:s,metadata:G}).unwrap(),l=k(t?.url);l&&(a.push(l),r+=1)}catch(e){l.toast.error(e?.data?.error?.message||e?.message||"Bazı görseller yüklenirken hata oluştu.")}r>0&&(C?C(((e,t)=>{let a=new Set(e.map(e=>k(e))),r=[...e];for(let e of t){let t=k(e);t&&!a.has(t)&&(a.add(t),r.push(t))}return r})(U,a)):y?.(a[0]),l.toast.success(1===r?"Görsel yüklendi.":`${r} g\xf6rsel y\xfcklendi.`))},E="4x3"===H?4/3:"1x1"===H?1:16/9;return(0,t.jsxs)(h.Card,{children:[(0,t.jsx)(h.CardHeader,{className:"space-y-1 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:e}),a?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:a}):null]}),I?(0,t.jsx)(x.Badge,{variant:"secondary",children:"Yükleniyor…"}):null]})}),(0,t.jsxs)(h.CardContent,{className:"space-y-3",children:[(0,t.jsx)(p.Label,{className:"sr-only",children:"Upload"}),(0,t.jsx)(f.Input,{ref:B,type:"file",accept:"image/*",multiple:!!D,className:"hidden",onChange:V,disabled:O}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)(g.Button,{type:"button",variant:"outline",onClick:()=>{O||B.current?.click()},disabled:O,children:[(0,t.jsx)(d.Upload,{className:"mr-2 size-4"}),D?"Görseller Yükle":"Görsel Yükle"]}),T||A?(0,t.jsx)(g.Button,{asChild:!0,variant:"ghost",size:"sm",disabled:O&&!A,children:(0,t.jsxs)("a",{href:T||"#",onClick:e=>{A&&(e.preventDefault(),A())},children:[(0,t.jsx)(n,{className:"mr-2 size-4"}),"Kütüphaneyi aç"]})}):null]}),D?(0,t.jsx)(()=>U.length?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Galeri"}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:U.map((e,a)=>{let r=!!z&&k(z)===e,i=_(e),s=i?N(e):e;return(0,t.jsx)("div",{className:(0,m.cn)("rounded-md border p-2",r&&"border-primary"),children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-35 shrink-0",children:(0,t.jsx)("div",{className:"overflow-hidden rounded-md border bg-background",children:(0,t.jsx)(j,{ratio:16/9,children:i?(0,t.jsx)("object",{data:s,type:"image/svg+xml",className:"h-full w-full","aria-label":`SVG image ${a+1}`,children:(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:"SVG yüklenemedi."})}):(0,t.jsx)("div",{className:"relative h-full w-full",children:(0,t.jsx)("img",{src:s,alt:`image-${a+1}`,className:"h-full w-full object-cover",onError:e=>{let t=e.currentTarget;t.style.display="none";let a=t.parentElement;if(a&&!a.querySelector(".error-placeholder")){let e=document.createElement("div");e.className="error-placeholder absolute inset-0 flex items-center justify-center bg-muted/50",e.innerHTML=`
                                    <svg class="size-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                  `,a.appendChild(e)}}})})})})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium",title:e,children:r?"Kapak":`G\xf6rsel ${a+1}`}),r?(0,t.jsx)(x.Badge,{variant:"secondary",className:"mt-1",children:"Kapak"}):null]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[M?(0,t.jsxs)(g.Button,{type:"button",variant:r?"default":"outline",size:"sm",disabled:O,onClick:()=>M(e),title:"Kapak yap",children:[(0,t.jsx)(o.Star,{className:"mr-2 size-4"}),"Kapak"]}):null,(0,t.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",disabled:O||!C||r,onClick:()=>(e=>{if(!C)return;let t=U[e];z&&k(z)===t?l.toast.error("Kapak görseli silinemez. Önce başka bir kapak seç."):C(U.filter((t,a)=>a!==e))})(a),title:r?"Kapak silinemez":"Sil",children:[(0,t.jsx)(c.Trash2,{className:"mr-2 size-4"}),"Sil"]})]})]}),(0,t.jsx)(w,{url:e,disabled:O}),C?null:(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Not: ",(0,t.jsx)("code",{children:"onChangeMultiple"})," verilmediği için galeri parent tarafından yönetilmiyor."]})]})]})},`${e}-${a}`)})})]}):(0,t.jsx)("div",{className:"rounded-md border bg-muted/20 p-3 text-center text-sm text-muted-foreground",children:"Henüz galeri görseli yok."}),{}):(0,t.jsx)(()=>{if(!v)return(0,t.jsx)("div",{className:"rounded-md border bg-muted/20 p-3 text-center text-sm text-muted-foreground",children:"Henüz görsel seçilmedi."});let e=_(v),a=e?N(v):v;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Önizleme"}),(0,t.jsx)("div",{className:"overflow-hidden rounded-md border bg-background",children:(0,t.jsx)(j,{ratio:E,children:e?(0,t.jsx)("object",{data:a,type:"image/svg+xml",className:"h-full w-full","aria-label":"SVG preview",children:(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:"SVG önizleme açılamadı."})}):(0,t.jsx)("div",{className:"relative h-full w-full",children:(0,t.jsx)("img",{src:a,alt:"Görsel",className:"h-full w-full",style:{objectFit:R},onError:e=>{let t=e.currentTarget;t.style.display="none";let a=t.parentElement;if(a&&!a.querySelector(".error-placeholder")){let e=document.createElement("div");e.className="error-placeholder absolute inset-0 flex flex-col items-center justify-center gap-2 bg-muted/50",e.innerHTML=`
                        <svg class="size-12 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span class="text-xs text-muted-foreground">G\xf6rsel y\xfcklenemedi</span>
                      `,a.appendChild(e)}}})})})}),(0,t.jsxs)("div",{className:"rounded-md border bg-muted/50 p-2",children:[(0,t.jsx)("div",{className:"mb-1 text-xs font-medium text-muted-foreground",children:"URL:"}),(0,t.jsx)("code",{className:"block wrap-break-word text-xs font-mono leading-relaxed text-foreground",children:v})]}),(0,t.jsx)(w,{url:v,disabled:O})]})},{})]})]})}],1695)},97625,e=>{"use strict";let t=(0,e.i(75254).default)("code-xml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);e.s(["Code2",()=>t],97625)},73708,e=>{"use strict";let t=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],73708)},5228,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75254);let l=(0,r.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),i=(0,r.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),s=(0,r.default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),n=(0,r.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),d=(0,r.default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),o=(0,r.default)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),c=(0,r.default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),u=(0,r.default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),m=(0,r.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),g=(0,r.default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);var x=e.i(73708),h=e.i(97625);let p=(0,r.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=e.i(75157),b=e.i(19455),v=e.i(10204),y=e.i(24687),j=e.i(15288),k=e.i(77572),_=e.i(87486);let N="260px";function w(e){if(!e)return"";let t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t);if(e&&"string"==typeof e.html)return e.html}catch{}return e}function S(e){let t=window.getSelection();if(!t||0===t.rangeCount)return;let a=t.getRangeAt(0);a.deleteContents();let r=document.createElement("div");r.innerHTML=e;let l=document.createDocumentFragment(),i=null;for(;r.firstChild;)i=r.firstChild,l.appendChild(r.firstChild);if(a.insertNode(l),i){let e=document.createRange();e.setStartAfter(i),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}}e.s(["default",0,({label:e="İçerik",value:r,onChange:C,disabled:M=!1,height:z=N,onUploadImage:L})=>{let T=(0,a.useRef)(null),A=(0,a.useRef)(null),[D,H]=(0,a.useState)("visual"),[R,B]=(0,a.useState)(w(r));(0,a.useEffect)(()=>{let e=w(r);B(e),T.current&&"visual"===D&&T.current.innerHTML!==e&&(T.current.innerHTML=e||""),"string"==typeof r&&r.trim().startsWith("{")&&r.trim().endsWith("}")&&e!==r&&C(e)},[r]),(0,a.useEffect)(()=>{"visual"===D&&T.current&&T.current.innerHTML!==R&&(T.current.innerHTML=R||"")},[D,R]);let $=e=>{B(e),C(e)},I=()=>T.current?.focus(),G=(e,t)=>{if(!M&&"u">typeof document){I();try{document.execCommand(e,!1,t),T.current&&$(T.current.innerHTML)}catch{}}},U=async()=>{if(!M){if(L&&A.current)return void A.current.click();{let e=window.prompt("Resim URL'si girin:");if(e&&e.trim()){let t=e.trim(),a=`<img src="${t}" alt="" style="max-width:100%; height:auto;" />`;I(),S(a),T.current&&$(T.current.innerHTML)}}}},O=async e=>{if(!L)return;let t=e.target.files?.[0];if(e.target.value="",t)try{let e=await L(t);if(!e)return;let a=t.name.replace(/"/g,"&quot;"),r=`<img src="${e}" alt="${a}" style="max-width:100%; height:auto;" />`;I(),S(r),T.current&&$(T.current.innerHTML)}catch{}},V=e=>(0,t.jsx)(b.Button,{type:"button",variant:"outline",size:"sm",...e});return(0,t.jsxs)(j.Card,{children:[(0,t.jsx)(j.CardHeader,{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(v.Label,{className:"text-sm",children:e}),(0,t.jsxs)(_.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(p,{className:"size-3.5"}),"Live preview"]})]})}),(0,t.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,t.jsxs)(k.Tabs,{value:D,onValueChange:e=>H(e),children:[(0,t.jsxs)(k.TabsList,{className:"w-fit",children:[(0,t.jsx)(k.TabsTrigger,{value:"visual",disabled:M,children:"Görsel editör"}),(0,t.jsx)(k.TabsTrigger,{value:"source",disabled:M,children:"Kaynak (HTML)"})]}),(0,t.jsxs)("div",{className:"mt-3 rounded-md border",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 border-b bg-muted/30 p-2",children:[(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("bold")),disabled:M||"visual"!==D,title:"Kalın",children:(0,t.jsx)(l,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("italic")),disabled:M||"visual"!==D,title:"İtalik",children:(0,t.jsx)(i,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("underline")),disabled:M||"visual"!==D,title:"Altı çizili",children:(0,t.jsx)(s,{className:"size-4"})}),(0,t.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("formatBlock","<p>")),disabled:M||"visual"!==D,title:"Paragraf",children:(0,t.jsx)(m,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("formatBlock","<h2>")),disabled:M||"visual"!==D,title:"Başlık (H2)",children:(0,t.jsx)(c,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("formatBlock","<h3>")),disabled:M||"visual"!==D,title:"Alt başlık (H3)",children:(0,t.jsx)(u,{className:"size-4"})}),(0,t.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("insertUnorderedList")),disabled:M||"visual"!==D,title:"Madde işaretli liste",children:(0,t.jsx)(n,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("insertOrderedList")),disabled:M||"visual"!==D,title:"Numaralı liste",children:(0,t.jsx)(d,{className:"size-4"})}),(0,t.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),I(),void(S(`
      <table style="width:100%; border-collapse:collapse;" border="1">
        <thead>
          <tr>
            <th style="padding:8px; text-align:left;">Başlık 1</th>
            <th style="padding:8px; text-align:left;">Başlık 2</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:8px;">H\xfccre 1</td>
            <td style="padding:8px;">H\xfccre 2</td>
          </tr>
        </tbody>
      </table>
      <p></p>
    `.trim()),T.current&&$(T.current.innerHTML))),disabled:M||"visual"!==D,title:"Tablo ekle",children:(0,t.jsx)(g,{className:"size-4"})}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),void U()),disabled:M||"visual"!==D,title:L?"Resim yükle ve ekle":"Resim URL'si ile ekle",children:(0,t.jsx)(x.Image,{className:"size-4"})}),(0,t.jsx)("span",{className:"mx-1 h-5 w-px bg-border"}),(0,t.jsx)(V,{onMouseDown:e=>(e.preventDefault(),G("removeFormat")),disabled:M||"visual"!==D,title:"Biçimlendirmeyi temizle",children:(0,t.jsx)(o,{className:"size-4"})}),L?(0,t.jsx)("input",{ref:A,type:"file",accept:"image/*",className:"hidden",onChange:O}):null]}),(0,t.jsx)(k.TabsContent,{value:"visual",className:"m-0",children:(0,t.jsx)("div",{ref:T,className:(0,f.cn)("px-3 py-2 text-sm outline-none",M?"cursor-not-allowed bg-muted/20":"bg-background"),style:{minHeight:z,maxHeight:"600px",overflowY:"auto"},contentEditable:!M,onInput:e=>{M||$(e.currentTarget.innerHTML)},suppressContentEditableWarning:!0})}),(0,t.jsx)(k.TabsContent,{value:"source",className:"m-0",children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(h.Code2,{className:"size-4"}),"HTML kaynak"]}),(0,t.jsx)(y.Textarea,{value:R,onChange:e=>$(e.target.value),disabled:M,className:"font-mono text-xs leading-5",style:{height:z,maxHeight:"600px",resize:"vertical"},placeholder:"<p>HTML içeriği buraya yaz...</p>"})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Önizleme"}),(0,t.jsx)("div",{className:"rounded-md border bg-background p-3",children:R&&R.trim()?(0,t.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:R}}):(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Henüz içerik yok. Yazdıkça burada anlık olarak gözükecek."})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Not: Görsel editör ",(0,t.jsx)("code",{children:"execCommand"})," tabanlıdır; tarayıcı davranışları farklılık gösterebilir."]})]})]})]})}],5228)},99489,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),l=e.i(46696),i=e.i(5861),s=e.i(20995),n=e.i(31658);e.i(70272);var d=e.i(59600),o=e.i(80352),c=e.i(83683),u=e.i(932),m=e.i(5228);let g=e=>{let a,r,l,i,s,n,d,o,c,g,x,h,p,f,b,v,y,j,k=(0,u.c)(48),{values:_,disabled:N,slugTouched:w,setSlugTouched:S,setValues:C,handleChange:M,handleCheckboxChange:z}=e,L=_.is_published;k[0]!==z?(a=z("is_published"),k[0]=z,k[1]=a):a=k[1],k[2]!==N||k[3]!==a||k[4]!==_.is_published?(r=(0,t.jsx)("input",{id:"is_published",type:"checkbox",className:"h-4 w-4",checked:L,onChange:a,disabled:N}),k[2]=N,k[3]=a,k[4]=_.is_published,k[5]=r):r=k[5],k[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("span",{children:"Yayında olsun"}),k[6]=l):l=k[6],k[7]!==r?(i=(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[r,l]}),k[7]=r,k[8]=i):i=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Başlık"}),k[9]=s):s=k[9],k[10]!==C||k[11]!==w?(n=e=>{let t=e.target.value;C(e=>{let a={...e,title:t};return w||(a.slug=(e=>{if(!e)return"";let t=e.trim(),a={ç:"c",Ç:"c",ğ:"g",Ğ:"g",ı:"i",I:"i",İ:"i",ö:"o",Ö:"o",ş:"s",Ş:"s",ü:"u",Ü:"u"};return(t=(t=t.split("").map(e=>a[e]??e).join("")).replace(/ß/g,"ss").replace(/ẞ/g,"ss")).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")})(t)),a})},k[10]=C,k[11]=w,k[12]=n):n=k[12],k[13]!==N||k[14]!==n||k[15]!==_.title?(d=(0,t.jsxs)("div",{children:[s,(0,t.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",value:_.title,onChange:n,disabled:N,required:!0})]}),k[13]=N,k[14]=n,k[15]=_.title,k[16]=d):d=k[16],k[17]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Slug"}),k[17]=o):o=k[17],k[18]!==S?(c=()=>S(!0),k[18]=S,k[19]=c):c=k[19],k[20]!==S||k[21]!==C?(g=e=>{S(!0),C(t=>({...t,slug:e.target.value}))},k[20]=S,k[21]=C,k[22]=g):g=k[22],k[23]!==N||k[24]!==c||k[25]!==g||k[26]!==_.slug?(x=(0,t.jsxs)("div",{children:[o,(0,t.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",value:_.slug,onFocus:c,onChange:g,disabled:N,required:!0})]}),k[23]=N,k[24]=c,k[25]=g,k[26]=_.slug,k[27]=x):x=k[27],k[28]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Özet (Summary)"}),k[28]=h):h=k[28];let T=_.summary;return k[29]!==M?(p=M("summary"),k[29]=M,k[30]=p):p=k[30],k[31]!==N||k[32]!==p||k[33]!==_.summary?(f=(0,t.jsxs)("div",{children:[h,(0,t.jsx)("textarea",{className:"w-full rounded-md border bg-background px-3 py-2 text-sm",rows:3,value:T,onChange:p,disabled:N})]}),k[31]=N,k[32]=p,k[33]=_.summary,k[34]=f):f=k[34],k[35]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)("div",{className:"mb-1 text-xs text-muted-foreground",children:"İçerik (zengin metin / HTML)"}),k[35]=b):b=k[35],k[36]!==C?(v=e=>C(t=>({...t,content:e})),k[36]=C,k[37]=v):v=k[37],k[38]!==N||k[39]!==v||k[40]!==_.content?(y=(0,t.jsxs)("div",{children:[b,(0,t.jsx)(m.default,{value:_.content,disabled:N,onChange:v})]}),k[38]=N,k[39]=v,k[40]=_.content,k[41]=y):y=k[41],k[42]!==x||k[43]!==f||k[44]!==y||k[45]!==i||k[46]!==d?(j=(0,t.jsxs)("div",{className:"space-y-4",children:[i,d,x,f,y]}),k[42]=x,k[43]=f,k[44]=y,k[45]=i,k[46]=d,k[47]=j):j=k[47],j};var x=e.i(1695);let h=e=>{let a,r,l,i,s,n,d,o,c,m,g,h,p,f,b,v,y,j,k,_,N,w,S,C,M,z,L,T,A,D=(0,u.c)(71),{values:H,disabled:R,imageMetadata:B,contentImageSize:$,setContentImageSize:I,contentImagePreview:G,handleAddContentImage:U,manualImageUrl:O,manualImageAlt:V,setManualImageUrl:E,setManualImageAlt:F,handleAddManualImage:K,setValues:P}=e;return D[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Etiketler (Tags)"}),D[0]=a):a=D[0],D[1]!==P?(r=e=>P(t=>({...t,tags:e.target.value})),D[1]=P,D[2]=r):r=D[2],D[3]!==R||D[4]!==r||D[5]!==H.tags?(l=(0,t.jsxs)("div",{children:[a,(0,t.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"ör: guezelwebdesign, kampanya, blog",value:H.tags,onChange:r,disabled:R})]}),D[3]=R,D[4]=r,D[5]=H.tags,D[6]=l):l=D[6],D[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"İçerik Görsel Boyutu"}),D[7]=i):i=D[7],D[8]!==I?(s=e=>I(e.target.value),D[8]=I,D[9]=s):s=D[9],D[10]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("option",{value:"sm",children:"Küçük (1/2)"}),d=(0,t.jsx)("option",{value:"md",children:"Orta (3/4)"}),o=(0,t.jsx)("option",{value:"lg",children:"Büyük (varsayılan)"}),c=(0,t.jsx)("option",{value:"full",children:"Tam genişlik"}),D[10]=n,D[11]=d,D[12]=o,D[13]=c):(n=D[10],d=D[11],o=D[12],c=D[13]),D[14]!==$||D[15]!==R||D[16]!==s?(m=(0,t.jsxs)("div",{children:[i,(0,t.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:$,onChange:s,disabled:R,children:[n,d,o,c]})]}),D[14]=$,D[15]=R,D[16]=s,D[17]=m):m=D[17],D[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(t.Fragment,{children:"Yüklenen görsel içerik alanının sonuna blok olarak eklenir."}),D[18]=g):g=D[18],D[19]!==B?(h=B||{},D[19]=B,D[20]=h):h=D[20],D[21]!==h?(p={...h,section:"content"},D[21]=h,D[22]=p):p=D[22],D[23]!==U?(f=e=>U(e),D[23]=U,D[24]=f):f=D[24],D[25]!==G||D[26]!==R||D[27]!==p||D[28]!==f?(b=(0,t.jsx)(x.AdminImageUploadField,{label:"İçerik Görselleri (Yükle)",helperText:g,bucket:"public",folder:"custom_pages/content",metadata:p,multiple:!0,value:G,onChange:f,disabled:R,openLibraryHref:"/admin/storage"}),D[25]=G,D[26]=R,D[27]=p,D[28]=f,D[29]=b):b=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("label",{className:"block text-xs text-muted-foreground",children:"Serbest URL ile İçerik Görseli"}),D[30]=v):v=D[30],D[31]!==E?(y=e=>E(e.target.value),D[31]=E,D[32]=y):y=D[32],D[33]!==R||D[34]!==O||D[35]!==y?(j=(0,t.jsx)("input",{type:"url",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"https://... (görsel URL'i)",value:O,onChange:y,disabled:R}),D[33]=R,D[34]=O,D[35]=y,D[36]=j):j=D[36],D[37]!==F?(k=e=>F(e.target.value),D[37]=F,D[38]=k):k=D[38],D[39]!==R||D[40]!==V||D[41]!==k?(_=(0,t.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"Alt metin (opsiyonel)",value:V,onChange:k,disabled:R}),D[39]=R,D[40]=V,D[41]=k,D[42]=_):_=D[42],D[43]!==R||D[44]!==K?(N=(0,t.jsx)("button",{type:"button",className:"rounded-md border px-3 py-2 text-xs disabled:opacity-60",onClick:K,disabled:R,children:"Serbest URL'yi İçeriğe Ekle"}),D[43]=R,D[44]=K,D[45]=N):N=D[45],D[46]!==j||D[47]!==_||D[48]!==N?(w=(0,t.jsxs)("div",{className:"space-y-2",children:[v,j,_,N]}),D[46]=j,D[47]=_,D[48]=N,D[49]=w):w=D[49],D[50]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Meta Title"}),D[50]=S):S=D[50],D[51]!==P?(C=e=>P(t=>({...t,meta_title:e.target.value})),D[51]=P,D[52]=C):C=D[52],D[53]!==R||D[54]!==C||D[55]!==H.meta_title?(M=(0,t.jsxs)("div",{children:[S,(0,t.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",value:H.meta_title,onChange:C,disabled:R})]}),D[53]=R,D[54]=C,D[55]=H.meta_title,D[56]=M):M=D[56],D[57]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Meta Description"}),D[57]=z):z=D[57],D[58]!==P?(L=e=>P(t=>({...t,meta_description:e.target.value})),D[58]=P,D[59]=L):L=D[59],D[60]!==R||D[61]!==L||D[62]!==H.meta_description?(T=(0,t.jsxs)("div",{children:[z,(0,t.jsx)("textarea",{className:"w-full rounded-md border bg-background px-3 py-2 text-sm",rows:3,value:H.meta_description,onChange:L,disabled:R})]}),D[60]=R,D[61]=L,D[62]=H.meta_description,D[63]=T):T=D[63],D[64]!==m||D[65]!==b||D[66]!==w||D[67]!==M||D[68]!==T||D[69]!==l?(A=(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-3 space-y-4",children:[l,m,b,w,M,T]}),D[64]=m,D[65]=b,D[66]=w,D[67]=M,D[68]=T,D[69]=l,D[70]=A):A=D[70],A},p=e=>{let a,l,i,s,n,d,o,c,m,g=(0,u.c)(28),{metadata:h,disabled:p,featuredImageValue:f,onFeaturedImageChange:b,galleryUrls:v,onGalleryUrlsChange:y,onSelectAsCover:j}=e,k=(0,r.useRouter)();return g[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("strong",{children:"kapak/öne çıkan"}),g[0]=a):a=g[0],g[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)(t.Fragment,{children:["Bu sayfa için bir ",a," görsel yükleyebilirsin. Seçim"," ",(0,t.jsx)("code",{children:"custom_pages.featured_image"})," alanına yazılır."]}),g[1]=l):l=g[1],g[2]!==h?(i=h||{},g[2]=h,g[3]=i):i=g[3],g[4]!==i?(s={...i,section:"cover"},g[4]=i,g[5]=s):s=g[5],g[6]!==b?(n=e=>b(e),g[6]=b,g[7]=n):n=g[7],g[8]!==k?(d=()=>k.push("/admin/storage"),g[8]=k,g[9]=d):d=g[9],g[10]!==p||g[11]!==f||g[12]!==s||g[13]!==n||g[14]!==d?(o=(0,t.jsx)(x.AdminImageUploadField,{label:"Öne Çıkan Görsel (Kapak)",helperText:l,bucket:"public",folder:"custom_pages/cover",metadata:s,value:f,onChange:n,disabled:p,openLibraryHref:"/admin/storage",onOpenLibraryClick:d}),g[10]=p,g[11]=f,g[12]=s,g[13]=n,g[14]=d,g[15]=o):o=g[15],g[16]!==p||g[17]!==f||g[18]!==v||g[19]!==h||g[20]!==b||g[21]!==y||g[22]!==j||g[23]!==k?(c=y?(0,t.jsx)(x.AdminImageUploadField,{label:"Galeri Görselleri",helperText:(0,t.jsxs)(t.Fragment,{children:["Birden fazla görsel yükleyip sayfaya galeri tanımlayabilirsin. Galerideki"," ",(0,t.jsx)("strong",{children:"Kapak"})," butonu ile seçilen görseli kapak olarak atayabilirsin."]}),bucket:"public",folder:"custom_pages/gallery",metadata:{...h||{},section:"gallery"},multiple:!0,values:v??[],onChangeMultiple:y,onSelectAsCover:e=>j?j(e):b(e),coverValue:f,disabled:p,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>k.push("/admin/storage")}):null,g[16]=p,g[17]=f,g[18]=v,g[19]=h,g[20]=b,g[21]=y,g[22]=j,g[23]=k,g[24]=c):c=g[24],g[25]!==o||g[26]!==c?(m=(0,t.jsxs)("div",{className:"space-y-4",children:[o,c]}),g[25]=o,g[26]=c,g[27]=m):m=g[27],m},f=e=>String(e??"").trim().toLowerCase().replace("_","-").split("-")[0].trim(),b=(e,t="de")=>f(e?.locale_resolved??e?.locale??t)||f(t)||"de",v=(e,t)=>{let a=f(t||"de")||"de";if(!e)return{id:void 0,page_id:void 0,locale:a,is_published:!1,title:"",slug:"",content:"",featured_image:"",featured_image_asset_id:"",featured_image_alt:"",summary:"",meta_title:"",meta_description:"",tags:"",images:[],storage_image_ids:[]};let r=Array.isArray(e?.tags)&&e.tags.length?e.tags.join(", "):e.tags_raw??"",l=b(e,a);return{id:e.id,page_id:e.id,locale:l,is_published:!!e.is_published,title:e.title??"",slug:e.slug??"",content:e.content??e.content_html??"",featured_image:e.featured_image??"",featured_image_asset_id:e.featured_image_asset_id??"",featured_image_alt:e.featured_image_alt??"",summary:e.summary??"",meta_title:e.meta_title??"",meta_description:e.meta_description??"",tags:r,images:Array.isArray(e.images)?e.images:[],storage_image_ids:Array.isArray(e.storage_image_ids)?e.storage_image_ids:[]}},y=({mode:e,initialData:r,loading:i,saving:s,locales:n,localesLoading:u,defaultLocale:m,onLocaleChange:x,onSubmit:y,onCancel:j})=>{let k=f(m||"de")||"de",[_,N]=(0,a.useState)(v(r,k)),[w,S]=(0,a.useState)(!1),[C,M]=(0,a.useState)("form"),[z,L]=(0,a.useState)(""),[T,A]=(0,a.useState)("lg"),[D,H]=(0,a.useState)(""),[R,B]=(0,a.useState)(""),[$,{isLoading:I}]=(0,d.useLazyListCustomPagesAdminQuery)(),G=(0,a.useRef)(0),U=(0,a.useRef)("");(0,a.useEffect)(()=>{if(!r){N(v(void 0,k)),S(!1),U.current="";return}let t=b(r,k),a=f(U.current||"");"edit"===e&&a&&t!==a||(U.current="",N(v(r,k)),S(!1))},[r,k,e]),(0,a.useEffect)(()=>{_.locale||N(e=>({...e,locale:k}))},[_.locale,k]);let O=i||s,V=async t=>{let a=f(t||k)||k;if(f(_.locale)===a)return void x?.(a);if(x?.(a),"create"===e||!r)return void N(e=>({...e,locale:a}));let i=r.id;if(!i)return void N(e=>({...e,locale:a}));U.current=a;let s=++G.current;N(e=>({...e,locale:a}));try{let e=await $({locale:a||void 0,limit:200,offset:0}).unwrap();if(s!==G.current)return;let t=(e?.items??e??[]).find(e=>String(e?.id||"")===String(i));if(t){let e=v(t,k);e.locale=a,N(e),S(!1),U.current=""}else l.toast.info("Seçilen dil için kayıt bulunamadı; bu dilde yeni içerik oluşturabilirsin.")}catch(e){if(s!==G.current)return;400===(e?.status??e?.originalStatus)?l.toast.info("Seçilen dil için kayıt listesi alınamadı; bu dilde yeni içerik oluşturabilirsin."):l.toast.error("Seçilen dil için özel sayfa yüklenirken bir hata oluştu.")}},E=(0,a.useMemo)(()=>(n??[]).map(e=>({value:f(e.value),label:e.label})),[n]),F=(0,a.useMemo)(()=>({module_key:"custom_pages",locale:_.locale||k,page_slug:_.slug||_.title||"",..._.page_id||r?.id?{page_id:_.page_id??r?.id}:{}}),[_.locale,_.slug,_.title,_.page_id,k,r?.id]),K=(e,t)=>{if(!e)return;let a=((e,t="",a="lg")=>{let r=t.replace(/"/g,"&quot;");return`
<figure class="content-image-block content-image-${a}">
  <img src="${e}" alt="${r}" loading="lazy" />
</figure>
`.trim()})(e,t??"",T);L(e),N(e=>({...e,content:(e.content||"")+"\n\n"+a+"\n\n"})),l.toast.success("Görsel içerik alanına eklendi. Editörde yerini değiştirebilirsin.")};return(0,t.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!O){if(!_.title.trim()||!_.slug.trim())return void l.toast.error("Başlık ve slug alanları zorunludur.");y({..._,page_id:_.page_id??r?.id??void 0,locale:f(_.locale||k)||k,title:_.title.trim(),slug:_.slug.trim(),summary:_.summary.trim(),meta_title:_.meta_title.trim(),meta_description:_.meta_description.trim(),tags:_.tags.trim()})}},className:"space-y-4",children:(0,t.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,t.jsx)("div",{className:"border-b p-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"create"===e?"Yeni Sayfa Oluştur":"Sayfa Düzenle"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Başlık, slug, içerik, etiketler ve SEO alanlarını doldur."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("div",{className:"inline-flex overflow-hidden rounded-md border",children:[(0,t.jsx)("button",{type:"button",className:["px-3 py-1 text-xs","form"===C?"bg-muted font-semibold":"bg-background"].join(" "),onClick:()=>M("form"),disabled:O,children:"Form"}),(0,t.jsx)("button",{type:"button",className:["px-3 py-1 text-xs","json"===C?"bg-muted font-semibold":"bg-background"].join(" "),onClick:()=>M("json"),disabled:O,children:"JSON"})]}),j?(0,t.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs",onClick:j,disabled:O,children:"Geri"}):null,(0,t.jsx)("button",{type:"submit",className:"rounded-md bg-primary px-3 py-1 text-xs text-primary-foreground disabled:opacity-60",disabled:O,children:s?"create"===e?"Oluşturuluyor...":"Kaydediliyor...":"create"===e?"Sayfayı Oluştur":"Değişiklikleri Kaydet"}),i||I?(0,t.jsx)("span",{className:"rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:I?"Dil değiştiriliyor...":"Yükleniyor..."}):null]})]})}),(0,t.jsx)("div",{className:"p-3",children:"json"===C?(0,t.jsx)(o.AdminJsonEditor,{value:_,disabled:O,onChange:e=>N(e),label:"Custom Page JSON",helperText:"Bu JSON, formdaki tüm alanların bire bir karşılığıdır."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(c.AdminLocaleSelect,{value:_.locale,onChange:V,options:E,loading:!!u,disabled:O||!!u&&!E.length||I,label:"Dil"}),(0,t.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Seçim; aynı zamanda düzenlediğin locale kaydını belirler."})]}),(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-12",children:[(0,t.jsx)("div",{className:"lg:col-span-8",children:(0,t.jsx)(g,{values:_,disabled:O,slugTouched:w,setSlugTouched:S,setValues:N,handleChange:e=>t=>{let a=t.target.value;N(t=>({...t,[e]:a}))},handleCheckboxChange:e=>t=>{let a=t.target.checked;N(t=>({...t,[e]:a}))}})}),(0,t.jsxs)("div",{className:"lg:col-span-4 space-y-4",children:[(0,t.jsx)(p,{metadata:F,disabled:O,featuredImageValue:_.featured_image,onFeaturedImageChange:e=>N(t=>({...t,featured_image:e})),galleryUrls:_.images,onGalleryUrlsChange:e=>N(t=>({...t,images:e})),onSelectAsCover:e=>N(t=>({...t,featured_image:e}))}),(0,t.jsx)(h,{values:_,disabled:O,imageMetadata:F,contentImageSize:T,setContentImageSize:A,contentImagePreview:z,handleAddContentImage:K,manualImageUrl:D,manualImageAlt:R,setManualImageUrl:H,setManualImageAlt:B,handleAddManualImage:()=>{let e=D.trim();e?(K(e,R.trim()),H(""),B("")):l.toast.error("Lütfen geçerli bir görsel URL'i gir.")},setValues:N})]})]})]})})]})})};function j(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}function k({id:e}){let o=(0,r.useRouter)(),c="new"===String(e),{localeOptions:u,defaultLocaleFromDb:m,loading:g,fetching:x}=(0,i.useAdminLocales)(),h=a.useMemo(()=>(0,s.resolveAdminApiLocale)(u,m,"tr"),[u,m]),p=a.useMemo(()=>new Set((u??[]).map(e=>(0,n.localeShortClient)(e.value)).filter(Boolean)),[u]),[f,b]=a.useState("");a.useEffect(()=>{u&&0!==u.length&&b(e=>{let t=(0,n.localeShortClient)(e);return t&&p.has(t)?t:(0,n.localeShortClientOr)(h,"tr")})},[u,p,h]);let v=a.useMemo(()=>{let e=(0,n.localeShortClient)(f);return e&&p.has(e)?e:(0,n.localeShortClientOr)(h,"tr")},[f,p,h]),k=!g&&!x,_=(u?.length??0)>0,[N,w]=(0,d.useLazyGetCustomPageAdminQuery)(),[S,C]=a.useState(void 0);a.useEffect(()=>{let t=!0;return async function(){if(!k||!_)return;if(c)return C(void 0);let a=String(e||"");if(j(a))try{let e=await N({id:a,locale:v}).unwrap();if(!t)return;C(e)}catch{if(!t)return;C(void 0)}}(),()=>{t=!1}},[e,c,k,_,v,N]);let[M,z]=(0,d.useCreateCustomPageAdminMutation)(),[L,T]=(0,d.useUpdateCustomPageAdminMutation)(),A=g||x||w.isLoading||w.isFetching,D=z.isLoading||T.isLoading,H=A||D,R=a.useMemo(()=>(u??[]).map(e=>({value:String(e.value??""),label:String(e.label??e.value??"")})),[u]),B=c?"create":"edit",$=()=>o.push("/admin/custompage"),I=async t=>{try{let a=(0,n.localeShortClientOr)(t.locale||v||h,"tr");if(p.size>0&&!p.has((0,n.localeShortClient)(a)))return void l.toast.error("Geçerli bir locale seçilmedi. app_locales ve default_locale kontrol edin.");if("create"===B){let e={locale:a,title:t.title.trim(),slug:t.slug.trim(),content:t.content??"",is_published:!!t.is_published,summary:t.summary.trim()||null,tags:t.tags.trim()||null,featured_image:t.featured_image.trim()||null,featured_image_asset_id:t.featured_image_asset_id.trim()||null,featured_image_alt:t.featured_image_alt.trim()||null,meta_title:t.meta_title.trim()||null,meta_description:t.meta_description.trim()||null,images:Array.isArray(t.images)?t.images:[],storage_image_ids:Array.isArray(t.storage_image_ids)?t.storage_image_ids:[]},r=await M(e).unwrap(),i=String(r?.id??"").trim();if(!i||!j(i))return void l.toast.error("Oluşturuldu ama id dönmedi/UUID değil. Backend response'u kontrol et.");l.toast.success("Sayfa başarıyla oluşturuldu."),o.replace(`/admin/custompage/${encodeURIComponent(i)}`),o.refresh();return}let r=S?.id||t.page_id||e;if(!r||!j(String(r)))return void l.toast.error("Sayfa verisi yüklenemedi (id yok).");let i={locale:a,title:t.title.trim(),slug:t.slug.trim(),content:t.content??"",is_published:!!t.is_published,summary:t.summary.trim()||null,tags:t.tags.trim()||null,featured_image:t.featured_image.trim()||null,featured_image_asset_id:t.featured_image_asset_id.trim()||null,featured_image_alt:t.featured_image_alt.trim()||null,meta_title:t.meta_title.trim()||null,meta_description:t.meta_description.trim()||null,images:Array.isArray(t.images)?t.images:[],storage_image_ids:Array.isArray(t.storage_image_ids)?t.storage_image_ids:[]};await L({id:r,patch:i}).unwrap(),l.toast.success("Sayfa güncellendi."),a!==v&&b(a)}catch(e){l.toast.error(function(e){let t=e?.data?.error?.message;if("string"==typeof t&&t.trim())return t;let a=e?.data?.message;if("string"==typeof a&&a.trim())return a;let r=e?.error;return"string"==typeof r&&r.trim()?r:"İşlem başarısız. Lütfen tekrar deneyin."}(e))}};return k&&!_?(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Dil listesi bulunamadı"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:[(0,t.jsx)("code",{children:"site_settings.app_locales"})," boş veya geçersiz. Önce Site Settings’ten dilleri ayarlayın."]})]}):c||j(String(e||""))?(0,t.jsx)(y,{mode:B,initialData:S,loading:H,saving:D,locales:R,localesLoading:g||x,defaultLocale:v||h||"tr",onLocaleChange:e=>b((0,n.localeShortClientOr)(e,"tr")),onSubmit:I,onCancel:$}):(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Geçersiz ID"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:["UUID değil: ",(0,t.jsx)("code",{children:String(e||"-")})]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("button",{className:"rounded-md border px-3 py-2 text-xs",onClick:$,children:"Listeye dön"})})]})}e.s(["default",()=>k],99489)}]);