module.exports=[27355,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292);a.i(58501);var f=a.i(85328),g=a.i(28551),h=a.i(79755),i=a.i(99570),j=a.i(66718),k=a.i(70430),l=a.i(86304),m=a.i(91119),n=a.i(63658),o=a.i(80701);let p=a=>"string"==typeof a?a.trim().toLowerCase():"";function q({search:a,onSearchChange:d,locale:e,onLocaleChange:f,showOnlyActive:g,onShowOnlyActiveChange:q,loading:r,total:s,onRefresh:t,onCreateClick:u,locales:v,localesLoading:w}){let x=(0,h.useAdminT)(),y=c.useMemo(()=>(v??[]).map(a=>({value:p(a.value),label:String(a.label||"").trim()})).filter(a=>!!a.value),[v]),z=c.useMemo(()=>{let a=p(e),b=new Set(y.map(a=>a.value));return a&&b.has(a)?a:y?.[0]?.value||""},[e,y]);c.useEffect(()=>{w||p(e)||y?.[0]?.value&&f(y[0].value)},[w,y]);let A=r||!!w||0===y.length;return(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(m.CardTitle,{className:"text-base",children:x("admin.slider.header.title")}),(0,b.jsx)(m.CardDescription,{children:x("admin.slider.header.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:["number"==typeof s?(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[x("admin.slider.header.total")," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:s})]}):null,r?(0,b.jsx)(l.Badge,{variant:"secondary",children:x("admin.slider.header.loading")}):null]})]})}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2 lg:col-span-2",children:[(0,b.jsx)(k.Label,{htmlFor:"slider-q",children:x("admin.slider.header.searchLabel")}),(0,b.jsx)(j.Input,{id:"slider-q",type:"search",placeholder:x("admin.slider.header.searchPlaceholder"),value:a,onChange:a=>d(a.target.value),disabled:r})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:x("admin.slider.header.localeLabel")}),(0,b.jsxs)(o.Select,{value:z||"",onValueChange:a=>f(p(a)),disabled:A,children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{placeholder:x("admin.slider.header.localePlaceholder")})}),(0,b.jsx)(o.SelectContent,{children:y.map(a=>(0,b.jsx)(o.SelectItem,{value:a.value,children:a.label},`${a.value}:${a.label}`))})]}),w||0!==y.length?null:(0,b.jsxs)("p",{className:"text-xs text-destructive",children:[(0,b.jsx)("strong",{children:x("admin.slider.header.localeEmptyError")})," ",x("admin.slider.header.localeEmptyHelp")]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:x("admin.slider.header.filterLabel")}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:x("admin.slider.header.onlyActiveLabel")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:x("admin.slider.header.onlyActiveHelp")})]}),(0,b.jsx)(n.Switch,{checked:g,onCheckedChange:a=>q(!!a),disabled:r})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[t?(0,b.jsx)(i.Button,{variant:"outline",onClick:t,disabled:r,children:x("admin.slider.header.refreshButton")}):null,(0,b.jsx)("div",{className:"ml-auto",children:u?(0,b.jsx)(i.Button,{onClick:u,disabled:r||A,children:x("admin.slider.header.createButton")}):null})]})]})]})}var r=a.i(6015),s=a.i(95490),t=a.i(85668),u=a.i(99464),v=a.i(81560);let w=a=>null==a?"":String(a),x=a=>String(a??"").trim().toLowerCase().replace("_","-").split("-")[0].trim(),y=(a,b=80)=>{let c=w(a);return c?c.length<=b?c:c.slice(0,Math.max(0,b-3))+"...":""};function z({item:a,t:c}){let d=a?.image_effective_url||a?.image_url||a?.image||"";return d?(0,b.jsx)("img",{src:d,alt:w(a?.alt)||w(a?.name)||"slider",className:"h-10 w-16 rounded-md border object-cover",onError:a=>{a.currentTarget.style.display="none"}}):(0,b.jsx)(l.Badge,{variant:"outline",children:c("admin.slider.list.noImage")})}function A({items:a,loading:c,onEdit:d,onDelete:e,onToggleActive:f,onToggleFeatured:g,onReorder:j,onSaveOrder:k,savingOrder:n}){let o=(0,h.useAdminT)(),p=a??[],q=p.length,A=q>0,B=c||!!n,C=!!j&&!B,D=(a,b)=>{if(!j)return;let c=a+b;if(c<0||c>=p.length)return;let d=p.slice(),[e]=d.splice(a,1);d.splice(c,0,e),j(d)};return(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{className:"gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)(m.CardTitle,{className:"text-base",children:o("admin.slider.list.title")}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[B?(0,b.jsx)(l.Badge,{variant:"secondary",children:o("admin.slider.list.processing")}):null,(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[o("admin.slider.list.totalLabel")," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:q})]}),k?(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:!A||!!n||c,onClick:k,children:n?o("admin.slider.list.savingOrder"):o("admin.slider.list.saveOrderButton")}):null]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:o("admin.slider.list.reorderHelp")})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"hidden rounded-md border md:block",children:(0,b.jsxs)(r.Table,{children:[(0,b.jsx)(r.TableHeader,{children:(0,b.jsxs)(r.TableRow,{children:[(0,b.jsx)(r.TableHead,{className:"w-14"}),(0,b.jsx)(r.TableHead,{className:"w-20",children:o("admin.slider.list.imageColumn")}),(0,b.jsx)(r.TableHead,{children:o("admin.slider.list.titleColumn")}),(0,b.jsx)(r.TableHead,{className:"w-20",children:o("admin.slider.list.localeColumn")}),(0,b.jsx)(r.TableHead,{className:"w-44",children:o("admin.slider.list.slugColumn")}),(0,b.jsx)(r.TableHead,{className:"w-28 text-center",children:o("admin.slider.list.activeColumn")}),(0,b.jsx)(r.TableHead,{className:"w-32 text-center",children:o("admin.slider.list.featuredColumn")}),(0,b.jsx)(r.TableHead,{className:"w-24 text-center",children:o("admin.slider.list.orderColumn")}),(0,b.jsx)(r.TableHead,{className:"w-60 text-right",children:o("admin.slider.list.actionsColumn")})]})}),(0,b.jsx)(r.TableBody,{children:A?p.map((a,c)=>{let h=String(a.id),j=w(a.name)||o("admin.slider.list.noTitle"),k=w(a.slug)||"-",l=w(a.description),m=w(a.buttonText),n=w(a.buttonLink),q=x(a.locale||"de")||"de";return(0,b.jsxs)(r.TableRow,{children:[(0,b.jsx)(r.TableCell,{className:"text-sm text-muted-foreground",children:C?(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>D(c,-1),disabled:!C||0===c,title:o("admin.slider.list.upButton"),children:(0,b.jsx)(s.ArrowUp,{className:"size-4"})}),(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>D(c,1),disabled:!C||c===p.length-1,title:o("admin.slider.list.downButton"),children:(0,b.jsx)(t.ArrowDown,{className:"size-4"})})]}):(0,b.jsx)("span",{children:c+1})}),(0,b.jsx)(r.TableCell,{children:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(z,{item:a,t:o})})}),(0,b.jsxs)(r.TableCell,{className:"whitespace-normal",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:j}),l?(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:y(l,140)}):null,m?(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.buttonLabel")," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:y(m,40)})]}):null,n?(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.linkLabel")," ",(0,b.jsx)("code",{className:"text-xs",children:y(n,90)})]}):null]}),(0,b.jsx)(r.TableCell,{children:(0,b.jsx)("code",{className:"text-xs",children:q})}),(0,b.jsx)(r.TableCell,{className:"whitespace-normal",children:(0,b.jsx)("code",{className:"text-xs",children:y(k,80)||"-"})}),(0,b.jsx)(r.TableCell,{className:"text-center",children:(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:B,onClick:()=>f(a,!a.is_active),children:a.is_active?o("admin.slider.list.activeStatus"):o("admin.slider.list.inactiveStatus")})}),(0,b.jsx)(r.TableCell,{className:"text-center",children:(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:B,onClick:()=>g(a,!a.featured),children:a.featured?o("admin.slider.list.featuredStatus"):o("admin.slider.list.normalStatus")})}),(0,b.jsx)(r.TableCell,{className:"text-center text-sm",children:a.display_order??0}),(0,b.jsx)(r.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"inline-flex flex-wrap items-center justify-end gap-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>d(a),disabled:B,children:[(0,b.jsx)(u.Pencil,{className:"mr-2 size-4"}),o("admin.slider.list.editButton")]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>e(a),disabled:B,className:"border-destructive text-destructive hover:text-destructive",children:[(0,b.jsx)(v.Trash2,{className:"mr-2 size-4"}),o("admin.slider.list.deleteButton")]})]})})]},h)}):(0,b.jsx)(r.TableRow,{children:(0,b.jsx)(r.TableCell,{colSpan:9,className:"py-10 text-center text-sm text-muted-foreground",children:c?o("admin.slider.list.loading"):o("admin.slider.list.noRecords")})})})]})}),(0,b.jsx)("div",{className:"md:hidden rounded-md border divide-y",children:A?p.map((a,c)=>{let h=String(a.id),j=w(a.name)||o("admin.slider.list.noTitle"),k=w(a.slug)||"-",l=w(a.description),m=w(a.buttonText),n=w(a.buttonLink),q=x(a.locale||"de")||"de";return(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"text-sm font-medium",children:["#",c+1," ",j]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.localeLabel")," ",(0,b.jsx)("code",{className:"text-xs",children:q})," Â· ",o("admin.slider.list.orderLabel")," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.display_order??0})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(z,{item:a,t:o})})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.slugLabel")," ",(0,b.jsx)("code",{className:"text-xs",children:y(k,110)||"-"})]}),l?(0,b.jsx)("div",{className:"text-sm",children:y(l,180)}):null,m?(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.buttonLabel")," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:y(m,60)})]}):null,n?(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o("admin.slider.list.linkLabel")," ",(0,b.jsx)("code",{className:"text-xs",children:y(n,120)})]}):null,(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:B,onClick:()=>f(a,!a.is_active),children:a.is_active?o("admin.slider.list.activeStatus"):o("admin.slider.list.inactiveStatus")}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:B,onClick:()=>g(a,!a.featured),children:a.featured?o("admin.slider.list.featuredStatus"):o("admin.slider.list.normalStatus")})]}),C?(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>D(c,-1),disabled:!C||0===c,children:[(0,b.jsx)(s.ArrowUp,{className:"mr-2 size-4"}),o("admin.slider.list.upButton")]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>D(c,1),disabled:!C||c===p.length-1,children:[(0,b.jsx)(t.ArrowDown,{className:"mr-2 size-4"}),o("admin.slider.list.downButton")]})]}):null,(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>d(a),disabled:B,children:[(0,b.jsx)(u.Pencil,{className:"mr-2 size-4"}),o("admin.slider.list.editButton")]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>e(a),disabled:B,className:"border-destructive text-destructive hover:text-destructive",children:[(0,b.jsx)(v.Trash2,{className:"mr-2 size-4"}),o("admin.slider.list.deleteButton")]})]})]},h)}):(0,b.jsx)("div",{className:"p-6 text-center text-sm text-muted-foreground",children:c?o("admin.slider.list.loading"):o("admin.slider.list.noRecords")})})]})]})}let B=a=>"string"==typeof a?a.trim().toLowerCase():"";function C(a){if(a)return Array.isArray(a)?a[0]:a}function D(a,b,c){let d=new URLSearchParams(b.toString());for(let[a,b]of Object.entries(c))null==b||""===String(b).trim()?d.delete(a):d.set(a,String(b));let e=d.toString();return e?`${a}?${e}`:a}function E(){let a=(0,d.useRouter)(),i=(0,d.usePathname)(),j=(0,d.useSearchParams)(),k=(0,h.useAdminT)(),l=C(j.get("q"))??"",m=B(C(j.get("locale"))??""),n="1"===(C(j.get("active"))??""),o=(0,g.useAdminLocales)(),p=!!o?.loading||!!o?.isLoading||!!o?.isFetching,r=B(o?.defaultLocaleFromDb??o?.defaultLocale??o?.default_locale??o?.default??""),s=c.useMemo(()=>(Array.isArray(o?.localeOptions)?o.localeOptions:Array.isArray(o?.locales)?o.locales:Array.isArray(o?.options)?o.options:[]).map(a=>({value:B(a?.value??a?.code??a),label:String(a?.label??a?.name??a?.value??a?.code??a??"").trim()})).filter(a=>!!a.value).map(a=>({value:a.value,label:a.label||a.value.toUpperCase()})),[o]),t=c.useMemo(()=>{let a=new Set(s.map(a=>a.value));return m&&a.has(m)?m:r&&a.has(r)?r:s?.[0]?.value||""},[m,r,s]);c.useEffect(()=>{p||!t||B(j.get("locale")??"")!==t&&a.replace(D(i,j,{locale:t}),{scroll:!1})},[p,t]);let{data:u,isLoading:v,isFetching:w,refetch:x}=(0,f.useListSlidersAdminQuery)({q:l||void 0,locale:t||void 0,is_active:!!n||void 0,sort:"display_order",order:"asc",offset:0},{skip:p||!t}),y=c.useMemo(()=>Array.isArray(u)?u:[],[u]),[z,E]=c.useState([]);c.useEffect(()=>E(y),[y]);let[F]=(0,f.useUpdateSliderAdminMutation)(),[G,{isLoading:H}]=(0,f.useDeleteSliderAdminMutation)(),[I,{isLoading:J}]=(0,f.useReorderSlidersAdminMutation)(),[K]=(0,f.useSetSliderStatusAdminMutation)(),L=v||w||p||H||J,M=b=>{a.replace(D(i,j,b),{scroll:!1})},N=async a=>{if(window.confirm(k("admin.slider.list.deleteConfirm",{name:a.name})))try{await G(String(a.id)).unwrap(),e.toast.success(k("admin.slider.list.deleted",{name:a.name})),await x()}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||k("admin.slider.list.deleteError");e.toast.error(a)}},O=async(a,b)=>{try{await K({id:String(a.id),payload:{is_active:b}}).unwrap(),E(c=>c.map(c=>String(c.id)===String(a.id)?{...c,is_active:b}:c))}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||k("admin.slider.list.activeUpdateError");e.toast.error(a)}},P=async(a,b)=>{try{await F({id:String(a.id),patch:{featured:b}}).unwrap(),E(c=>c.map(c=>String(c.id)===String(a.id)?{...c,featured:b}:c))}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||k("admin.slider.list.featuredUpdateError");e.toast.error(a)}},Q=async()=>{if(z.length)try{let a=z.map(a=>Number(a.id)).filter(a=>Number.isFinite(a)&&a>0);if(!a.length)return;await I({ids:a}).unwrap(),e.toast.success(k("admin.slider.list.orderSaved")),await x()}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||k("admin.slider.list.orderSaveError");e.toast.error(a)}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(q,{search:l,onSearchChange:a=>M({q:a||void 0}),locale:t,onLocaleChange:a=>{M({locale:B(a)||void 0})},showOnlyActive:n,onShowOnlyActiveChange:a=>M({active:a?"1":void 0}),loading:L,onRefresh:x,locales:s,localesLoading:p,onCreateClick:()=>{let b=t||"",c=b?`/admin/slider/new?locale=${encodeURIComponent(b)}`:"/admin/slider/new";a.push(c)}}),(0,b.jsx)(A,{items:z,loading:L,onEdit:b=>{let c=t||"",d=c?`/admin/slider/${encodeURIComponent(String(b.id))}?locale=${encodeURIComponent(c)}`:`/admin/slider/${encodeURIComponent(String(b.id))}`;a.push(d)},onDelete:N,onToggleActive:O,onToggleFeatured:P,onReorder:a=>E(a),onSaveOrder:Q,savingOrder:J})]})}a.s(["default",()=>E],27355)}];

//# sourceMappingURL=src_app_%28main%29_admin_%28admin%29_slider__components_admin-slider-client_tsx_b49217e7._.js.map