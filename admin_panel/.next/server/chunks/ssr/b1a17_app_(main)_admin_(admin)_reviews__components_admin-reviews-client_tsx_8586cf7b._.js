module.exports=[39956,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(15618),g=a.i(28790),h=a.i(87532),i=a.i(81560),j=a.i(99464),k=a.i(96221),l=a.i(21374),m=a.i(67511),m=m;let n=(0,a.i(70106).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=a.i(28551),p=a.i(90899),q=a.i(30637),r=a.i(68114),s=a.i(99570),t=a.i(66718),u=a.i(70430),v=a.i(86304),w=a.i(91119),x=a.i(63658),y=a.i(42737),z=a.i(80701),A=a.i(6015),B=a.i(86192);a.i(58501);var C=a.i(28677);function D(a){if(!a)return"-";try{let b=new Date(a);if(Number.isNaN(b.getTime()))return String(a);return b.toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return String(a)}}function E(a,b=60){let c=a||"";return c.length<=b?c||"-":c.slice(0,b-1)+"…"}function F(a){return a?.data?.error?.message||a?.data?.message||a?.message||"İşlem başarısız"}function G({rating:a}){let c=Math.max(0,Math.min(5,Math.round(a||0)));return(0,b.jsx)("div",{className:"flex items-center gap-0.5",children:Array.from({length:5},(a,d)=>(0,b.jsx)(l.Star,{className:(0,r.cn)("size-3.5",d<c?"fill-yellow-400 text-yellow-400":"text-muted-foreground")},d))})}function H(){let a=(0,d.useRouter)(),l=(0,d.useSearchParams)(),{localeOptions:H,defaultLocaleFromDb:I,coerceLocale:J,loading:K}=(0,o.useAdminLocales)(),L=c.useMemo(()=>Array.isArray(H)?H.map(a=>({value:a.value||"",label:a.label||a.value||""})):[],[H]),M=l.get("locale")||I||(0,q.localeShortClientOr)("de")||"",[N,O]=c.useState({search:"",approvedFilter:"all",activeFilter:"all",minRating:"",maxRating:"",locale:M});c.useEffect(()=>{if(!N.locale)return;let b=new URLSearchParams(l.toString());b.set("locale",N.locale),a.replace(`?${b.toString()}`,{scroll:!1})},[N.locale,a,l]);let P=c.useMemo(()=>{let a=N.locale||(0,p.resolveAdminApiLocale)(H,I,"de");return{search:N.search||void 0,approved:"approved"===N.approvedFilter||"unapproved"!==N.approvedFilter&&void 0,active:"active"===N.activeFilter||"inactive"!==N.activeFilter&&void 0,minRating:N.minRating?Number(N.minRating):void 0,maxRating:N.maxRating?Number(N.maxRating):void 0,locale:a,orderBy:"created_at",order:"desc"}},[N,H,I]),{data:Q,isLoading:R,isFetching:S,refetch:T}=(0,C.useListReviewsAdminQuery)(P),[U]=(0,C.useUpdateReviewAdminMutation)(),[V]=(0,C.useDeleteReviewAdminMutation)(),W=Q?.items||[],X=Q?.total||0,[Y,Z]=c.useState(!1),[$,_]=c.useState(null),aa=async a=>{try{await U({id:a.id,patch:{is_active:!a.is_active}}).unwrap(),e.toast.success(a.is_active?"Pasif yapıldı":"Aktif yapıldı"),T()}catch(a){e.toast.error(F(a))}},ab=async a=>{try{await U({id:a.id,patch:{is_approved:!a.is_approved}}).unwrap(),e.toast.success(a.is_approved?"Onay kaldırıldı":"Onaylandı"),T()}catch(a){e.toast.error(F(a))}},ac=b=>{a.push(`/admin/reviews/${b.id}`)},ad=a=>{_(a),Z(!0)},ae=async()=>{if($)try{await V({id:$.id}).unwrap(),e.toast.success("Kayıt silindi"),Z(!1),_(null),T()}catch(a){e.toast.error(F(a))}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(w.Card,{children:[(0,b.jsx)(w.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(w.CardTitle,{children:"Reviews & Testimonials"}),(0,b.jsx)(w.CardDescription,{children:"Müşteri yorumlarını ve değerlendirmelerini yönetin."})]}),(0,b.jsxs)(s.Button,{onClick:()=>a.push("/admin/reviews/new"),disabled:R,className:"gap-2",children:[(0,b.jsx)(f.Plus,{className:"size-4"}),"Yeni Ekle"]})]})}),(0,b.jsxs)(w.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"search",className:"text-sm",children:"Ara"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(t.Input,{id:"search",placeholder:"İsim, email, yorum...",value:N.search,onChange:a=>{var b;return b=a.target.value,void O(a=>({...a,search:b}))},disabled:R,className:"pl-9"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"approvedFilter",className:"text-sm",children:"Onay Durumu"}),(0,b.jsxs)(z.Select,{value:N.approvedFilter,onValueChange:a=>{O(b=>({...b,approvedFilter:a}))},disabled:R,children:[(0,b.jsx)(z.SelectTrigger,{id:"approvedFilter",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(z.SelectItem,{value:"approved",children:"Onaylı"}),(0,b.jsx)(z.SelectItem,{value:"unapproved",children:"Onaysız"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"activeFilter",className:"text-sm",children:"Durum"}),(0,b.jsxs)(z.Select,{value:N.activeFilter,onValueChange:a=>{O(b=>({...b,activeFilter:a}))},disabled:R,children:[(0,b.jsx)(z.SelectTrigger,{id:"activeFilter",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(z.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(z.SelectItem,{value:"inactive",children:"Pasif"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"minRating",className:"text-sm",children:"Min. Rating"}),(0,b.jsx)(t.Input,{id:"minRating",type:"number",min:0,max:5,value:N.minRating,onChange:a=>O(b=>({...b,minRating:a.target.value})),placeholder:"0",disabled:R})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"maxRating",className:"text-sm",children:"Max. Rating"}),(0,b.jsx)(t.Input,{id:"maxRating",type:"number",min:0,max:5,value:N.maxRating,onChange:a=>O(b=>({...b,maxRating:a.target.value})),placeholder:"5",disabled:R})]}),(0,b.jsx)("div",{children:(0,b.jsx)(y.AdminLocaleSelect,{value:N.locale,onChange:a=>{let b=J(a,I);O(a=>({...a,locale:b}))},options:L,loading:K,disabled:R})}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)(s.Button,{variant:"outline",onClick:()=>T(),disabled:R,className:"w-full gap-2",children:[(0,b.jsx)(g.RefreshCcw,{className:(0,r.cn)("size-4",S&&"animate-spin")}),"Yenile"]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Toplam ",(0,b.jsx)("strong",{children:X})," kayıt"]}),S&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-4 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})]})]})]}),(0,b.jsx)(w.Card,{className:"hidden xl:block",children:(0,b.jsx)(w.CardContent,{className:"p-0",children:(0,b.jsxs)(A.Table,{children:[(0,b.jsx)(A.TableHeader,{children:(0,b.jsxs)(A.TableRow,{children:[(0,b.jsx)(A.TableHead,{children:"İsim & Email"}),(0,b.jsx)(A.TableHead,{className:"w-32",children:"Rating"}),(0,b.jsx)(A.TableHead,{children:"Yorum"}),(0,b.jsx)(A.TableHead,{className:"w-24 text-center",children:"Onaylı"}),(0,b.jsx)(A.TableHead,{className:"w-24 text-center",children:"Aktif"}),(0,b.jsx)(A.TableHead,{className:"w-32",children:"Locale"}),(0,b.jsx)(A.TableHead,{className:"w-44",children:"Tarih"}),(0,b.jsx)(A.TableHead,{className:"w-44 text-right",children:"İşlemler"})]})}),(0,b.jsx)(A.TableBody,{children:R?(0,b.jsx)(A.TableRow,{children:(0,b.jsx)(A.TableCell,{colSpan:8,className:"h-24 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})}):0===W.length?(0,b.jsx)(A.TableRow,{children:(0,b.jsx)(A.TableCell,{colSpan:8,className:"h-24 text-center",children:"Kayıt bulunamadı."})}):W.map(a=>(0,b.jsxs)(A.TableRow,{children:[(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"font-medium",children:a.name||"-"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.email||"-"})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(G,{rating:a.rating}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",a.rating,")"]})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:E(a.comment,50)})}),(0,b.jsx)(A.TableCell,{className:"text-center",children:(0,b.jsx)(s.Button,{variant:"ghost",size:"icon-sm",onClick:()=>ab(a),disabled:R,children:a.is_approved?(0,b.jsx)(m.default,{className:"size-4 text-green-600"}):(0,b.jsx)(n,{className:"size-4 text-muted-foreground"})})}),(0,b.jsx)(A.TableCell,{className:"text-center",children:(0,b.jsx)(x.Switch,{checked:a.is_active,onCheckedChange:()=>aa(a),disabled:R})}),(0,b.jsx)(A.TableCell,{children:a.locale_resolved||a.submitted_locale?(0,b.jsx)(v.Badge,{variant:"outline",children:a.locale_resolved||a.submitted_locale}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsxs)(A.TableCell,{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("div",{children:D(a.created_at)}),(0,b.jsxs)("div",{className:"text-[10px]",children:["Güncelleme: ",D(a.updated_at)]})]}),(0,b.jsx)(A.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ac(a),disabled:R,className:"gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),"Düzenle"]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ad(a),disabled:R,className:"gap-2",children:[(0,b.jsx)(i.Trash2,{className:"size-3.5"}),"Sil"]})]})})]},a.id))})]})})}),(0,b.jsx)("div",{className:"space-y-4 xl:hidden",children:R?(0,b.jsx)(w.Card,{children:(0,b.jsx)(w.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})}):0===W.length?(0,b.jsx)(w.Card,{children:(0,b.jsx)(w.CardContent,{className:"py-12 text-center text-muted-foreground",children:"Kayıt bulunamadı."})}):W.map(a=>(0,b.jsx)(w.Card,{children:(0,b.jsxs)(w.CardContent,{className:"space-y-4 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.name||"-"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.email||"-"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(G,{rating:a.rating}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",a.rating,")"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[a.locale_resolved||a.submitted_locale?(0,b.jsx)(v.Badge,{variant:"outline",children:a.locale_resolved||a.submitted_locale}):null,(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Button,{variant:"ghost",size:"icon-sm",onClick:()=>ab(a),disabled:R,title:a.is_approved?"Onaylı":"Onaysız",children:a.is_approved?(0,b.jsx)(m.default,{className:"size-4 text-green-600"}):(0,b.jsx)(n,{className:"size-4 text-muted-foreground"})}),(0,b.jsx)(x.Switch,{checked:a.is_active,onCheckedChange:()=>aa(a),disabled:R})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(u.Label,{className:"text-xs text-muted-foreground",children:"Yorum"}),(0,b.jsx)("p",{className:"text-sm",children:E(a.comment,120)})]}),(0,b.jsxs)("div",{className:"space-y-1 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Oluşturma: ",D(a.created_at)]}),(0,b.jsxs)("div",{children:["Güncelleme: ",D(a.updated_at)]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ac(a),disabled:R,className:"flex-1 gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),"Düzenle"]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ad(a),disabled:R,className:"flex-1 gap-2",children:[(0,b.jsx)(i.Trash2,{className:"size-3.5"}),"Sil"]})]})]})},a.id))})]}),(0,b.jsx)(B.AlertDialog,{open:Y,onOpenChange:Z,children:(0,b.jsxs)(B.AlertDialogContent,{children:[(0,b.jsxs)(B.AlertDialogHeader,{children:[(0,b.jsx)(B.AlertDialogTitle,{children:"Silmek istediğinizden emin misiniz?"}),(0,b.jsxs)(B.AlertDialogDescription,{children:[(0,b.jsx)("strong",{children:$?.name||"Bu kayıt"})," tarafından yapılan yorum silinecek. Bu işlem geri alınamaz."]})]}),(0,b.jsxs)(B.AlertDialogFooter,{children:[(0,b.jsx)(B.AlertDialogCancel,{children:"İptal"}),(0,b.jsx)(B.AlertDialogAction,{onClick:ae,children:"Sil"})]})]})})]})}a.s(["default",()=>H],39956)}];

//# sourceMappingURL=b1a17_app_%28main%29_admin_%28admin%29_reviews__components_admin-reviews-client_tsx_8586cf7b._.js.map