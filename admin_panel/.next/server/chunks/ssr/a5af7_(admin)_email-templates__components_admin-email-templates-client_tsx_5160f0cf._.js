module.exports=[48200,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(15618),g=a.i(28790),h=a.i(87532),i=a.i(81560),j=a.i(99464),k=a.i(96221),l=a.i(53254),m=a.i(92258),n=a.i(28551),o=a.i(30637),p=a.i(68114),q=a.i(99570),r=a.i(66718),s=a.i(70430),t=a.i(86304),u=a.i(91119),v=a.i(63658),w=a.i(42737),x=a.i(80701),y=a.i(6015),z=a.i(86192);a.i(58501);var A=a.i(84296);function B(a){if(!a)return"-";try{let b=new Date(a);if(Number.isNaN(b.getTime()))return String(a);return b.toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return String(a)}}function C(a,b=60){let c=a||"";return c.length<=b?c||"-":c.slice(0,b-1)+"…"}function D(a){return a?.data?.error?.message||a?.data?.message||a?.message||"İşlem başarısız"}function E(){let a=(0,d.useRouter)(),E=(0,d.useSearchParams)(),{localeOptions:F,defaultLocaleFromDb:G,coerceLocale:H,loading:I}=(0,n.useAdminLocales)(),J=E.get("locale")||G||(0,o.localeShortClientOr)("de","de")||"",[K,L]=c.useState({search:"",activeFilter:"all",locale:J});c.useEffect(()=>{if(!K.locale)return;let b=new URLSearchParams(E.toString());b.set("locale",K.locale),a.replace(`?${b.toString()}`,{scroll:!1})},[K.locale,a,E]);let M=c.useMemo(()=>{let a=(0,o.localeShortClient)(K.locale);return{q:K.search||void 0,is_active:"active"===K.activeFilter||"inactive"!==K.activeFilter&&void 0,locale:a,order_by:"updated_at",order_dir:"desc"}},[K]),{data:N=[],isLoading:O,isFetching:P,refetch:Q}=(0,A.useListEmailTemplatesAdminQuery)(M),[R]=(0,A.useUpdateEmailTemplateAdminMutation)(),[S]=(0,A.useDeleteEmailTemplateAdminMutation)(),T=N.length,[U,V]=c.useState(!1),[W,X]=c.useState(null),Y=async a=>{try{await R({id:a.id,body:{is_active:!a.is_active}}).unwrap(),e.toast.success(a.is_active?"Pasif yapıldı":"Aktif yapıldı"),Q()}catch(a){e.toast.error(D(a))}},Z=b=>{a.push(`/admin/email-templates/${b.id}`)},$=a=>{X(a),V(!0)},_=async()=>{if(W)try{await S({id:W.id}).unwrap(),e.toast.success("Kayıt silindi"),V(!1),X(null),Q()}catch(a){e.toast.error(D(a))}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(u.Card,{children:[(0,b.jsx)(u.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(u.CardTitle,{children:"Email Templates"}),(0,b.jsx)(u.CardDescription,{children:"Email şablonlarını yönetin. Her şablon farklı dillerde içerik içerebilir."})]}),(0,b.jsxs)(q.Button,{onClick:()=>a.push("/admin/email-templates/new"),disabled:O,className:"gap-2",children:[(0,b.jsx)(f.Plus,{className:"size-4"}),"Yeni Ekle"]})]})}),(0,b.jsxs)(u.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,b.jsx)(s.Label,{htmlFor:"search",className:"text-sm",children:"Ara"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(r.Input,{id:"search",placeholder:"Template key, name, subject...",value:K.search,onChange:a=>{var b;return b=a.target.value,void L(a=>({...a,search:b}))},disabled:O,className:"pl-9"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"activeFilter",className:"text-sm",children:"Durum"}),(0,b.jsxs)(x.Select,{value:K.activeFilter,onValueChange:a=>{L(b=>({...b,activeFilter:a}))},disabled:O,children:[(0,b.jsx)(x.SelectTrigger,{id:"activeFilter",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(x.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(x.SelectItem,{value:"inactive",children:"Pasif"})]})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(w.AdminLocaleSelect,{value:K.locale,onChange:a=>{let b=H(a,G);L(a=>({...a,locale:b}))},options:F,loading:I,disabled:O})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Toplam ",(0,b.jsx)("strong",{children:T})," kayıt"]}),(0,b.jsxs)(q.Button,{variant:"outline",onClick:()=>Q(),disabled:O,className:"gap-2",children:[(0,b.jsx)(g.RefreshCcw,{className:(0,p.cn)("size-4",P&&"animate-spin")}),"Yenile"]})]}),P&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(k.Loader2,{className:"size-4 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})]})]}),(0,b.jsx)(u.Card,{className:"hidden xl:block",children:(0,b.jsx)(u.CardContent,{className:"p-0",children:(0,b.jsxs)(y.Table,{children:[(0,b.jsx)(y.TableHeader,{children:(0,b.jsxs)(y.TableRow,{children:[(0,b.jsx)(y.TableHead,{children:"Template Key"}),(0,b.jsx)(y.TableHead,{children:"Name & Subject"}),(0,b.jsx)(y.TableHead,{className:"w-48",children:"Variables"}),(0,b.jsx)(y.TableHead,{className:"w-24 text-center",children:"Aktif"}),(0,b.jsx)(y.TableHead,{className:"w-32",children:"Locale"}),(0,b.jsx)(y.TableHead,{className:"w-44",children:"Tarih"}),(0,b.jsx)(y.TableHead,{className:"w-40 text-right",children:"İşlemler"})]})}),(0,b.jsx)(y.TableBody,{children:O?(0,b.jsx)(y.TableRow,{children:(0,b.jsx)(y.TableCell,{colSpan:7,className:"h-24 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})}):0===N.length?(0,b.jsx)(y.TableRow,{children:(0,b.jsx)(y.TableCell,{colSpan:7,className:"h-24 text-center",children:"Kayıt bulunamadı."})}):N.map(a=>(0,b.jsxs)(y.TableRow,{children:[(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Code2,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("code",{className:"rounded bg-muted px-2 py-1 text-xs font-medium",children:a.template_key||"-"})]})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"font-medium",children:a.template_name||"-"}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(m.Mail,{className:"size-3"}),(0,b.jsx)("span",{children:C(a.subject,40)})]})]})}),(0,b.jsx)(y.TableCell,{children:a.detected_variables&&a.detected_variables.length>0?(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.detected_variables.slice(0,3).map(a=>(0,b.jsx)(t.Badge,{variant:"secondary",className:"text-[10px]",children:a},a)),a.detected_variables.length>3&&(0,b.jsxs)(t.Badge,{variant:"secondary",className:"text-[10px]",children:["+",a.detected_variables.length-3]})]}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,b.jsx)(y.TableCell,{className:"text-center",children:(0,b.jsx)(v.Switch,{checked:a.is_active,onCheckedChange:()=>Y(a),disabled:O})}),(0,b.jsx)(y.TableCell,{children:a.locale?(0,b.jsx)(t.Badge,{variant:"outline",children:a.locale}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsxs)(y.TableCell,{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("div",{children:B(a.created_at)}),(0,b.jsxs)("div",{className:"text-[10px]",children:["Güncelleme: ",B(a.updated_at)]})]}),(0,b.jsx)(y.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)(q.Button,{variant:"outline",size:"sm",onClick:()=>Z(a),disabled:O,className:"gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),"Düzenle"]}),(0,b.jsxs)(q.Button,{variant:"outline",size:"sm",onClick:()=>$(a),disabled:O,className:"gap-2",children:[(0,b.jsx)(i.Trash2,{className:"size-3.5"}),"Sil"]})]})})]},`${a.id}-${a.template_key}-${a.locale}`))})]})})}),(0,b.jsx)("div",{className:"space-y-4 xl:hidden",children:O?(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})}):0===N.length?(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"py-12 text-center text-muted-foreground",children:"Kayıt bulunamadı."})}):N.map(a=>(0,b.jsx)(u.Card,{children:(0,b.jsxs)(u.CardContent,{className:"space-y-4 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Code2,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("code",{className:"rounded bg-muted px-2 py-1 text-xs font-medium",children:a.template_key||"-"})]}),a.locale&&(0,b.jsx)(t.Badge,{variant:"outline",children:a.locale}),(0,b.jsx)("h3",{className:"font-semibold",children:a.template_name||"-"}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(m.Mail,{className:"size-3"}),(0,b.jsx)("span",{children:C(a.subject,50)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Label,{className:"text-sm",children:"Aktif"}),(0,b.jsx)(v.Switch,{checked:a.is_active,onCheckedChange:()=>Y(a),disabled:O})]})]}),a.detected_variables&&a.detected_variables.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{className:"text-xs text-muted-foreground",children:"Variables"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.detected_variables.map(a=>(0,b.jsx)(t.Badge,{variant:"secondary",className:"text-[10px]",children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-1 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Oluşturma: ",B(a.created_at)]}),(0,b.jsxs)("div",{children:["Güncelleme: ",B(a.updated_at)]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(q.Button,{variant:"outline",size:"sm",onClick:()=>Z(a),disabled:O,className:"flex-1 gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),"Düzenle"]}),(0,b.jsxs)(q.Button,{variant:"outline",size:"sm",onClick:()=>$(a),disabled:O,className:"flex-1 gap-2",children:[(0,b.jsx)(i.Trash2,{className:"size-3.5"}),"Sil"]})]})]})},a.id))})]}),(0,b.jsx)(z.AlertDialog,{open:U,onOpenChange:V,children:(0,b.jsxs)(z.AlertDialogContent,{children:[(0,b.jsxs)(z.AlertDialogHeader,{children:[(0,b.jsx)(z.AlertDialogTitle,{children:"Silmek istediğinizden emin misiniz?"}),(0,b.jsxs)(z.AlertDialogDescription,{children:[(0,b.jsx)("strong",{children:W?.template_key||"Bu şablon"})," silinecek. Bu işlem geri alınamaz."]})]}),(0,b.jsxs)(z.AlertDialogFooter,{children:[(0,b.jsx)(z.AlertDialogCancel,{children:"İptal"}),(0,b.jsx)(z.AlertDialogAction,{onClick:_,children:"Sil"})]})]})})]})}a.s(["default",()=>E])}];

//# sourceMappingURL=a5af7_%28admin%29_email-templates__components_admin-email-templates-client_tsx_5160f0cf._.js.map