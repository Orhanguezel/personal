{"version":3,"sources":["../../../../src/app/%28main%29/admin/%28admin%29/email-templates/_components/admin-email-templates-client.tsx"],"sourcesContent":["'use client';\n\n// =============================================================\n// FILE: src/app/(main)/admin/(admin)/email-templates/admin-email-templates-client.tsx\n// FINAL — Admin Email Templates List (App Router + shadcn)\n// - Modern UI with shadcn/ui components\n// - Tailwind CSS with dark mode support\n// - RTK Query hooks\n// - Locale support\n// - Template key & variables display\n// =============================================================\n\nimport * as React from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { toast } from 'sonner';\nimport { Plus, RefreshCcw, Search, Trash2, Pencil, Loader2, Code2, Mail } from 'lucide-react';\n\nimport { useAdminLocales } from '@/app/(main)/admin/_components/common/useAdminLocales';\nimport { localeShortClient, localeShortClientOr } from '@/i18n/localeShortClient';\n\nimport { cn } from '@/lib/utils';\n\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { AdminLocaleSelect } from '@/app/(main)/admin/_components/common/AdminLocaleSelect';\n\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\n\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\n\nimport type { EmailTemplateAdminListItemDto, EmailTemplateAdminListQueryParams } from '@/integrations/shared';\nimport {\n  useListEmailTemplatesAdminQuery,\n  useUpdateEmailTemplateAdminMutation,\n  useDeleteEmailTemplateAdminMutation,\n} from '@/integrations/hooks';\n\ntype ActiveFilter = 'all' | 'active' | 'inactive';\n\ntype Filters = {\n  search: string;\n  activeFilter: ActiveFilter;\n  locale: string;\n};\n\nfunction fmtDate(val: string | Date | null | undefined) {\n  if (!val) return '-';\n  try {\n    const d = new Date(val);\n    if (Number.isNaN(d.getTime())) return String(val);\n    return d.toLocaleString('tr-TR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  } catch {\n    return String(val);\n  }\n}\n\nfunction truncate(text: string | null | undefined, max = 60) {\n  const t = text || '';\n  if (t.length <= max) return t || '-';\n  return t.slice(0, max - 1) + '…';\n}\n\nfunction getErrMsg(e: unknown): string {\n  const anyErr = e as any;\n  return (\n    anyErr?.data?.error?.message ||\n    anyErr?.data?.message ||\n    anyErr?.message ||\n    'İşlem başarısız'\n  );\n}\n\nexport default function AdminEmailTemplatesClient() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  // Locale management\n  const { localeOptions, defaultLocaleFromDb, coerceLocale, loading: localesLoading } = useAdminLocales();\n\n  const urlLocale = searchParams.get('locale') || '';\n  const initialLocale =\n    urlLocale ||\n    defaultLocaleFromDb ||\n    localeShortClientOr(typeof window !== 'undefined' ? navigator.language : 'de', 'de') ||\n    '';\n\n  const [filters, setFilters] = React.useState<Filters>({\n    search: '',\n    activeFilter: 'all',\n    locale: initialLocale,\n  });\n\n  // Update URL when locale changes\n  React.useEffect(() => {\n    if (!filters.locale) return;\n    const params = new URLSearchParams(searchParams.toString());\n    params.set('locale', filters.locale);\n    router.replace(`?${params.toString()}`, { scroll: false });\n  }, [filters.locale, router, searchParams]);\n\n  // Build query params\n  const queryParams = React.useMemo((): EmailTemplateAdminListQueryParams => {\n    // ✅ Sadece locale normalize et\n    const apiLocale = localeShortClient(filters.locale);\n\n    return {\n      q: filters.search || undefined,\n      is_active:\n        filters.activeFilter === 'active'\n          ? true\n          : filters.activeFilter === 'inactive'\n            ? false\n            : undefined,\n      locale: apiLocale,\n      order_by: 'updated_at',\n      order_dir: 'desc',\n    };\n  }, [filters]);\n\n  // RTK Query\n  const {\n    data: items = [],\n    isLoading,\n    isFetching,\n    refetch,\n  } = useListEmailTemplatesAdminQuery(queryParams);\n\n  const [updateTemplate] = useUpdateEmailTemplateAdminMutation();\n  const [deleteTemplate] = useDeleteEmailTemplateAdminMutation();\n\n  const total = items.length;\n\n  // Delete dialog state\n  const [deleteDialogOpen, setDeleteDialogOpen] = React.useState(false);\n  const [itemToDelete, setItemToDelete] = React.useState<EmailTemplateAdminListItemDto | null>(null);\n\n  const handleSearch = (value: string) => {\n    setFilters((prev) => ({ ...prev, search: value }));\n  };\n\n  const handleActiveFilterChange = (value: string) => {\n    setFilters((prev) => ({ ...prev, activeFilter: value as ActiveFilter }));\n  };\n\n  const handleLocaleChange = (locale: string) => {\n    const coerced = coerceLocale(locale, defaultLocaleFromDb);\n    setFilters((prev) => ({ ...prev, locale: coerced }));\n  };\n\n  const handleToggleActive = async (item: EmailTemplateAdminListItemDto) => {\n    try {\n      await updateTemplate({\n        id: item.id,\n        body: { is_active: !item.is_active },\n      }).unwrap();\n      toast.success(item.is_active ? 'Pasif yapıldı' : 'Aktif yapıldı');\n      refetch();\n    } catch (err) {\n      toast.error(getErrMsg(err));\n    }\n  };\n\n  const handleEdit = (item: EmailTemplateAdminListItemDto) => {\n    router.push(`/admin/email-templates/${item.id}`);\n  };\n\n  const handleDeleteClick = (item: EmailTemplateAdminListItemDto) => {\n    setItemToDelete(item);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!itemToDelete) return;\n\n    try {\n      await deleteTemplate({ id: itemToDelete.id }).unwrap();\n      toast.success('Kayıt silindi');\n      setDeleteDialogOpen(false);\n      setItemToDelete(null);\n      refetch();\n    } catch (err) {\n      toast.error(getErrMsg(err));\n    }\n  };\n\n  const busy = isLoading;\n\n  return (\n    <>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between\">\n              <div className=\"space-y-1.5\">\n                <CardTitle>Email Templates</CardTitle>\n                <CardDescription>\n                  Email şablonlarını yönetin. Her şablon farklı dillerde içerik içerebilir.\n                </CardDescription>\n              </div>\n              <Button\n                onClick={() => router.push('/admin/email-templates/new')}\n                disabled={busy}\n                className=\"gap-2\"\n              >\n                <Plus className=\"size-4\" />\n                Yeni Ekle\n              </Button>\n            </div>\n          </CardHeader>\n\n          <CardContent className=\"space-y-4\">\n            {/* Filters */}\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n              {/* Search */}\n              <div className=\"space-y-2 sm:col-span-2\">\n                <Label htmlFor=\"search\" className=\"text-sm\">\n                  Ara\n                </Label>\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground\" />\n                  <Input\n                    id=\"search\"\n                    placeholder=\"Template key, name, subject...\"\n                    value={filters.search}\n                    onChange={(e) => handleSearch(e.target.value)}\n                    disabled={busy}\n                    className=\"pl-9\"\n                  />\n                </div>\n              </div>\n\n              {/* Active Filter */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"activeFilter\" className=\"text-sm\">\n                  Durum\n                </Label>\n                <Select\n                  value={filters.activeFilter}\n                  onValueChange={handleActiveFilterChange}\n                  disabled={busy}\n                >\n                  <SelectTrigger id=\"activeFilter\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tümü</SelectItem>\n                    <SelectItem value=\"active\">Aktif</SelectItem>\n                    <SelectItem value=\"inactive\">Pasif</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Locale */}\n              <div>\n                <AdminLocaleSelect\n                  value={filters.locale}\n                  onChange={handleLocaleChange}\n                  options={localeOptions}\n                  loading={localesLoading}\n                  disabled={busy}\n                />\n              </div>\n            </div>\n\n            {/* Refresh */}\n            <div className=\"flex items-center justify-between gap-2\">\n              <div className=\"text-sm text-muted-foreground\">\n                Toplam <strong>{total}</strong> kayıt\n              </div>\n              <Button\n                variant=\"outline\"\n                onClick={() => refetch()}\n                disabled={busy}\n                className=\"gap-2\"\n              >\n                <RefreshCcw\n                  className={cn('size-4', isFetching && 'animate-spin')}\n                />\n                Yenile\n              </Button>\n            </div>\n\n            {isFetching && (\n              <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n                <Loader2 className=\"size-4 animate-spin\" />\n                <span>Yükleniyor...</span>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Table (Desktop) */}\n        <Card className=\"hidden xl:block\">\n          <CardContent className=\"p-0\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Template Key</TableHead>\n                  <TableHead>Name & Subject</TableHead>\n                  <TableHead className=\"w-48\">Variables</TableHead>\n                  <TableHead className=\"w-24 text-center\">Aktif</TableHead>\n                  <TableHead className=\"w-32\">Locale</TableHead>\n                  <TableHead className=\"w-44\">Tarih</TableHead>\n                  <TableHead className=\"w-40 text-right\">İşlemler</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {isLoading ? (\n                  <TableRow>\n                    <TableCell colSpan={7} className=\"h-24 text-center\">\n                      <div className=\"flex items-center justify-center gap-2\">\n                        <Loader2 className=\"size-5 animate-spin\" />\n                        <span>Yükleniyor...</span>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ) : items.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={7} className=\"h-24 text-center\">\n                      Kayıt bulunamadı.\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  items.map((item) => (\n                    <TableRow key={`${item.id}-${item.template_key}-${item.locale}`}>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <Code2 className=\"size-4 text-muted-foreground\" />\n                          <code className=\"rounded bg-muted px-2 py-1 text-xs font-medium\">\n                            {item.template_key || '-'}\n                          </code>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"space-y-1\">\n                          <div className=\"font-medium\">{item.template_name || '-'}</div>\n                          <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                            <Mail className=\"size-3\" />\n                            <span>{truncate(item.subject, 40)}</span>\n                          </div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {item.detected_variables && item.detected_variables.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {item.detected_variables.slice(0, 3).map((v) => (\n                              <Badge key={v} variant=\"secondary\" className=\"text-[10px]\">\n                                {v}\n                              </Badge>\n                            ))}\n                            {item.detected_variables.length > 3 && (\n                              <Badge variant=\"secondary\" className=\"text-[10px]\">\n                                +{item.detected_variables.length - 3}\n                              </Badge>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-xs text-muted-foreground\">-</span>\n                        )}\n                      </TableCell>\n                      <TableCell className=\"text-center\">\n                        <Switch\n                          checked={item.is_active}\n                          onCheckedChange={() => handleToggleActive(item)}\n                          disabled={busy}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        {item.locale ? (\n                          <Badge variant=\"outline\">{item.locale}</Badge>\n                        ) : (\n                          <span className=\"text-muted-foreground\">-</span>\n                        )}\n                      </TableCell>\n                      <TableCell className=\"text-xs text-muted-foreground\">\n                        <div>{fmtDate(item.created_at)}</div>\n                        <div className=\"text-[10px]\">\n                          Güncelleme: {fmtDate(item.updated_at)}\n                        </div>\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex items-center justify-end gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleEdit(item)}\n                            disabled={busy}\n                            className=\"gap-2\"\n                          >\n                            <Pencil className=\"size-3.5\" />\n                            Düzenle\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleDeleteClick(item)}\n                            disabled={busy}\n                            className=\"gap-2\"\n                          >\n                            <Trash2 className=\"size-3.5\" />\n                            Sil\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n\n        {/* Cards (Mobile) */}\n        <div className=\"space-y-4 xl:hidden\">\n          {isLoading ? (\n            <Card>\n              <CardContent className=\"flex items-center justify-center py-12\">\n                <div className=\"flex items-center gap-2\">\n                  <Loader2 className=\"size-5 animate-spin\" />\n                  <span>Yükleniyor...</span>\n                </div>\n              </CardContent>\n            </Card>\n          ) : items.length === 0 ? (\n            <Card>\n              <CardContent className=\"py-12 text-center text-muted-foreground\">\n                Kayıt bulunamadı.\n              </CardContent>\n            </Card>\n          ) : (\n            items.map((item) => (\n              <Card key={item.id}>\n                <CardContent className=\"space-y-4 pt-6\">\n                  {/* Header */}\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <Code2 className=\"size-4 text-muted-foreground\" />\n                        <code className=\"rounded bg-muted px-2 py-1 text-xs font-medium\">\n                          {item.template_key || '-'}\n                        </code>\n                      </div>\n                      {item.locale && <Badge variant=\"outline\">{item.locale}</Badge>}\n                      <h3 className=\"font-semibold\">{item.template_name || '-'}</h3>\n                      <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                        <Mail className=\"size-3\" />\n                        <span>{truncate(item.subject, 50)}</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Label className=\"text-sm\">Aktif</Label>\n                      <Switch\n                        checked={item.is_active}\n                        onCheckedChange={() => handleToggleActive(item)}\n                        disabled={busy}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Variables */}\n                  {item.detected_variables && item.detected_variables.length > 0 && (\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-xs text-muted-foreground\">Variables</Label>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {item.detected_variables.map((v) => (\n                          <Badge key={v} variant=\"secondary\" className=\"text-[10px]\">\n                            {v}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Dates */}\n                  <div className=\"space-y-1 text-xs text-muted-foreground\">\n                    <div>Oluşturma: {fmtDate(item.created_at)}</div>\n                    <div>Güncelleme: {fmtDate(item.updated_at)}</div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleEdit(item)}\n                      disabled={busy}\n                      className=\"flex-1 gap-2\"\n                    >\n                      <Pencil className=\"size-3.5\" />\n                      Düzenle\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleDeleteClick(item)}\n                      disabled={busy}\n                      className=\"flex-1 gap-2\"\n                    >\n                      <Trash2 className=\"size-3.5\" />\n                      Sil\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Delete Dialog */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Silmek istediğinizden emin misiniz?</AlertDialogTitle>\n            <AlertDialogDescription>\n              <strong>{itemToDelete?.template_key || 'Bu şablon'}</strong> silinecek. Bu işlem geri alınamaz.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>İptal</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDeleteConfirm}>Sil</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}