module.exports=[91823,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(58501);var e=a.i(85328),f=a.i(28551),g=a.i(23292),h=a.i(99570),i=a.i(91119),j=a.i(86304),k=a.i(79755);function l({mode:a,title:c,loading:d,saving:e,onBack:f,onSave:g}){let l=(0,k.useAdminT)(),m=c||l("create"===a?"admin.slider.formHeader.createTitle":"admin.slider.formHeader.editTitle");return(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(i.CardTitle,{className:"text-base",children:m}),(0,b.jsx)(i.CardDescription,{children:l("admin.slider.formHeader.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[d?(0,b.jsx)(j.Badge,{variant:"secondary",children:l("admin.slider.formHeader.loading")}):null,e?(0,b.jsx)(j.Badge,{variant:"secondary",children:l("admin.slider.formHeader.saving")}):null,f?(0,b.jsx)(h.Button,{variant:"outline",onClick:f,disabled:!!d||!!e,children:l("admin.slider.formHeader.backButton")}):null,g?(0,b.jsx)(h.Button,{onClick:g,disabled:!!d||!!e,children:l("create"===a?"admin.slider.formHeader.createButton":"admin.slider.formHeader.saveButton")}):null]})]})}),(0,b.jsx)(i.CardContent,{})]})}var m=a.i(66718),n=a.i(70430),o=a.i(63658),p=a.i(99833);let q=a=>("string"==typeof a?a.trim():"").toLowerCase();function r({mode:a,values:d,onChange:e,onLocaleChange:f,saving:g,localeOptions:h,localesLoading:j}){let l=(0,k.useAdminT)(),r=c.useMemo(()=>(h??[]).map(a=>({value:q(a.value),label:String(a.label||"").trim()})).filter(a=>!!a.value),[h]),s=c.useMemo(()=>{let a=q(d.locale),b=new Set(r.map(a=>a.value));return a&&b.has(a)?a:r?.[0]?.value||""},[d.locale,r]),[t,u]=c.useState(!1);return c.useEffect(()=>{if("create"===a&&!g&&d.name&&!t){let a;e("slug",(a=(d.name||"").trim())?a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/ÃŸ/g,"ss").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"):"")}},[d.name,a,g,t]),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{className:"text-base",children:l("admin.slider.form.contentTitle")})}),(0,b.jsxs)(i.CardContent,{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:l("admin.slider.form.localeLabel")}),(0,b.jsx)("select",{className:"h-10 w-full rounded-md border bg-background px-3 text-sm",disabled:g||!!j||0===r.length,value:s,onChange:a=>f?.(q(a.target.value)),children:r.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},`${a.value}:${a.label}`))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-order",children:l("admin.slider.form.orderLabel")}),(0,b.jsx)(m.Input,{id:"slider-order",type:"number",value:Number(d.display_order)||0,onChange:a=>e("display_order",Number(a.target.value)||0),disabled:g})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:l("admin.slider.form.activeLabel")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:l("admin.slider.form.activeHelp")})]}),(0,b.jsx)(o.Switch,{checked:!!d.is_active,onCheckedChange:a=>e("is_active",!!a),disabled:g})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:l("admin.slider.form.featuredLabel")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:l("admin.slider.form.featuredHelp")})]}),(0,b.jsx)(o.Switch,{checked:!!d.featured,onCheckedChange:a=>e("featured",!!a),disabled:g})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-name",children:l("admin.slider.form.titleLabel")}),(0,b.jsx)(m.Input,{id:"slider-name",value:d.name||"",onChange:a=>e("name",a.target.value),disabled:g})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-slug",children:l("admin.slider.form.slugLabel")}),(0,b.jsx)(m.Input,{id:"slider-slug",value:d.slug||"",onFocus:()=>u(!0),onChange:a=>{u(!0),e("slug",a.target.value)},disabled:g}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:l("admin.slider.form.slugHelp")})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:l("admin.slider.form.descriptionLabel")}),(0,b.jsx)(p.default,{label:"",value:d.description||"",onChange:a=>e("description",String(a||"")),disabled:g,height:"240px"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-btn-text",children:l("admin.slider.form.buttonTextLabel")}),(0,b.jsx)(m.Input,{id:"slider-btn-text",value:d.buttonText||"",onChange:a=>e("buttonText",a.target.value),disabled:g})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-btn-link",children:l("admin.slider.form.buttonLinkLabel")}),(0,b.jsx)(m.Input,{id:"slider-btn-link",value:d.buttonLink||"",onChange:a=>e("buttonLink",a.target.value),disabled:g})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"slider-alt",children:l("admin.slider.form.altLabel")}),(0,b.jsx)(m.Input,{id:"slider-alt",value:d.alt||"",onChange:a=>e("alt",a.target.value),disabled:g})]})]})]})}var s=a.i(56414);let t=a=>String(a??"").trim();function u({metadata:a,locale:e,value:f,disabled:g,onChange:h,folder:i}){let j=(0,d.useRouter)(),l=(0,k.useAdminT)(),m=c.useMemo(()=>{var b={module_key:"slider",...a||{},...e?{locale:t(e).toLowerCase()}:{}};if(!b)return;let c=Object.entries(b).map(([a,b])=>[a,String(b??"").trim()]).filter(([a,b])=>!!a&&!!b);return c.length?Object.fromEntries(c):void 0},[a,e]),n=t(f?.image_url),o=t(f?.alt);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(s.AdminImageUploadField,{label:l("admin.slider.formImage.imageLabel"),helperText:(0,b.jsx)(b.Fragment,{children:l("admin.slider.formImage.imageHelp")}),bucket:"public",folder:i||"slider",metadata:m,value:n,onChange:a=>h({image_url:t(a)}),disabled:!!g,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>j.push("/admin/storage")}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:l("admin.slider.formImage.altLabel")}),(0,b.jsx)("input",{className:"h-10 w-full rounded-md border bg-background px-3 text-sm",value:o,onChange:a=>h({alt:a.target.value}),disabled:!!g,placeholder:l("admin.slider.formImage.altPlaceholder")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:l("admin.slider.formImage.altHelp")})]})]})}var v=a.i(1229);function w(a){let c=(0,k.useAdminT)();return(0,b.jsx)(v.AdminJsonEditor,{value:a.value,disabled:!!a.disabled,onChange:b=>a.onChange(b),label:c("admin.slider.formJson.label"),helperText:c("admin.slider.formJson.helperText")})}let x=a=>null==a?"":String(a).trim(),y=(a,b=0)=>{let c=Number(x(a));return Number.isFinite(c)?c:b};function z(a,b){let c=a||{};return{locale:x(b||c?.locale).toLowerCase()||"",name:x(c.name),slug:x(c.slug),description:x(c.description),image_url:x(c.image_effective_url||c.image_url),alt:x(c.alt),buttonText:x(c.buttonText||c.button_text),buttonLink:x(c.buttonLink||c.button_link),featured:!!c.featured,is_active:!1!==c.is_active,display_order:y(c.display_order,0)}}function A({mode:a,locale:f,localeOptions:j,localesLoading:m,initialData:n,loading:o,onDone:p}){let q=(0,d.useRouter)(),s=(0,k.useAdminT)(),[t,{isLoading:v}]=(0,e.useCreateSliderAdminMutation)(),[A,{isLoading:B}]=(0,e.useUpdateSliderAdminMutation)(),C=v||B,D=o||m||C,[E,F]=c.useState("form"),[G,H]=c.useState(()=>z(n,f));c.useEffect(()=>{H(a=>{let b=z(n,f||a.locale),c=x(a.locale).toLowerCase(),d=new Set((j??[]).map(a=>x(a.value).toLowerCase())),e=c&&d.has(c)?c:x(f).toLowerCase();return{...b,locale:e||b.locale}})},[n,f,j]);let I=(a,b)=>{H(c=>({...c,[a]:b}))},J=async()=>{let b=x(G.locale||f).toLowerCase()?x(G.name)?x(G.slug)?"":s("admin.slider.form.slugRequired"):s("admin.slider.form.titleRequired"):s("admin.slider.form.localeRequired");if(b)return void g.toast.error(b);let c=String(n?.id||""),d={locale:x(G.locale||f).toLowerCase(),name:x(G.name),slug:x(G.slug),description:String(G.description||""),image_url:x(G.image_url)||null,alt:x(G.alt)||null,buttonText:x(G.buttonText)||null,buttonLink:x(G.buttonLink)||null,featured:!!G.featured,is_active:!!G.is_active,display_order:y(G.display_order,0)};try{if("create"===a){let a=[()=>t(d).unwrap(),()=>t({payload:d}).unwrap(),()=>t({data:d}).unwrap()],b=null,c=null;for(let d of a)try{b=await d(),c=null;break}catch(a){c=a}if(c)throw c;let e=String(b?.id||b?.data?.id||"");if(g.toast.success(s("admin.slider.form.created")),e){let a=d.locale,b=a?`/admin/slider/${encodeURIComponent(e)}?locale=${encodeURIComponent(a)}`:`/admin/slider/${encodeURIComponent(e)}`;q.replace(b)}else p?.()}else{if(!c)return void g.toast.error(s("admin.slider.form.idNotFound"));let a=[()=>A({id:c,patch:d}).unwrap(),()=>A({id:c,payload:d}).unwrap(),()=>A({id:c,data:d}).unwrap(),()=>A({sliderId:c,patch:d}).unwrap(),()=>A({sliderId:c,payload:d}).unwrap()],b=null;for(let c of a)try{await c(),b=null;break}catch(a){b=a}if(b)throw b;g.toast.success(s("admin.slider.form.updated")),p?.()}}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||s("admin.slider.form.saveError");g.toast.error(a)}},K="edit"===a?x(n?.name)||s("admin.slider.form.editTitle"):s("admin.slider.form.createTitle"),L=x(G.locale||f).toLowerCase();return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(l,{mode:a,title:K,loading:o||m,saving:C,onBack:p,onSave:J}),(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(h.Button,{type:"button",variant:"form"===E?"default":"outline",onClick:()=>F("form"),disabled:D,children:s("admin.slider.form.formMode")}),(0,b.jsx)(h.Button,{type:"button",variant:"json"===E?"default":"outline",onClick:()=>F("json"),disabled:D,children:s("admin.slider.form.jsonMode")})]}),"json"===E?(0,b.jsx)(w,{value:G,disabled:D,onChange:a=>H(a)}):(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-4",children:(0,b.jsx)(r,{mode:a,values:G,onChange:I,onLocaleChange:a=>{let b=x(a).toLowerCase();b&&H(a=>({...a,locale:b}))},saving:D,localeOptions:j,localesLoading:m})}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)(u,{disabled:D,locale:L,value:{image_url:G.image_url,alt:G.alt},metadata:{module_key:"slider",locale:L,..."edit"===a&&n?.id?{slider_id:String(n.id)}:{},slug:G.slug||G.name||""},onChange:a=>{"string"==typeof a.image_url&&I("image_url",a.image_url),"string"==typeof a.alt&&I("alt",a.alt)}})})]})]})})]})}let B=a=>"string"==typeof a?a.trim().toLowerCase():"";function C(a){let g=(0,d.useRouter)(),h=(0,d.useSearchParams)(),i="edit"===a.mode?String(a.id||"").trim():"",j=h.get("locale"),k=(0,f.useAdminLocales)(),l=!!k?.loading||!!k?.isLoading||!!k?.isFetching,m=B(k?.defaultLocaleFromDb??k?.defaultLocale??k?.default_locale??k?.default??""),n=c.useMemo(()=>(Array.isArray(k?.localeOptions)?k.localeOptions:Array.isArray(k?.locales)?k.locales:Array.isArray(k?.options)?k.options:[]).map(a=>({value:B(a?.value??a?.code??a),label:String(a?.label??a?.name??a?.value??a?.code??a??"").trim()})).filter(a=>!!a.value),[k]),o=c.useMemo(()=>{let a=B(j||""),b=new Set(n.map(a=>a.value));return a&&b.has(a)?a:m&&b.has(m)?m:n?.[0]?.value||""},[j,m,n]),p="edit"!==a.mode||l||!i||!o,{data:q,isLoading:r,isFetching:s,isError:t}=(0,e.useGetSliderAdminQuery)({id:i,locale:o||void 0},{skip:p}),u=l||"edit"===a.mode&&!p&&(r||s);return(0,b.jsx)(A,{mode:a.mode,locale:o,localeOptions:n,localesLoading:l,initialData:"edit"===a.mode?q??null:null,loading:u,onDone:()=>{let a=o||"",b=a?`/admin/slider?locale=${encodeURIComponent(a)}`:"/admin/slider";g.push(b)}})}a.s(["default",()=>C],91823)}];

//# sourceMappingURL=c80d1_%28main%29_admin_%28admin%29_slider__components_admin-slider-detail-client_tsx_b6e165c1._.js.map