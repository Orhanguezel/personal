module.exports=[52388,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(210),g=a.i(14548),h=a.i(28790),i=a.i(28551),j=a.i(90899),k=a.i(30637),l=a.i(79755),m=a.i(99570),n=a.i(86304),o=a.i(91119),p=a.i(66718),q=a.i(70430),r=a.i(29246),s=a.i(75083),t=a.i(5084),u=a.i(15055),v=a.i(80701),w=a.i(1229),x=a.i(99833);let y=a=>"string"==typeof a?a.trim().toLowerCase():"",z=a=>null==a?"":String(a),A=(a,b,c)=>{let d=y(a?.locale_resolved??b??c??"")||y(c)||"";return a?{id:a.id,locale:d,name:z(a.name),slug:z(a.slug),summary:z(a.summary),content:z(a.content),description:z(a.description),material:z(a.material),price:z(a.price),includes:z(a.includes),warranty:z(a.warranty),image_alt:z(a.image_alt),is_active:!!a.is_active,featured:!!a.featured,display_order:Number.isFinite(a.display_order)?String(a.display_order):"0",type:z(a.type)||"other",featured_image:z(a.featured_image),image_url:z(a.image_url),image_asset_id:z(a.image_asset_id),area:z(a.area),duration:z(a.duration),maintenance:z(a.maintenance),season:z(a.season),equipment:z(a.equipment),tags:z(a.tags),meta_title:z(a.meta_title),meta_description:z(a.meta_description),meta_keywords:z(a.meta_keywords),replicate_all_locales:!0,apply_all_locales:!1}:{id:void 0,locale:d,name:"",slug:"",summary:"",content:"",description:"",material:"",price:"",includes:"",warranty:"",image_alt:"",is_active:!0,featured:!1,display_order:"0",type:"other",featured_image:"",image_url:"",image_asset_id:"",area:"",duration:"",maintenance:"",season:"",equipment:"",tags:"",meta_title:"",meta_description:"",meta_keywords:"",replicate_all_locales:!0,apply_all_locales:!1}};var B=a.i(56414);a.i(58501);var C=a.i(27889);let D=a=>String(a??"").trim(),E=a=>{let b=[],c=new Set;for(let d of a){let a=D(d);a&&(c.has(a)||(c.add(a),b.push(a)))}return b},F=({serviceId:a,locale:f,disabled:g,metadata:h,featuredImageValue:i,onFeaturedImageChange:j,onGalleryChange:k})=>{let m=(0,d.useRouter)(),n=(0,l.useAdminT)(),{data:o,isLoading:p,isFetching:q,refetch:r}=(0,C.useListServiceImagesAdminQuery)(a,{skip:!a}),s=c.useMemo(()=>[...o??[]].sort((a,b)=>{let c=Number(a?.display_order??0),d=Number(b?.display_order??0);if(c!==d)return c-d;let e=String(a?.created_at??""),f=String(b?.created_at??"");return e<f?-1:+(e>f)}),[o]),[t,{isLoading:u}]=(0,C.useCreateServiceImageAdminMutation)(),[v,{isLoading:w}]=(0,C.useDeleteServiceImageAdminMutation)(),[x,{isLoading:y}]=(0,C.useUpdateServiceAdminMutation)(),z=c.useMemo(()=>(s??[]).map(a=>D(a?.image_url)).filter(Boolean),[s]),[A,F]=c.useState(z);c.useEffect(()=>{F(z)},[z]);let G=g||p||q||u||w||y,H=async b=>{let c;if(!a)return null;let d=D(b);return d?(c=D(d))&&(s??[]).some(a=>D(a?.image_url)===c)?s??null:await t({serviceId:a,payload:{image_url:d,image_asset_id:null,is_active:!0,display_order:void 0,title:null,alt:null,caption:null,locale:f,replicate_all_locales:!0}}).unwrap():null},I=async b=>{if(!a)return;let c=D(b);if(!c)return;let d=(s??[]).find(a=>D(a?.image_url)===c);if(!d)return;let e=await v({serviceId:a,imageId:d.id}).unwrap();return k?.(e),e},J=async b=>{if(!a)return;let c=D(b);if(!c)return;let d={image_url:c,featured_image:c},e=null;for(let b of[()=>x({id:a,patch:d}).unwrap(),()=>x({serviceId:a,patch:d}).unwrap(),()=>x({id:a,payload:d}).unwrap(),()=>x({serviceId:a,payload:d}).unwrap(),()=>x({id:a,data:d}).unwrap(),()=>x({serviceId:a,data:d}).unwrap()])try{await b();return}catch(a){e=a}throw e},K=a=>{j(D(a))},L=D(i);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(B.AdminImageUploadField,{label:n("admin.services.formImage.coverLabel"),helperText:(0,b.jsxs)(b.Fragment,{children:[n("admin.services.formImage.coverHelperPrefix")," ",(0,b.jsx)("code",{children:"services.image_url"})," ",n("admin.services.formImage.coverHelperField")," ",n("admin.services.formImage.coverHelperSuffix")]}),bucket:"public",folder:"services/cover",metadata:{...h||{},section:"cover"},value:L,onChange:b=>{let c=D(b);K(c),a&&c&&(F(a=>E([c,...a??[]])),(async()=>{try{let a=await H(c);a&&k?.(a),await J(c),await r(),e.toast.success(n("admin.services.formImage.coverSaved"))}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||n("admin.services.formImage.coverSaveError");e.toast.error(a)}})())},disabled:g,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>m.push("/admin/storage")}),a?(0,b.jsx)(B.AdminImageUploadField,{label:n("admin.services.formImage.galleryLabel"),helperText:(0,b.jsxs)(b.Fragment,{children:[n("admin.services.formImage.galleryHelperPrefix")," (",(0,b.jsx)("code",{children:"service_images"}),")."," ",n("admin.services.formImage.galleryHelperSuffix")]}),bucket:"public",folder:"services/gallery",metadata:{...h||{},section:"gallery"},multiple:!0,values:A,onChangeMultiple:b=>{if(!a)return;let c=E((b??[]).map(a=>D(a)));F(c);let d=new Set(z),f=new Set(c),g=c.filter(a=>!d.has(a)),h=z.filter(a=>!f.has(a)),j=D(i),l=h.filter(a=>a!==j);h.length>0&&l.length!==h.length&&(F(a=>E([j,...a??[]])),e.toast.error(n("admin.services.formImage.coverDeleteError"))),g.length>0&&(async()=>{try{let a=null;for(let b of g){let c=await H(b);c&&(a=c)}a&&k?.(a),await r()}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||n("admin.services.formImage.galleryAddError");e.toast.error(a),await r()}})(),l.length>0&&(async()=>{try{for(let a of l)await I(a);await r()}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||n("admin.services.formImage.galleryDeleteError");e.toast.error(a),await r()}})()},onSelectAsCover:b=>{let c=D(b);!c||(K(c),F(a=>E([c,...a??[]])),a&&(async()=>{try{let a=await H(c);a&&k?.(a),await J(c),await r(),e.toast.success(n("admin.services.formImage.coverSaved"))}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||n("admin.services.formImage.coverSaveError");e.toast.error(a)}})())},coverValue:L,disabled:G,openLibraryHref:"/admin/storage",onOpenLibraryClick:()=>m.push("/admin/storage")}):(0,b.jsx)("div",{className:"rounded-md border p-3 text-sm text-muted-foreground",children:n("admin.services.formImage.galleryPlaceholder")})]})};var G=a.i(77262);let H=a=>String(a??"").trim(),I=({mode:a,initialData:d,loading:f,saving:g,locales:h,localesLoading:j,defaultLocale:k,onSubmit:z,onCancel:B,onLocaleChange:C})=>{let D=(0,i.useAdminLocales)(),E=(0,l.useAdminT)(),I=!!D?.loading||!!D?.isLoading||!!D?.isFetching,J=y(D?.defaultLocale??D?.default_locale??D?.default??""),K=c.useMemo(()=>(Array.isArray(D?.locales)?D.locales:Array.isArray(D?.options)?D.options:Array.isArray(D?.localeOptions)?D.localeOptions:[]).map(a=>({value:y(a?.value??a?.code??a),label:String(a?.label??a?.name??a?.value??a?.code??a??"").trim()})).filter(a=>!!a.value).map(a=>({value:a.value,label:a.label||a.value.toUpperCase()})),[D]),L=c.useMemo(()=>y(k||J||K?.[0]?.value||"")||"",[k,J,K]),[M,N]=c.useState(()=>A(d,k,L)),[O,P]=c.useState(!1);c.useEffect(()=>{let a=A(d,k,L),b=H(d?.image_url)||H(d?.featured_image)||"",c=H(a?.image_url)||H(a?.featured_image)||b||"";N({...a,image_url:c,featured_image:c,tags:H(a?.tags)||H(d?.tags),meta_title:H(a?.meta_title)||H(d?.meta_title),meta_description:H(a?.meta_description)||H(d?.meta_description),meta_keywords:H(a?.meta_keywords)||H(d?.meta_keywords)}),P(!1)},[d,k,L]);let Q=f||g,R=y(M.locale||L);c.useEffect(()=>{if(I)return;let a=K.map(a=>a.value),b=y(M.locale),c=(b&&a.includes(b)?b:y(L))||a[0]||"";c&&c!==b&&(N(a=>({...a,locale:c})),C?.(c))},[I,K,L]);let S=c.useMemo(()=>({module_key:"service",locale:R,service_slug:M.slug||M.name||"",...M.id?{service_id:M.id}:{}}),[R,M.slug,M.name,M.id]),{onUpload:T}=(a=>{let[b]=(0,G.useCreateAssetAdminMutation)(),c=(0,l.useAdminT)();return{onUpload:async d=>{try{let e,f=await b({file:d,bucket:"public",folder:"services/content",metadata:(e=a.metadata,Object.fromEntries(Object.entries(e).map(([a,b])=>[a,String(b)])))}).unwrap(),g=f?.url;if(!g)throw Error(c("admin.services.upload.noUrl"));return g}catch(b){let a=b?.data?.error?.message||b?.data?.message||b?.message||c("admin.services.upload.error");return e.toast.error(a),""}}}})({metadata:S}),U=H(M.image_url)||H(M.featured_image),V=Q||I||0===K.length;return(0,b.jsx)("form",{onSubmit:a=>{if(a.preventDefault(),Q)return;let b=y(M.locale||L);if(!b)return void e.toast.error(E("admin.services.form.localeRequired"));if(!M.name.trim()||!M.slug.trim())return void e.toast.error(E("admin.services.form.nameSlugRequired"));let c=H(M.image_url)||H(M.featured_image);z({...M,locale:b,name:M.name.trim(),slug:M.slug.trim(),description:String(M.description||""),featured:!!M.featured,is_active:!!M.is_active,display_order:((a,b=0)=>{let c=Number(String(a??"").trim());return Number.isFinite(c)?c:b})(M.display_order,0),image_url:H(c)||null,featured_image:H(c)||null,image_asset_id:H(M.image_asset_id)||null,image_alt:H(M.image_alt)||null,material:H(M.material)||null,price:H(M.price)||null,includes:H(M.includes)||null,warranty:H(M.warranty)||null,tags:H(M.tags)||null,meta_title:H(M.meta_title)||null,meta_description:H(M.meta_description)||null,meta_keywords:H(M.meta_keywords)||null,area:H(M.area)||null,duration:H(M.duration)||null,maintenance:H(M.maintenance)||null,season:H(M.season)||null,equipment:H(M.equipment)||null})},className:"space-y-4",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(o.CardTitle,{className:"text-base",children:"create"===a?E("admin.services.form.createTitle"):E("admin.services.form.editTitle")}),(0,b.jsx)(o.CardDescription,{children:E("admin.services.form.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:justify-end",children:[f?(0,b.jsx)(n.Badge,{variant:"secondary",children:E("admin.services.form.loading")}):null,B?(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:B,disabled:Q,children:E("admin.services.form.backButton")}):null,(0,b.jsx)(m.Button,{type:"submit",disabled:Q,children:g?"create"===a?E("admin.services.form.creating"):E("admin.services.form.saving"):"create"===a?E("admin.services.form.createButton"):E("admin.services.form.saveButton")})]})]})}),(0,b.jsx)(o.CardContent,{className:"space-y-4",children:(0,b.jsxs)(s.Tabs,{defaultValue:"form",children:[(0,b.jsxs)(s.TabsList,{children:[(0,b.jsx)(s.TabsTrigger,{value:"form",children:E("admin.services.form.formTab")}),(0,b.jsx)(s.TabsTrigger,{value:"json",children:E("admin.services.form.jsonTab")})]}),(0,b.jsx)(s.TabsContent,{value:"json",className:"mt-4",children:(0,b.jsx)(w.AdminJsonEditor,{value:M,disabled:Q,onChange:a=>N(a),label:E("admin.services.form.jsonLabel"),helperText:E("admin.services.form.jsonHelperText")})}),(0,b.jsx)(s.TabsContent,{value:"form",className:"mt-4",children:(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,b.jsxs)("div",{className:"space-y-4 lg:col-span-8",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.localeLabel")}),(0,b.jsxs)(v.Select,{value:y(M.locale)||"",onValueChange:a=>{let b=y(a),c=K.map(a=>a.value),d=b&&c.includes(b)?b:y(L);d?(N(a=>({...a,locale:d})),C?.(d)):e.toast.error(E("admin.services.form.localeRequired"))},disabled:V,children:[(0,b.jsx)(v.SelectTrigger,{children:(0,b.jsx)(v.SelectValue,{placeholder:E("admin.services.form.localePlaceholder")})}),(0,b.jsx)(v.SelectContent,{children:K.map(a=>(0,b.jsx)(v.SelectItem,{value:a.value,children:a.label},`${a.value}:${a.label}`))})]}),I||0!==K.length?null:(0,b.jsx)("p",{className:"text-xs text-destructive",children:E("admin.services.form.localeEmptyError")})]}),(0,b.jsxs)("div",{className:"flex items-end gap-4 md:col-span-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Checkbox,{id:"svc_is_active",checked:!!M.is_active,onCheckedChange:a=>N(b=>({...b,is_active:!0===a})),disabled:Q}),(0,b.jsx)(q.Label,{htmlFor:"svc_is_active",children:E("admin.services.form.activeLabel")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Checkbox,{id:"svc_featured",checked:!!M.featured,onCheckedChange:a=>N(b=>({...b,featured:!0===a})),disabled:Q}),(0,b.jsx)(q.Label,{htmlFor:"svc_featured",children:E("admin.services.form.featuredLabel")})]})]})]}),(0,b.jsx)(t.Separator,{}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.nameLabel")}),(0,b.jsx)(p.Input,{value:M.name,onChange:a=>{let b=a.target.value;N(a=>{let c={...a,name:b};return O||(c.slug=(a=>{if(!a)return"";let b=a.trim(),c={ç:"c",Ç:"c",ğ:"g",Ğ:"g",ı:"i",I:"i",İ:"i",ö:"o",Ö:"o",ş:"s",Ş:"s",ü:"u",Ü:"u"};return(b=(b=b.split("").map(a=>c[a]??a).join("")).replace(/ß/g,"ss").replace(/ẞ/g,"ss")).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")})(b)),c})},disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.slugLabel")}),(0,b.jsx)(p.Input,{value:M.slug,onFocus:()=>P(!0),onChange:a=>{P(!0),N(b=>({...b,slug:a.target.value}))},disabled:Q})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.descriptionLabel")}),(0,b.jsx)(x.default,{label:"",value:M.description||"",onChange:a=>N(b=>({...b,description:a})),disabled:Q,height:"280px",onUploadImage:T})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.materialLabel")}),(0,b.jsx)(p.Input,{value:M.material,onChange:a=>N(b=>({...b,material:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.priceLabel")}),(0,b.jsx)(p.Input,{value:M.price,onChange:a=>N(b=>({...b,price:a.target.value})),disabled:Q})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.includesLabel")}),(0,b.jsx)(r.Textarea,{rows:2,value:M.includes,onChange:a=>N(b=>({...b,includes:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.warrantyLabel")}),(0,b.jsx)(r.Textarea,{rows:2,value:M.warranty,onChange:a=>N(b=>({...b,warranty:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{children:[E("admin.services.form.tagsLabel")," ",(0,b.jsx)("span",{className:"text-muted-foreground",children:E("admin.services.form.tagsHelp")})]}),(0,b.jsx)(p.Input,{value:M.tags,onChange:a=>N(b=>({...b,tags:a.target.value})),disabled:Q,placeholder:E("admin.services.form.tagsPlaceholder")})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.metaTitleLabel")}),(0,b.jsx)(p.Input,{value:M.meta_title,onChange:a=>N(b=>({...b,meta_title:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.metaKeywordsLabel")}),(0,b.jsx)(p.Input,{value:M.meta_keywords,onChange:a=>N(b=>({...b,meta_keywords:a.target.value})),disabled:Q})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.metaDescriptionLabel")}),(0,b.jsx)(r.Textarea,{rows:2,value:M.meta_description,onChange:a=>N(b=>({...b,meta_description:a.target.value})),disabled:Q})]}),(0,b.jsx)(t.Separator,{}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.areaLabel")}),(0,b.jsx)(p.Input,{value:M.area,onChange:a=>N(b=>({...b,area:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.durationLabel")}),(0,b.jsx)(p.Input,{value:M.duration,onChange:a=>N(b=>({...b,duration:a.target.value})),disabled:Q})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.maintenanceLabel")}),(0,b.jsx)(p.Input,{value:M.maintenance,onChange:a=>N(b=>({...b,maintenance:a.target.value})),disabled:Q})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.seasonLabel")}),(0,b.jsx)(p.Input,{value:M.season,onChange:a=>N(b=>({...b,season:a.target.value})),disabled:Q})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.equipmentLabel")}),(0,b.jsx)(p.Input,{value:M.equipment,onChange:a=>N(b=>({...b,equipment:a.target.value})),disabled:Q})]})]}),(0,b.jsxs)("div",{className:"space-y-4 lg:col-span-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.displayOrderLabel")}),(0,b.jsx)(p.Input,{type:"number",min:0,value:M.display_order,onChange:a=>N(b=>({...b,display_order:a.target.value})),disabled:Q})]}),(0,b.jsx)(F,{serviceId:M.id,locale:R,disabled:Q||!1,metadata:S,featuredImageValue:U,onFeaturedImageChange:a=>{let b=H(a);N(a=>({...a,image_url:b,featured_image:b}))}}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:E("admin.services.form.imageAltLabel")}),(0,b.jsx)(p.Input,{value:M.image_alt,onChange:a=>N(b=>({...b,image_alt:a.target.value})),disabled:Q})]}),(0,b.jsx)(t.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:E("admin.services.form.multiLocaleTitle")}),(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(u.Checkbox,{id:"svc_replicate_all",checked:!!M.replicate_all_locales,onCheckedChange:a=>N(b=>({...b,replicate_all_locales:!0===a})),disabled:Q}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(q.Label,{htmlFor:"svc_replicate_all",className:"leading-none",children:E("admin.services.form.replicateAllLocales")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,b.jsx)("code",{children:"replicate_all_locales"})})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(u.Checkbox,{id:"svc_apply_all",checked:!!M.apply_all_locales,onCheckedChange:a=>N(b=>({...b,apply_all_locales:!0===a})),disabled:Q}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(q.Label,{htmlFor:"svc_apply_all",className:"leading-none",children:E("admin.services.form.applyAllLocales")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,b.jsx)("code",{children:"apply_all_locales"})})]})]})]})]})]})})]})})]})})};function J(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a)}function K({id:a}){let p=(0,l.useAdminT)(),q=(0,d.useRouter)(),r=(0,d.useSearchParams)(),s="new"===String(a),{localeOptions:t,defaultLocaleFromDb:u,loading:v,fetching:w}=(0,i.useAdminLocales)(),x=c.useMemo(()=>(0,j.resolveAdminApiLocale)(t,u,"de"),[t,u]),y=c.useMemo(()=>new Set((t??[]).map(a=>(0,k.localeShortClient)(a.value)).filter(Boolean)),[t]),z=c.useMemo(()=>{let a=r?.get("locale");return(0,k.localeShortClient)(a)||""},[r]),[A,B]=c.useState("");c.useEffect(()=>{t&&0!==t.length&&B(a=>{let b=(0,k.localeShortClient)(a),c=(0,k.localeShortClient)(z),d=(0,k.localeShortClientOr)(x,"de"),e=a=>!!a&&(0===y.size||y.has(a));return b&&e(b)?b:c&&e(c)?c:d&&e(d)?d:(0,k.localeShortClient)(t?.[0]?.value)||"de"})},[t,y,z,x]);let D=c.useMemo(()=>{let a=(0,k.localeShortClient)(A);return a&&(0===y.size||y.has(a))?a:(0,k.localeShortClientOr)(x,"de")},[A,y,x]);c.useEffect(()=>{let b=(0,k.localeShortClient)(A);if(!b||b===z)return;let c=new URLSearchParams(r?.toString()||"");c.set("locale",b),s?q.replace(`/admin/services/new?${c.toString()}`):q.replace(`/admin/services/${encodeURIComponent(String(a))}?${c.toString()}`)},[A]);let E=!v&&!w,F=(t?.length??0)>0,G=s||!J(String(a||""))||!D,{data:H,isLoading:K,isFetching:L,error:M,refetch:N}=(0,C.useGetServiceAdminQuery)({id:String(a),locale:D},{skip:G}),[O,P]=(0,C.useCreateServiceAdminMutation)(),[Q,R]=(0,C.useUpdateServiceAdminMutation)(),S=v||w||K||L,T=P.isLoading||R.isLoading,U=S||T;function V(){q.push(`/admin/services?locale=${encodeURIComponent(D||"de")}`)}async function W(b){try{let c,d=(c=b.locale||D||x,String(c??"").trim().toLowerCase());if(!d||y.size>0&&!y.has((0,k.localeShortClient)(d)))return void e.toast.error(p("admin.services.formHeader.localeError"));let f={featured:b.featured,is_active:b.is_active,display_order:b.display_order?Number(b.display_order):void 0,featured_image:b.featured_image||null,image_url:b.image_url||null,image_asset_id:b.image_asset_id||null,area:b.area||null,duration:b.duration||null,maintenance:b.maintenance||null,season:b.season||null,equipment:b.equipment||null,locale:d,name:b.name?.trim()||"",slug:b.slug?.trim()||"",description:b.description||void 0,material:b.material||void 0,price:b.price||void 0,includes:b.includes||void 0,warranty:b.warranty||void 0,image_alt:b.image_alt||void 0,tags:b.tags||null,meta_title:b.meta_title||null,meta_description:b.meta_description||null,meta_keywords:b.meta_keywords||null};if(!f.name||!f.slug)return void e.toast.error(p("admin.services.formHeader.nameSlugRequired"));if(s){let a={...f,replicate_all_locales:b.replicate_all_locales},c=await O(a).unwrap(),g=String(c?.id??"").trim();if(!J(g))return void e.toast.error(p("admin.services.formHeader.createdNoId"));e.toast.success(p("admin.services.formHeader.created")),q.replace(`/admin/services/${encodeURIComponent(g)}?locale=${encodeURIComponent((0,k.localeShortClient)(d)||d)}`),q.refresh();return}let g=String(H?.id??a);if(!J(g))return void e.toast.error(p("admin.services.formHeader.idNotFound"));let h={...f,apply_all_locales:b.apply_all_locales};await Q({id:g,patch:h}).unwrap(),e.toast.success(p("admin.services.formHeader.updated"));let i=(0,k.localeShortClient)(d);i&&i!==D&&B(i)}catch(a){e.toast.error(function(a,b){let c=a?.data?.error?.message;if("string"==typeof c&&c.trim())return c;let d=a?.data?.message;if("string"==typeof d&&d.trim())return d;let e=a?.error;return"string"==typeof e&&e.trim()?e:b}(a,p("admin.services.formHeader.defaultError")))}}if(E&&!F)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:p("admin.services.formHeader.noLocalesTitle")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:p("admin.services.formHeader.noLocalesDescription")})]}),(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"flex items-center justify-between pt-6",children:(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>q.push("/admin/site-settings"),children:p("admin.services.formHeader.goToSettings")})})})]});if(!s&&!J(String(a||"")))return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:p("admin.services.formHeader.invalidIdTitle")}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[p("admin.services.formHeader.invalidIdDescription")," ",(0,b.jsx)("code",{className:"wrap-break-word",children:String(a||"-")})]})]}),(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"flex items-center justify-between pt-6",children:(0,b.jsxs)(m.Button,{variant:"outline",onClick:V,children:[(0,b.jsx)(f.ArrowLeft,{className:"mr-2 size-4"}),p("admin.services.formHeader.backToList")]})})})]});if(!s&&!S&&!H&&M)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:p("admin.services.formHeader.notFoundTitle")}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[p("admin.services.formHeader.notFoundDescription")," ",(0,b.jsx)("code",{className:"wrap-break-word",children:String(a)})]})]}),(0,b.jsx)(o.Card,{children:(0,b.jsxs)(o.CardContent,{className:"flex items-center justify-between pt-6",children:[(0,b.jsxs)(m.Button,{variant:"outline",onClick:V,children:[(0,b.jsx)(f.ArrowLeft,{className:"mr-2 size-4"}),p("admin.services.formHeader.backToList")]}),(0,b.jsxs)(m.Button,{variant:"outline",onClick:()=>N(),children:[(0,b.jsx)(h.RefreshCcw,{className:"mr-2 size-4"}),p("admin.services.formHeader.retryButton")]})]})})]});let X=s?p("admin.services.formHeader.createTitle"):H?.name||p("admin.services.formHeader.editTitle");return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(m.Button,{variant:"outline",onClick:()=>q.back(),disabled:U,children:[(0,b.jsx)(f.ArrowLeft,{className:"mr-2 size-4"}),p("admin.services.formHeader.backButton")]}),(0,b.jsx)("h1",{className:"text-lg font-semibold",children:X})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:p("admin.services.formHeader.description")}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:p("admin.services.formHeader.activeLocale")}),(0,b.jsx)(n.Badge,{variant:"secondary",children:D||"-"}),s?(0,b.jsx)(n.Badge,{children:"CREATE"}):(0,b.jsx)(n.Badge,{variant:"secondary",children:"EDIT"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:V,disabled:U,children:p("admin.services.formHeader.cancelButton")}),(0,b.jsxs)(m.Button,{onClick:()=>document.getElementById("service-form-submit")?.click?.(),disabled:U,children:[(0,b.jsx)(g.Save,{className:"mr-2 size-4"}),p("admin.services.formHeader.saveButton")]})]})]}),(0,b.jsx)(I,{mode:s?"create":"edit",initialData:!s&&H?H:void 0,loading:S,saving:T,locales:t??[],localesLoading:v||w,defaultLocale:D||x||"de",onSubmit:W,onCancel:V,onLocaleChange:a=>B((0,k.localeShortClientOr)(a,D||"de"))})]})}a.s(["default",()=>K],52388)}];

//# sourceMappingURL=6457b_admin_%28admin%29_services__components_admin-services-detail-client_tsx_7305fc9a._.js.map