module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(76306),d=a.i(187),e=a.i(68114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},16679,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292),e=a.i(38246),f=a.i(86304),g=a.i(99570),h=a.i(91119),i=a.i(66718),j=a.i(70430),k=a.i(80701);a.i(34658);var l=a.i(9348);let m=({filters:a,total:c,loading:d,onFiltersChange:m,onRefresh:n})=>(0,b.jsxs)(h.Card,{className:"mb-4",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{children:"Müsaitlik Yönetimi"}),(0,b.jsx)(h.CardDescription,{children:"Kaynakları (therapist/oda/masa vb.) ve haftalık çalışma saatlerini yönet."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[d?(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:"Yükleniyor..."}):null,n?(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:n,children:"Yenile"}):null,(0,b.jsx)(g.Button,{asChild:!0,size:"sm",children:(0,b.jsx)(e.default,{href:"/admin/availability/new",children:"Yeni Kaynak"})})]})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Ara (ad / referans)"}),(0,b.jsx)(i.Input,{type:"search",placeholder:"Örn: Anna, ref:room-2",value:a.q,onChange:b=>m({...a,q:b.target.value})}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Referans aramak için ",(0,b.jsx)("code",{children:"ref:"})," kullanabilirsin."]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Tür"}),(0,b.jsxs)(k.Select,{value:a.type,onValueChange:b=>m({...a,type:b}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:l.RESOURCE_TYPE_FILTER_OPTIONS.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value||"all"))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Durum"}),(0,b.jsxs)(k.Select,{value:a.status,onValueChange:b=>m({...a,status:b}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"Hepsi"}),(0,b.jsx)(k.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(k.SelectItem,{value:"inactive",children:"Pasif"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Haftalık çalışma saatleri, plan/slot üretiminin kaynağıdır. Gün iptali (override-day) rezervasyonu kapatır."}),(0,b.jsxs)(f.Badge,{variant:"outline",children:["Toplam: ",c]})]})]})]});var n=a.i(6015);a.i(58501);var o=a.i(52205);let p=a=>null==a?"":String(a),q=a=>{if(!a)return"-";let b=a instanceof Date?a:new Date(a);return Number.isNaN(b.getTime())?p(a):b.toLocaleString()},r=({items:a,loading:i})=>{let j=(0,c.useMemo)(()=>a??[],[a]),k=j.length>0,[m,{isLoading:r}]=(0,o.useDeleteResourceAdminMutation)(),s=i||r,t=async a=>{if(window.confirm(`Bu kaynağı silmek \xfczeresin.

Ad: ${a.title??"(ad yok)"}
T\xfcr: ${(0,l.resourceTypeLabel)(a.type)}
Referans: ${a.external_ref_id?String(a.external_ref_id):"-"}

Devam etmek istiyor musun?`))try{await m(a.id).unwrap(),d.toast.success("Kaynak silindi.")}catch(a){d.toast.error(a?.data?.error?.message||a?.message||"Silme sırasında hata oluştu.")}},u=a=>(0,l.toActiveBool)(a.is_active)?(0,b.jsx)(f.Badge,{className:"bg-emerald-100 text-emerald-700",children:"Aktif"}):(0,b.jsx)(f.Badge,{variant:"secondary",children:"Pasif"}),v=(0,c.useMemo)(()=>j.map(a=>({...a,_created:q(a.created_at),_updated:q(a.updated_at),_typeLabel:(0,l.resourceTypeLabel)(a.type),_refFull:a.external_ref_id?String(a.external_ref_id):"",_refShort:a.external_ref_id?((a,b=8,c=4)=>{let d=String(a||"").trim();return d?d.length<=b+c+3?d:`${d.slice(0,b)}...${d.slice(-c)}`:""})(String(a.external_ref_id)):""})),[j]);return(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsx)(h.CardTitle,{className:"text-base",children:"Kaynaklar"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[s?(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:"İşlem yapılıyor..."}):null,(0,b.jsxs)(f.Badge,{variant:"outline",children:["Toplam: ",j.length]})]})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[k?null:(0,b.jsx)("div",{className:"rounded-md border border-muted bg-muted/40 px-3 py-2",children:i?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Yükleniyor..."}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Henüz kayıt yok."})}),k?(0,b.jsx)("div",{className:"space-y-3 md:hidden",children:v.map((a,c)=>(0,b.jsx)("div",{className:"rounded-md border p-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["#",c+1]}),(0,b.jsx)("div",{className:"text-sm font-semibold truncate",title:p(a.title),children:a.title||(0,b.jsx)("span",{className:"text-muted-foreground",children:"(ad yok)"})}),a._refFull?(0,b.jsxs)("div",{className:"text-xs text-muted-foreground truncate",title:a._refFull,children:["Referans: ",(0,b.jsx)("code",{children:a._refShort})]}):(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"(referans yok)"}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"outline",children:a._typeLabel}),u(a)]}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Güncellendi: ",a._updated]}),(0,b.jsxs)("div",{children:["Oluşturma: ",a._created]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(g.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(e.default,{href:`/admin/availability/${encodeURIComponent(a.id)}`,children:"Yönet"})}),(0,b.jsx)(g.Button,{type:"button",variant:"destructive",size:"sm",disabled:s,onClick:()=>t(a),children:"Sil"})]})]})},a.id))}):null,k?(0,b.jsx)("div",{className:"hidden md:block",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(n.Table,{children:[(0,b.jsx)(n.TableHeader,{children:(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableHead,{className:"w-[56px]",children:"#"}),(0,b.jsx)(n.TableHead,{children:"Ad"}),(0,b.jsx)(n.TableHead,{children:"Tür"}),(0,b.jsx)(n.TableHead,{children:"Durum"}),(0,b.jsx)(n.TableHead,{children:"Güncellendi"}),(0,b.jsx)(n.TableHead,{className:"text-right",children:"İşlemler"})]})}),(0,b.jsx)(n.TableBody,{children:v.map((a,c)=>(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableCell,{className:"text-muted-foreground",children:c+1}),(0,b.jsx)(n.TableCell,{className:"min-w-[220px]",children:(0,b.jsx)("div",{className:"text-sm font-semibold truncate",title:p(a.title),children:a.title||(0,b.jsx)("span",{className:"text-muted-foreground",children:"(ad yok)"})})}),(0,b.jsx)(n.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",children:a._typeLabel})}),(0,b.jsx)(n.TableCell,{children:u(a)}),(0,b.jsxs)(n.TableCell,{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("div",{title:a._updated,children:a._updated}),(0,b.jsxs)("div",{title:a._created,children:["Oluşturma: ",a._created]})]}),(0,b.jsx)(n.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"inline-flex gap-2",children:[(0,b.jsx)(g.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(e.default,{href:`/admin/availability/${encodeURIComponent(a.id)}`,children:"Yönet"})}),(0,b.jsx)(g.Button,{type:"button",variant:"destructive",size:"sm",disabled:s,onClick:()=>t(a),children:"Sil"})]})})]},a.id))})]})})}):null]})]})},s={q:"",type:"",status:"all"};function t(){let[a,e]=c.useState(s),f=c.useMemo(()=>{let b=function(a){let b=String(a??"").trim();if(!b)return{};let c=b.toLowerCase();if(c.startsWith("ref:")||c.startsWith("ref=")){let a=b.slice(4).trim();return a?{external_ref_id:a}:{}}return{q:b}}(a.q);return{q:b.q,external_ref_id:b.external_ref_id,type:a.type||void 0,is_active:"all"===a.status?void 0:"active"===a.status,limit:200,offset:0,sort:"updated_at",order:"desc"}},[a]),g=(0,o.useListResourcesAdminQuery)(f,{refetchOnMountOrArgChange:!0}),h=g.isLoading||g.isFetching,i=(g.data??[]).length;return c.useEffect(()=>{g.isError&&d.toast.error(function(a){let b=a?.data?.error?.message;if("string"==typeof b&&b.trim())return b;let c=a?.data?.error;if("string"==typeof c&&c.trim())return c;let d=a?.data?.message;if("string"==typeof d&&d.trim())return d;let e=a?.error;return"string"==typeof e&&e.trim()?e:"İşlem başarısız. Lütfen tekrar deneyin."}(g.error))},[g.isError,g.error]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(m,{filters:a,total:i,loading:h,onFiltersChange:e,onRefresh:()=>g.refetch()}),(0,b.jsx)(r,{items:g.data,loading:h})]})}a.s(["default",()=>t],16679)}];

//# sourceMappingURL=src_fe2247ee._.js.map