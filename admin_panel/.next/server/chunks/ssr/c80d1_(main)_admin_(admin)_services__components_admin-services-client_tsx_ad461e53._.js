module.exports=[73017,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(15618),g=a.i(28790),h=a.i(95490),i=a.i(85668),j=a.i(14548),k=a.i(87532),l=a.i(81560),m=a.i(99464),n=a.i(28551),o=a.i(90899),p=a.i(30637),q=a.i(79755),r=a.i(68114),s=a.i(99570),t=a.i(66718),u=a.i(70430),v=a.i(86304),w=a.i(63658),x=a.i(91119),y=a.i(80701),z=a.i(6015);a.i(58501);var A=a.i(27889);function B(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a)}function C(){let a=(0,q.useAdminT)(),C=(0,d.useRouter)(),D=(0,d.useSearchParams)(),{localeOptions:E,defaultLocaleFromDb:F,loading:G,fetching:H}=(0,n.useAdminLocales)(),I=c.useMemo(()=>(0,o.resolveAdminApiLocale)(E,F,"de"),[E,F]),J=c.useMemo(()=>{let a=D?.get("locale");return(0,p.localeShortClient)(a)||""},[D]),[K,L]=c.useState({search:"",publishedFilter:"all",locale:"",featuredOnly:!1});c.useEffect(()=>{E&&0!==E.length&&L(a=>{let b=(0,p.localeShortClient)(a.locale),c=(0,p.localeShortClient)(J),d=(0,p.localeShortClientOr)(I,"de"),e=a=>!!a&&(E??[]).some(b=>(0,p.localeShortClient)(b.value)===a);return b&&e(b)?a:c&&e(c)?{...a,locale:c}:d&&e(d)?{...a,locale:d}:{...a,locale:(0,p.localeShortClient)(E?.[0]?.value)||"de"}})},[E,J,I]);let M=c.useMemo(()=>(0,p.localeShortClient)(K.locale)||I,[K.locale,I]);c.useEffect(()=>{let a=(0,p.localeShortClient)(K.locale);if(!a||a===J)return;let b=new URLSearchParams(D?.toString()||"");b.set("locale",a),C.replace(`/admin/services?${b.toString()}`)},[K.locale]);let N=c.useMemo(()=>{if("all"!==K.publishedFilter)return+("active"===K.publishedFilter)},[K.publishedFilter]),O=c.useMemo(()=>({q:K.search.trim()||void 0,locale:M||void 0,is_active:N,featured:K.featuredOnly?1:void 0,limit:200,offset:0}),[K.search,M,N,K.featuredOnly]),P=(0,A.useListServicesAdminQuery)(O,{refetchOnMountOrArgChange:!0}),Q=c.useMemo(()=>P.data?.items??[],[P.data]),R=c.useMemo(()=>{let a=P.data?.total;return"number"==typeof a?a:Q.length},[P.data,Q.length]),[S,T]=c.useState([]);c.useEffect(()=>T(Q),[Q]);let[U,V]=(0,A.useUpdateServiceAdminMutation)(),[W,X]=(0,A.useDeleteServiceAdminMutation)(),[Y,Z]=(0,A.useReorderServicesAdminMutation)(),$=P.isLoading||P.isFetching||G||H||V.isLoading||X.isLoading||Z.isLoading;function _(a,b){T(c=>{if(a<0||b<0||a>=c.length||b>=c.length)return c;let d=c.slice(),[e]=d.splice(a,1);return d.splice(b,0,e),d})}async function aa(){try{let b={items:S.map((a,b)=>({id:a.id,display_order:b}))};await Y(b).unwrap(),e.toast.success(a("admin.services.list.orderSaved")),P.refetch()}catch(b){e.toast.error(b?.data?.error?.message||b?.message||a("admin.services.list.orderSaveError"))}}function ab(a){let b=(0,p.localeShortClientOr)(M,"de");C.push(`/admin/services/${encodeURIComponent(a)}?locale=${encodeURIComponent(b)}`)}async function ac(b,c){let d=String(b?.id??"");if(B(d))try{await U({id:d,patch:{is_active:c}}).unwrap(),e.toast.success(a("admin.services.list.statusUpdated")),T(a=>a.map(a=>a.id===d?{...a,is_active:c}:a))}catch(b){e.toast.error(b?.data?.error?.message||b?.message||a("admin.services.list.statusUpdateError"))}}async function ad(b,c){let d=String(b?.id??"");if(B(d))try{await U({id:d,patch:{featured:c}}).unwrap(),e.toast.success(a("admin.services.list.featuredUpdated")),T(a=>a.map(a=>a.id===d?{...a,featured:c}:a))}catch(b){e.toast.error(b?.data?.error?.message||b?.message||a("admin.services.list.statusUpdateError"))}}async function ae(b){let c=String(b?.id??"");if(B(c)&&window.confirm(a("admin.services.list.deleteConfirm",{name:String(b?.name??"Hizmet")})))try{await W({id:c}).unwrap(),e.toast.success(a("admin.services.list.deleted")),P.refetch()}catch(b){e.toast.error(b?.data?.error?.message||b?.message||a("admin.services.list.deleteError"))}}let af=!$&&(S?.length??0)===0;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:a("admin.services.header.title")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a("admin.services.header.description")})]}),(0,b.jsxs)(x.Card,{children:[(0,b.jsx)(x.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(x.CardTitle,{className:"text-base",children:a("admin.services.header.filterLabel")}),(0,b.jsxs)(x.CardDescription,{children:[a("admin.services.header.totalLabel")," ",(0,b.jsx)("span",{className:"font-medium",children:R})," • ",a("admin.services.header.activeLocale")," ",(0,b.jsx)(v.Badge,{variant:"secondary",children:M||"—"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(s.Button,{onClick:function(){let a=(0,p.localeShortClientOr)(M,"de");C.push(`/admin/services/new?locale=${encodeURIComponent(a)}`)},disabled:$,children:[(0,b.jsx)(f.Plus,{className:"mr-2 size-4"}),a("admin.services.header.createButton")]}),(0,b.jsxs)(s.Button,{variant:"outline",onClick:()=>P.refetch(),disabled:$,children:[(0,b.jsx)(g.RefreshCcw,{className:"mr-2 size-4"}),a("admin.services.header.refreshButton")]})]})]})}),(0,b.jsx)(x.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"q",children:a("admin.services.header.searchLabel")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Search,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(t.Input,{id:"q",value:K.search,onChange:a=>L(b=>({...b,search:a.target.value})),placeholder:a("admin.services.header.searchPlaceholder"),className:"pl-9",disabled:$})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{children:a("admin.services.header.statusLabel")}),(0,b.jsxs)(y.Select,{value:K.publishedFilter,onValueChange:a=>L(b=>({...b,publishedFilter:a})),disabled:$,children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{placeholder:a("admin.services.header.statusAll")})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:a("admin.services.header.statusAll")}),(0,b.jsx)(y.SelectItem,{value:"active",children:a("admin.services.header.statusActive")}),(0,b.jsx)(y.SelectItem,{value:"inactive",children:a("admin.services.header.statusInactive")})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{children:a("admin.services.header.localeLabel")}),(0,b.jsxs)(y.Select,{value:K.locale||"",onValueChange:a=>L(b=>({...b,locale:a})),disabled:$||(E?.length??0)===0,children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{placeholder:a("admin.services.header.localePlaceholder")})}),(0,b.jsx)(y.SelectContent,{children:(E??[]).map(a=>(0,b.jsx)(y.SelectItem,{value:String(a.value),children:String(a.label??a.value)},a.value))})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a("admin.services.header.localeUrlSync")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-6 md:pt-7",children:[(0,b.jsx)(w.Switch,{checked:!!K.featuredOnly,onCheckedChange:a=>L(b=>({...b,featuredOnly:!!a})),disabled:$}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a("admin.services.header.featuredOnly")})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 pt-6 md:pt-7",children:(0,b.jsx)(s.Button,{variant:"outline",onClick:function(){L(a=>({...a,search:"",publishedFilter:"all",featuredOnly:!1}))},disabled:$,children:a("admin.services.header.resetButton")})})]})})]}),(0,b.jsxs)(x.Card,{children:[(0,b.jsx)(x.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(x.CardTitle,{className:"text-base",children:a("admin.services.list.listTitle")}),(0,b.jsx)(x.CardDescription,{children:$?a("admin.services.list.loading"):a("admin.services.list.recordCount",{count:S.length})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(s.Button,{variant:"outline",onClick:aa,disabled:$||0===S.length,children:[(0,b.jsx)(j.Save,{className:"mr-2 size-4"}),a("admin.services.list.saveOrderButton")]})})]})}),(0,b.jsxs)(x.CardContent,{className:"space-y-4",children:[P.isError?(0,b.jsxs)("div",{className:"rounded-md border p-4 text-sm",children:[a("admin.services.list.listLoadError")," ",(0,b.jsx)(s.Button,{variant:"link",className:"px-1",onClick:()=>{e.toast.error(a("admin.services.list.listLoadErrorToast")),P.refetch()},children:a("admin.services.list.retryButton")})]}):null,(0,b.jsx)("div",{className:"hidden rounded-md border md:block",children:(0,b.jsxs)(z.Table,{children:[(0,b.jsx)(z.TableHeader,{children:(0,b.jsxs)(z.TableRow,{children:[(0,b.jsx)(z.TableHead,{children:a("admin.services.list.nameColumn")}),(0,b.jsx)(z.TableHead,{children:a("admin.services.list.slugColumn")}),(0,b.jsx)(z.TableHead,{children:a("admin.services.list.featuredColumn")}),(0,b.jsx)(z.TableHead,{children:a("admin.services.list.statusColumn")}),(0,b.jsx)(z.TableHead,{className:"text-right",children:a("admin.services.list.actionsColumn")})]})}),(0,b.jsxs)(z.TableBody,{children:[S.map((c,d)=>{let e=String(c?.id??""),f=String(c?.name??"").trim()||"—",g=String(c?.slug??"").trim()||"—",j=!!c?.is_active,k=!!c?.featured;return(0,b.jsxs)(z.TableRow,{children:[(0,b.jsx)(z.TableCell,{className:"font-medium",children:f}),(0,b.jsx)(z.TableCell,{className:"wrap-break-word",children:g}),(0,b.jsx)(z.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Switch,{checked:k,onCheckedChange:a=>ad(c,!!a),disabled:$||!B(e)}),(0,b.jsx)(v.Badge,{variant:"secondary",children:k?a("admin.services.list.featuredYes"):a("admin.services.list.featuredNo")})]})}),(0,b.jsx)(z.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Switch,{checked:j,onCheckedChange:a=>ac(c,!!a),disabled:$||!B(e)}),j?(0,b.jsx)(v.Badge,{variant:"secondary",children:a("admin.services.list.activeStatus")}):(0,b.jsx)(v.Badge,{variant:"destructive",children:a("admin.services.list.inactiveStatus")})]})}),(0,b.jsx)(z.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>_(d,d-1),disabled:$||0===d,title:a("admin.services.list.upButton"),children:(0,b.jsx)(h.ArrowUp,{className:"size-4"})}),(0,b.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>_(d,d+1),disabled:$||d===S.length-1,title:a("admin.services.list.downButton"),children:(0,b.jsx)(i.ArrowDown,{className:"size-4"})}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ab(e),disabled:$||!B(e),title:a("admin.services.list.editButton"),children:[(0,b.jsx)(m.Pencil,{className:"mr-2 size-4"}),a("admin.services.list.editButton")]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",className:(0,r.cn)("border-destructive text-destructive hover:text-destructive"),onClick:()=>ae(c),disabled:$||!B(e),title:a("admin.services.list.deleteButton"),children:[(0,b.jsx)(l.Trash2,{className:"mr-2 size-4"}),a("admin.services.list.deleteButton")]})]})})]},e||`${d}`)}),af?(0,b.jsx)(z.TableRow,{children:(0,b.jsx)(z.TableCell,{colSpan:5,className:"py-10 text-center text-muted-foreground",children:a("admin.services.list.noRecords")})}):null]})]})}),(0,b.jsx)("div",{className:"rounded-md border md:hidden",children:(0,b.jsxs)("div",{className:"divide-y",children:[S.map((c,d)=>{let e=String(c?.id??""),f=String(c?.name??"").trim()||"—",g=String(c?.slug??"").trim()||"—",j=!!c?.is_active,k=!!c?.featured;return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("div",{className:"font-medium",children:f}),j?(0,b.jsx)(v.Badge,{variant:"secondary",children:a("admin.services.list.activeStatus")}):(0,b.jsx)(v.Badge,{variant:"destructive",children:a("admin.services.list.inactiveStatus")}),(0,b.jsx)(v.Badge,{variant:"secondary",children:k?a("admin.services.list.featuredBadge"):a("admin.services.list.normalStatus")})]}),(0,b.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a("admin.services.list.slugLabel")})," ",(0,b.jsx)("span",{className:"wrap-break-word",children:g})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a("admin.services.list.featuredMobileLabel")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a("admin.services.list.featuredMobileHelp")})]}),(0,b.jsx)(w.Switch,{checked:k,onCheckedChange:a=>ad(c,!!a),disabled:$||!B(e)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a("admin.services.list.activeMobileLabel")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a("admin.services.list.activeMobileHelp")})]}),(0,b.jsx)(w.Switch,{checked:j,onCheckedChange:a=>ac(c,!!a),disabled:$||!B(e)})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>_(d,d-1),disabled:$||0===d,children:[(0,b.jsx)(h.ArrowUp,{className:"mr-2 size-4"}),a("admin.services.list.upButton")]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>_(d,d+1),disabled:$||d===S.length-1,children:[(0,b.jsx)(i.ArrowDown,{className:"mr-2 size-4"}),a("admin.services.list.downButton")]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>ab(e),disabled:$||!B(e),children:[(0,b.jsx)(m.Pencil,{className:"mr-2 size-4"}),a("admin.services.list.editButton")]}),(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",className:(0,r.cn)("border-destructive text-destructive hover:text-destructive"),onClick:()=>ae(c),disabled:$||!B(e),children:[(0,b.jsx)(l.Trash2,{className:"mr-2 size-4"}),a("admin.services.list.deleteButton")]})]})]},e||`${d}`)}),af?(0,b.jsx)("div",{className:"p-6 text-center text-sm text-muted-foreground",children:a("admin.services.list.noRecords")}):null]})}),S.length>0?(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a("admin.services.list.reorderHelp")}):null]})]})]})}a.s(["default",()=>C])}];

//# sourceMappingURL=c80d1_%28main%29_admin_%28admin%29_services__components_admin-services-client_tsx_ad461e53._.js.map