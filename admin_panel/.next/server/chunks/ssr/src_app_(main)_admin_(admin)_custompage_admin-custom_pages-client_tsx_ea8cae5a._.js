module.exports=[46584,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292),e=a.i(28551),f=a.i(90899),g=a.i(30637);a.i(58501);var h=a.i(14610),i=a.i(38246),j=a.i(42737);let k=({filters:a,total:d,onFiltersChange:e,onRefresh:f,locales:g,localesLoading:h,allowAllOption:k=!0,moduleOptions:l})=>{let m=c.default.useMemo(()=>{let a=(g||[]).map(a=>({value:String(a.value||"").trim().toLowerCase(),label:a.label})).filter(a=>a.value);return k?[{value:"",label:"Tüm diller"},...a]:a},[g,k]),n=!!h||0===m.length,o=(l??[]).filter(a=>String(a?.value||"").trim().length>0),p=0===o.length;return(0,b.jsx)("div",{className:"rounded-lg border bg-card",children:(0,b.jsx)("div",{className:"border-b p-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Özel Sayfalar"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"İçerik sayfalarını modül, yayın durumu ve aktif dile göre yönetebilirsin."}),(0,b.jsxs)("div",{className:"mt-3 grid gap-2 md:grid-cols-12 md:items-end",children:[(0,b.jsxs)("div",{className:"md:col-span-5",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Başlık / Slug / Meta arama"}),(0,b.jsx)("input",{type:"search",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"Örn: 'hakkımızda', 'duyuru', 'kampanya'",value:a.search,onChange:b=>{e({...a,search:b.target.value})}})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)(j.AdminLocaleSelect,{value:a.locale,onChange:b=>{let c=b?b.trim().toLowerCase():"";e({...a,locale:c})},options:m,loading:!!h,disabled:n,label:"Dil"}),h?(0,b.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Diller yükleniyor..."}):null,h||0!==m.length?null:(0,b.jsx)("div",{className:"mt-1 text-xs text-destructive",children:"Aktif dil listesi yok. Site ayarlarından app_locales kontrol et."})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Modül"}),(0,b.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:a.moduleKey,onChange:b=>{e({...a,moduleKey:b.target.value})},disabled:p,children:[(0,b.jsx)("option",{value:"",children:"Tümü"}),o.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]}),p?(0,b.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Modül listesi yükleniyor..."}):null]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Yayın durumu"}),(0,b.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:a.publishedFilter,onChange:b=>{let c=b.target.value;e({...a,publishedFilter:c})},children:[(0,b.jsx)("option",{value:"all",children:"Hepsi"}),(0,b.jsx)("option",{value:"published",children:"Yayında"}),(0,b.jsx)("option",{value:"draft",children:"Taslak"})]})]})]})]}),(0,b.jsxs)("div",{className:"lg:w-72 lg:border-l lg:pl-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Toplam Kayıt"}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:d})]}),f?(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs",onClick:f,children:"Yenile"}):null]}),(0,b.jsx)("div",{className:"mt-3 flex justify-end",children:(0,b.jsx)(i.default,{href:"/admin/custompage/new",className:"rounded-md bg-primary px-3 py-2 text-xs text-primary-foreground",children:"Yeni Sayfa Oluştur"})})]})]})})})};var l=a.i(95490),m=a.i(85668),n=a.i(14548),o=a.i(99570);let p=a=>{if(!a)return"-";let b=new Date(a);return Number.isNaN(b.getTime())?String(a):b.toLocaleString()},q=a=>null==a?"":String(a),r=({items:a,loading:e,onSaveOrder:f,savingOrder:g,enableMoveControls:j,onMoveUp:k,onMoveDown:r,activeLocale:s})=>{let t=a??[],u=t.length>0,[v,{isLoading:w}]=(0,h.useDeleteCustomPageAdminMutation)(),x=e||w||!!g,y=(0,c.useMemo)(()=>String(s||"").trim().toLowerCase().replace("_","-").split("-")[0].trim()||"",[s]),z=a=>({pathname:`/admin/custompage/${encodeURIComponent(a)}`,query:y?{locale:y}:void 0}),A=a=>a.is_published?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px]",children:"Yayında"}):(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:"Taslak"}),B=async a=>{if(window.confirm(`Bu sayfayı silmek \xfczeresin.

Başlık: ${a.title??"(başlık yok)"}
ID: ${a.id}
Slug: ${a.slug??"(slug yok)"}

Devam etmek istiyor musun?`))try{await v(a.id).unwrap(),d.toast.success("Sayfa başarıyla silindi.")}catch(b){let a=b?.data?.error?.message??"Sayfa silinirken bir hata oluştu.";d.toast.error(a)}},C=()=>e?(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Sayfalar yükleniyor..."}):(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Henüz kayıtlı sayfa bulunmuyor."}),D=({idx:a})=>j?(0,b.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>k?.(a),disabled:x||0===a||!k,title:"Yukarı",children:(0,b.jsx)(l.ArrowUp,{className:"size-4"})}),(0,b.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>r?.(a),disabled:x||a===t.length-1||!r,title:"Aşağı",children:(0,b.jsx)(m.ArrowDown,{className:"size-4"})})]}):null;return(0,b.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,b.jsx)("div",{className:"border-b p-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Liste"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:x?"Yükleniyor…":`${t.length} kayıt`})]}),f?(0,b.jsxs)(o.Button,{variant:"outline",onClick:f,disabled:x||!u,children:[(0,b.jsx)(n.Save,{className:"mr-2 size-4"}),g?"Kaydediliyor…":"Sıralamayı Kaydet"]}):null]})}),(0,b.jsx)("div",{className:"hidden min-[1700px]:block",children:u?(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b bg-muted/30 text-left",children:[(0,b.jsx)("th",{className:"px-3 py-2 text-xs text-muted-foreground",children:"#"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Başlık"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Slug"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Durum"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Tarih"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs text-right",children:"İşlemler"})]})}),(0,b.jsx)("tbody",{children:t.map((a,c)=>{let d=q(a.locale_resolved);return(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("td",{className:"px-3 py-2 text-xs text-muted-foreground whitespace-nowrap",children:c+1}),(0,b.jsx)("td",{className:"px-3 py-2 min-w-0",children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate font-semibold",title:q(a.title),children:a.title??"Başlık yok"}),a.meta_title?(0,b.jsxs)("div",{className:"truncate text-xs text-muted-foreground",title:a.meta_title,children:["SEO: ",a.meta_title]}):null,d?(0,b.jsxs)("div",{className:"truncate text-xs text-muted-foreground",children:["Locale: ",(0,b.jsx)("code",{children:d})]}):null]})}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,b.jsx)("code",{className:"text-xs",children:a.slug??"-"})}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:A(a)}),(0,b.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:[(0,b.jsx)("div",{children:p(a.created_at)}),(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Güncelleme: ",p(a.updated_at)]})]}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(D,{idx:c}),(0,b.jsx)(i.default,{href:z(a.id),className:"rounded-md border px-3 py-1 text-xs",children:"Düzenle"}),(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs text-destructive disabled:opacity-60",disabled:x,onClick:()=>B(a),children:"Sil"})]})})]},a.id)})})]}),(0,b.jsx)("div",{className:"p-3 text-xs text-muted-foreground",children:"Sıralama: Yukarı/Aşağı ile taşı, sonra kaydet."})]}):C()}),(0,b.jsx)("div",{className:"block min-[1700px]:hidden",children:u?(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"grid gap-3 2xl:grid-cols-2",children:t.map((a,c)=>{let d=q(a.locale_resolved);return(0,b.jsx)("div",{className:"rounded-lg border bg-card p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:["#",c+1]}),A(a),d?(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:["Locale: ",(0,b.jsx)("code",{className:"ml-1",children:d})]}):null]}),(0,b.jsx)("div",{className:"mt-2 truncate text-sm font-semibold",children:a.title??(0,b.jsx)("span",{className:"text-muted-foreground",children:"Başlık yok"})}),a.meta_title?(0,b.jsxs)("div",{className:"mt-1 truncate text-xs text-muted-foreground",title:a.meta_title,children:["SEO: ",a.meta_title]}):null,(0,b.jsxs)("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:["Slug: ",(0,b.jsx)("code",{children:a.slug??"-"})]}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Oluşturulma: ",p(a.created_at)]}),(0,b.jsxs)("div",{children:["Güncelleme: ",p(a.updated_at)]})]})]}),(0,b.jsxs)("div",{className:"flex shrink-0 flex-col gap-2 items-end",children:[(0,b.jsx)(D,{idx:c}),(0,b.jsx)(i.default,{href:z(a.id),className:"rounded-md border px-3 py-1 text-xs text-center",children:"Düzenle"}),(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs text-center text-destructive disabled:opacity-60",disabled:x,onClick:()=>B(a),children:"Sil"})]})]})},a.id)})}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:["Varsayılan görünüm karttır. Çok büyük ekranlarda (≥ ",1700,"px) tablo görünümü açılır."]})]}):C()})]})};function s(){let{localeOptions:a,defaultLocaleFromDb:i,loading:j,fetching:l}=(0,e.useAdminLocales)(),m=c.useMemo(()=>(0,f.resolveAdminApiLocale)(a,i,"tr"),[a,i]),[n,o]=c.useState({search:"",moduleKey:"",publishedFilter:"all",locale:""});c.useEffect(()=>{a&&0!==a.length&&o(a=>a.locale?a:{...a,locale:(0,g.localeShortClientOr)(m,"tr")})},[a,m]);let p=c.useMemo(()=>(0,g.localeShortClient)(n.locale)||m,[n.locale,m]),q=c.useMemo(()=>{if("all"!==n.publishedFilter)return+("published"===n.publishedFilter)},[n.publishedFilter]),s=c.useMemo(()=>({q:n.search.trim()||void 0,module_key:n.moduleKey.trim()||void 0,is_published:q,locale:p||void 0,limit:200,offset:0}),[n.search,n.moduleKey,q,p]),t=(0,h.useListCustomPagesAdminQuery)(s,{refetchOnMountOrArgChange:!0}),u=c.useMemo(()=>t.data?.items??[],[t.data]),v=c.useMemo(()=>{let a=t.data?.total;return"number"==typeof a?a:u.length},[t.data,u.length]),[w,x]=c.useState([]);c.useEffect(()=>x(u),[u]);let y=c.useMemo(()=>{let a=new Set;for(let b of u){let c=String(b.module_key??"").trim();c&&a.add(c)}return n.moduleKey&&!a.has(n.moduleKey)&&a.add(n.moduleKey),Array.from(a).sort((a,b)=>a.localeCompare(b)).map(a=>({value:a,label:({blog:"Blog",news:"Haber / Duyuru",about:"Hakkında / Statik",services:"Hizmetler",products:"Ürünler",solutions:"Çözümler",library:"Kütüphane",faq:"SSS",contact:"İletişim"})[a]||a}))},[u,n.moduleKey]),[z,A]=(0,h.useReorderCustomPagesAdminMutation)(),B=t.isLoading||t.isFetching||j||l||A.isLoading,C=c.useMemo(()=>({search:n.search,moduleKey:n.moduleKey,publishedFilter:n.publishedFilter,locale:n.locale}),[n]);function D(a,b){x(c=>{if(a<0||b<0||a>=c.length||b>=c.length)return c;let d=c.slice(),[e]=d.splice(a,1);return d.splice(b,0,e),d})}async function E(){try{let a={items:w.map((a,b)=>({id:a.id,display_order:b}))};await z(a).unwrap(),d.toast.success("Sıralama kaydedildi."),t.refetch()}catch(a){d.toast.error(a?.data?.error?.message||a?.message||"Sıralama kaydedilemedi.")}}return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(k,{filters:C,total:v,onFiltersChange:a=>{o(b=>({...b,search:a.search,moduleKey:a.moduleKey,publishedFilter:a.publishedFilter,locale:a.locale}))},onRefresh:()=>t.refetch(),locales:a??[],localesLoading:j||l,allowAllOption:!1,moduleOptions:y}),(0,b.jsx)(r,{items:w,loading:B,activeLocale:p,enableMoveControls:!0,onMoveUp:a=>D(a,a-1),onMoveDown:a=>D(a,a+1),onSaveOrder:E,savingOrder:A.isLoading})]})}a.s(["default",()=>s],46584)}];

//# sourceMappingURL=src_app_%28main%29_admin_%28admin%29_custompage_admin-custom_pages-client_tsx_ea8cae5a._.js.map