module.exports=[5848,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(210),g=a.i(14548),h=a.i(81560),i=a.i(96221),j=a.i(21374),k=a.i(28551),l=a.i(90899),m=a.i(30637),n=a.i(68114),o=a.i(99570),p=a.i(66718),q=a.i(70430),r=a.i(29246),s=a.i(91119),t=a.i(63658),u=a.i(86304),v=a.i(42737),w=a.i(86192);a.i(58501);var x=a.i(28677);function y(a){return a?.data?.error?.message||a?.data?.message||a?.message||"İşlem başarısız"}function z({value:a,onChange:c,disabled:d}){let e=Math.max(0,Math.min(5,Math.round(a||0)));return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[Array.from({length:5},(a,f)=>(0,b.jsx)("button",{type:"button",onClick:()=>c(f+1),disabled:d,className:"transition-transform hover:scale-110 disabled:cursor-not-allowed disabled:opacity-50",children:(0,b.jsx)(j.Star,{className:(0,n.cn)("size-6",f<e?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})},f)),(0,b.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",e,"/5)"]})]})}function A({id:a}){let j=(0,d.useRouter)(),n="new"===a,{localeOptions:A,defaultLocaleFromDb:B,coerceLocale:C,loading:D}=(0,k.useAdminLocales)(),E=c.useMemo(()=>Array.isArray(A)?A.map(a=>({value:a.value||"",label:a.label||a.value||""})):[],[A]),{data:F,isLoading:G,error:H}=(0,x.useGetReviewAdminQuery)({id:a},{skip:n}),[I,{isLoading:J}]=(0,x.useCreateReviewAdminMutation)(),[K,{isLoading:L}]=(0,x.useUpdateReviewAdminMutation)(),[M,{isLoading:N}]=(0,x.useDeleteReviewAdminMutation)(),O=c.useMemo(()=>B||(0,m.localeShortClientOr)("de")||"de",[B]),[P,Q]=c.useState({target_type:"testimonial",target_id:"11111111-1111-1111-1111-111111111111",name:"",email:"",rating:5,comment:"",title:"",role:"",company:"",avatar_url:"",logo_url:"",profile_href:"",admin_reply:"",is_active:!0,is_approved:!0,display_order:0,locale:O}),[R,S]=c.useState(!1);c.useEffect(()=>{!n&&F&&Q({target_type:F.target_type||"testimonial",target_id:F.target_id||"11111111-1111-1111-1111-111111111111",name:F.name||"",email:F.email||"",rating:F.rating||5,comment:F.comment||"",title:F.title||"",role:F.role||"",company:F.company||"",avatar_url:F.avatar_url||"",logo_url:F.logo_url||"",profile_href:F.profile_href||"",admin_reply:F.admin_reply||"",is_active:F.is_active,is_approved:F.is_approved,display_order:F.display_order||0,locale:F.locale_resolved||F.submitted_locale||O})},[F,n,O]),c.useEffect(()=>{n&&B&&!P.locale&&Q(a=>({...a,locale:B}))},[n,B,P.locale]);let T=J||L||N||G,U=async b=>{if(b.preventDefault(),!P.target_type.trim())return void e.toast.error("Target Type gerekli");if(!P.target_id.trim())return void e.toast.error("Target ID gerekli");if(!P.name.trim())return void e.toast.error("İsim gerekli");if(!P.email.trim())return void e.toast.error("Email gerekli");if(!P.comment.trim())return void e.toast.error("Yorum gerekli");if(P.rating<0||P.rating>5)return void e.toast.error("Rating 0-5 arasında olmalı");let c=P.locale||(0,l.resolveAdminApiLocale)(A,B,"de");try{if(n){let a={target_type:P.target_type.trim(),target_id:P.target_id.trim(),name:P.name.trim(),email:P.email.trim(),rating:P.rating,comment:P.comment.trim(),title:P.title.trim()||void 0,role:P.role.trim()||void 0,company:P.company.trim()||void 0,avatar_url:P.avatar_url.trim()||void 0,logo_url:P.logo_url.trim()||void 0,profile_href:P.profile_href.trim()||void 0,is_active:P.is_active,is_approved:P.is_approved,display_order:P.display_order,locale:c};await I(a).unwrap(),e.toast.success("Kayıt oluşturuldu"),j.push("/admin/reviews")}else await K({id:a,patch:{target_type:P.target_type.trim(),target_id:P.target_id.trim(),name:P.name.trim(),email:P.email.trim(),rating:P.rating,comment:P.comment.trim(),title:P.title.trim()||void 0,role:P.role.trim()||void 0,company:P.company.trim()||void 0,avatar_url:P.avatar_url.trim()||void 0,logo_url:P.logo_url.trim()||void 0,profile_href:P.profile_href.trim()||void 0,admin_reply:P.admin_reply.trim()||void 0,is_active:P.is_active,is_approved:P.is_approved,display_order:P.display_order,locale:c}}).unwrap(),e.toast.success("Kayıt güncellendi")}catch(a){e.toast.error(y(a))}},V=async()=>{if(!n)try{await M({id:a}).unwrap(),e.toast.success("Kayıt silindi"),j.push("/admin/reviews")}catch(a){e.toast.error(y(a))}};return H?(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(s.Card,{children:(0,b.jsxs)(s.CardContent,{className:"py-12 text-center",children:[(0,b.jsxs)("div",{className:"text-destructive",children:["Kayıt yüklenemedi: ",y(H)]}),(0,b.jsxs)(o.Button,{variant:"outline",onClick:()=>j.push("/admin/reviews"),className:"mt-4 gap-2",children:[(0,b.jsx)(f.ArrowLeft,{className:"size-4"}),"Listeye Dön"]})]})})}):!n&&G?(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(s.Card,{children:(0,b.jsx)(s.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,b.jsx)(s.Card,{children:(0,b.jsx)(s.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(s.CardTitle,{children:n?"Yeni Review":"Review Düzenle"}),(0,b.jsx)(s.CardDescription,{children:n?"Yeni bir müşteri yorumu ekleyin":"Mevcut müşteri yorumunu düzenleyin"})]}),(0,b.jsxs)(o.Button,{type:"button",variant:"outline",onClick:()=>j.push("/admin/reviews"),disabled:T,className:"gap-2",children:[(0,b.jsx)(f.ArrowLeft,{className:"size-4"}),"Geri"]})]})})}),(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)(s.CardTitle,{className:"text-base",children:"Genel Bilgiler"})}),(0,b.jsx)(s.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)(v.AdminLocaleSelect,{value:P.locale,onChange:a=>{let b=C(a,B);Q(a=>({...a,locale:b}))},options:E,loading:D,disabled:T})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"display_order",className:"text-sm",children:"Sıralama"}),(0,b.jsx)(p.Input,{id:"display_order",type:"number",value:P.display_order,onChange:a=>Q(b=>({...b,display_order:Number(a.target.value)||0})),disabled:T,min:0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"is_approved",className:"text-sm",children:"Onay Durumu"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-md border px-3 py-2",children:[(0,b.jsx)(t.Switch,{id:"is_approved",checked:P.is_approved,onCheckedChange:a=>Q(b=>({...b,is_approved:a})),disabled:T}),(0,b.jsx)(q.Label,{htmlFor:"is_approved",className:"cursor-pointer text-sm",children:P.is_approved?(0,b.jsx)(u.Badge,{variant:"default",children:"Onaylı"}):(0,b.jsx)(u.Badge,{variant:"secondary",children:"Onaysız"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"is_active",className:"text-sm",children:"Durum"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-md border px-3 py-2",children:[(0,b.jsx)(t.Switch,{id:"is_active",checked:P.is_active,onCheckedChange:a=>Q(b=>({...b,is_active:a})),disabled:T}),(0,b.jsx)(q.Label,{htmlFor:"is_active",className:"cursor-pointer text-sm",children:P.is_active?(0,b.jsx)(u.Badge,{variant:"default",children:"Aktif"}):(0,b.jsx)(u.Badge,{variant:"secondary",children:"Pasif"})})]})]})]})})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)(s.CardTitle,{className:"text-base",children:"Müşteri Bilgileri"})}),(0,b.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"target_type",className:"text-sm",children:["Target Type ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(p.Input,{id:"target_type",value:P.target_type,onChange:a=>Q(b=>({...b,target_type:a.target.value})),placeholder:"Örn: testimonial, product, service",disabled:T,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"target_id",className:"text-sm",children:["Target ID ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(p.Input,{id:"target_id",value:P.target_id,onChange:a=>Q(b=>({...b,target_id:a.target.value})),placeholder:"UUID veya identifier",disabled:T,required:!0})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"name",className:"text-sm",children:["İsim ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(p.Input,{id:"name",value:P.name,onChange:a=>Q(b=>({...b,name:a.target.value})),placeholder:"Örn: Ahmet Yılmaz",disabled:T,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"email",className:"text-sm",children:["Email ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(p.Input,{id:"email",type:"email",value:P.email,onChange:a=>Q(b=>({...b,email:a.target.value})),placeholder:"ornek@email.com",disabled:T,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"rating",className:"text-sm",children:["Rating ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(z,{value:P.rating,onChange:a=>Q(b=>({...b,rating:a})),disabled:T})]})]})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsx)(s.CardTitle,{className:"text-base",children:"Yorum İçeriği"})}),(0,b.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"title",className:"text-sm",children:"Başlık"}),(0,b.jsx)(p.Input,{id:"title",value:P.title,onChange:a=>Q(b=>({...b,title:a.target.value})),placeholder:"Yorum başlığı (opsiyonel)",disabled:T})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(q.Label,{htmlFor:"comment",className:"text-sm",children:["Yorum ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(r.Textarea,{id:"comment",value:P.comment,onChange:a=>Q(b=>({...b,comment:a.target.value})),placeholder:"Müşteri yorumu...",disabled:T,rows:5,required:!0})]})]})]}),(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{children:[(0,b.jsx)(s.CardTitle,{className:"text-base",children:"Testimonial Ek Bilgileri"}),(0,b.jsx)(s.CardDescription,{children:"Bu alanlar testimonial görünümü için kullanılır (opsiyonel)"})]}),(0,b.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"role",className:"text-sm",children:"Rol / Pozisyon"}),(0,b.jsx)(p.Input,{id:"role",value:P.role,onChange:a=>Q(b=>({...b,role:a.target.value})),placeholder:"Örn: CEO, Müdür",disabled:T})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"company",className:"text-sm",children:"Şirket"}),(0,b.jsx)(p.Input,{id:"company",value:P.company,onChange:a=>Q(b=>({...b,company:a.target.value})),placeholder:"Şirket adı",disabled:T})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"avatar_url",className:"text-sm",children:"Avatar URL"}),(0,b.jsx)(p.Input,{id:"avatar_url",value:P.avatar_url,onChange:a=>Q(b=>({...b,avatar_url:a.target.value})),placeholder:"/assets/imgs/avatar.png",disabled:T})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"logo_url",className:"text-sm",children:"Logo URL"}),(0,b.jsx)(p.Input,{id:"logo_url",value:P.logo_url,onChange:a=>Q(b=>({...b,logo_url:a.target.value})),placeholder:"/assets/imgs/logo.png",disabled:T})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"profile_href",className:"text-sm",children:"Profil Linki"}),(0,b.jsx)(p.Input,{id:"profile_href",value:P.profile_href,onChange:a=>Q(b=>({...b,profile_href:a.target.value})),placeholder:"https://linkedin.com/in/...",disabled:T})]})]})]}),!n&&(0,b.jsxs)(s.Card,{children:[(0,b.jsxs)(s.CardHeader,{children:[(0,b.jsx)(s.CardTitle,{className:"text-base",children:"Admin Yanıtı"}),(0,b.jsx)(s.CardDescription,{children:"Bu yoruma admin olarak yanıt verebilirsiniz"})]}),(0,b.jsx)(s.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"admin_reply",className:"text-sm",children:"Yanıt"}),(0,b.jsx)(r.Textarea,{id:"admin_reply",value:P.admin_reply,onChange:a=>Q(b=>({...b,admin_reply:a.target.value})),placeholder:"Admin yanıtı (opsiyonel)",disabled:T,rows:4})]})})]}),(0,b.jsx)(s.Card,{children:(0,b.jsxs)(s.CardContent,{className:"flex flex-col gap-3 pt-6 sm:flex-row sm:justify-between",children:[(0,b.jsx)("div",{children:!n&&(0,b.jsx)(o.Button,{type:"button",variant:"destructive",onClick:()=>{S(!0)},disabled:T,className:"gap-2",children:N?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"size-4 animate-spin"}),"Siliniyor..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Trash2,{className:"size-4"}),"Sil"]})})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>j.push("/admin/reviews"),disabled:T,children:"İptal"}),(0,b.jsx)(o.Button,{type:"submit",disabled:T,className:"gap-2",children:J||L?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"size-4 animate-spin"}),"Kaydediliyor..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Save,{className:"size-4"}),"Kaydet"]})})]})]})})]}),(0,b.jsx)(w.AlertDialog,{open:R,onOpenChange:S,children:(0,b.jsxs)(w.AlertDialogContent,{children:[(0,b.jsxs)(w.AlertDialogHeader,{children:[(0,b.jsx)(w.AlertDialogTitle,{children:"Silmek istediğinizden emin misiniz?"}),(0,b.jsxs)(w.AlertDialogDescription,{children:[(0,b.jsx)("strong",{children:P.name||"Bu kayıt"})," tarafından yapılan yorum silinecek. Bu işlem geri alınamaz."]})]}),(0,b.jsxs)(w.AlertDialogFooter,{children:[(0,b.jsx)(w.AlertDialogCancel,{children:"İptal"}),(0,b.jsx)(w.AlertDialogAction,{onClick:V,children:"Sil"})]})]})})]})}a.s(["default",()=>A])}];

//# sourceMappingURL=6457b_admin_%28admin%29_reviews__components_admin-reviews-detail-client_tsx_2353aea6._.js.map