module.exports=[41273,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292),e=a.i(87532),f=a.i(28790),g=a.i(31133),h=a.i(99570),i=a.i(66718),j=a.i(70430),k=a.i(86304),l=a.i(91119),m=a.i(75083),n=a.i(80701),o=a.i(38246),p=a.i(6015);function q(a){let b=function(a){if(null==a||"object"==typeof a)return a;if("string"==typeof a){let b=a.trim();if(!b||!(b.startsWith("{")&&b.endsWith("}")||b.startsWith("[")&&b.endsWith("]")))return a;try{return JSON.parse(b)}catch{}}return a}(a);if(null==b)return"—";if("string"==typeof b){let a=b.trim();return a.length<=80?a:`${a.slice(0,77)}...`}if("number"==typeof b||"boolean"==typeof b)return String(b);if(Array.isArray(b))return 0===b.length?"[]":`Array [${b.length} items]`;if("object"==typeof b){let a=Object.keys(b);return 0===a.length?"{}":a.length<=3?`{ ${a.join(", ")} }`:`Object {${a.length} fields}`}try{let a=JSON.stringify(b);if(a.length<=80)return a;return`${a.slice(0,77)}...`}catch{return String(b)}}function r(a){if(!a)return"—";try{return new Date(a).toLocaleString()}catch{return"—"}}let s=({settings:a,loading:d,onEdit:e,onDelete:f,getEditHref:g,selectedLocale:i})=>{let j=c.useMemo(()=>{let b=Array.isArray(a)?a:[];return"*"===i?b.filter(a=>{let b;return a&&!((b=String(a.key||"").trim().toLowerCase())&&("seo"===b||"site_seo"===b||"site_meta_default"===b||b.startsWith("seo_")||b.startsWith("seo|")||b.startsWith("site_seo|")||b.startsWith("ui_seo")||b.startsWith("ui_seo_")))}):b},[a,i]),m=j.length>0,n=a=>{let c=g?.(a);return c?(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(o.default,{prefetch:!1,href:c,children:"Düzenle"})}):e?(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>e(a),children:"Düzenle"}):null};return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:"Ayar Listesi"}),(0,b.jsxs)(l.CardDescription,{className:"text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[(0,b.jsx)("code",{children:"site_settings"})," kayıtları"]})," ",(0,b.jsxs)("span",{className:"text-muted-foreground",children:["(",(0,b.jsx)("span",{className:"font-medium text-foreground",children:i||"—"}),")"]}),"*"===i?(0,b.jsxs)("span",{className:"text-muted-foreground",children:[" ","• SEO anahtarları bu listede gizlenir; SEO tab’ında yönetilir."]}):null]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[i?(0,b.jsx)(k.Badge,{variant:"secondary",children:i}):null,d?(0,b.jsx)(k.Badge,{variant:"outline",children:"Yükleniyor…"}):null]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"hidden md:block",children:(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{className:"w-[25%]",children:"Key"}),(0,b.jsx)(p.TableHead,{className:"w-[8%]",children:"Dil"}),(0,b.jsx)(p.TableHead,{className:"w-[35%]",children:"Değer (Özet)"}),(0,b.jsx)(p.TableHead,{className:"w-[15%]",children:"Güncellenme"}),(0,b.jsx)(p.TableHead,{className:"w-[17%] text-right",children:"İşlemler"})]})}),(0,b.jsx)(p.TableBody,{children:m?j.map(a=>(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableCell,{className:"align-top font-medium wrap-break-word",children:a.key}),(0,b.jsx)(p.TableCell,{className:"align-top",children:a.locale?(0,b.jsx)(k.Badge,{variant:"outline",children:a.locale}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsx)("div",{className:"max-w-md overflow-hidden text-ellipsis text-xs text-muted-foreground",children:(0,b.jsx)("code",{className:"rounded bg-muted px-1.5 py-0.5",children:q(a.value)})})}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:r(a.updated_at)})}),(0,b.jsx)(p.TableCell,{className:"align-top text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[n(a),f?(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>f(a),children:"Sil"}):null]})})]},`${a.key}_${a.locale||"none"}`)):(0,b.jsx)(p.TableRow,{children:(0,b.jsx)(p.TableCell,{colSpan:5,className:"py-10 text-center text-muted-foreground",children:"Kayıt bulunamadı."})})})]})})}),(0,b.jsxs)("div",{className:"md:hidden",children:[(0,b.jsx)("div",{className:"rounded-md border",children:m?(0,b.jsx)("div",{className:"divide-y",children:j.map(a=>{let c=n(a);return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,b.jsxs)("div",{className:"min-w-0 space-y-2",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("div",{className:"font-medium wrap-break-word",children:a.key}),a.locale?(0,b.jsx)(k.Badge,{variant:"outline",children:a.locale}):null]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground wrap-break-word",children:q(a.value)}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Güncellenme: ",r(a.updated_at)]})]})}),c||f?(0,b.jsxs)("div",{className:"mt-4 grid gap-2",children:[c?(0,b.jsx)("div",{className:"grid",children:c}):null,f?(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>f(a),children:"Sil"}):null]}):null]},`${a.key}_${a.locale||"none"}`)})}):(0,b.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"Kayıt bulunamadı."})}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Mobil görünümde kayıtlar kart formatında listelenir.","*"===i?" SEO anahtarları burada da gizlidir.":""]})]})]})]})};s.displayName="SiteSettingsList",a.i(58501);var t=a.i(88963);let u=["contact_info","socials","businessHours","company_profile","ui_header"],v={contact_info:{phone:"",email:"",address:"",whatsapp:""},socials:{instagram:"",facebook:"",linkedin:"",youtube:"",x:""},businessHours:[{day:"mon",open:"09:00",close:"18:00",closed:!1},{day:"tue",open:"09:00",close:"18:00",closed:!1},{day:"wed",open:"09:00",close:"18:00",closed:!1},{day:"thu",open:"09:00",close:"18:00",closed:!1},{day:"fri",open:"09:00",close:"18:00",closed:!1},{day:"sat",open:"10:00",close:"14:00",closed:!1},{day:"sun",open:"00:00",close:"00:00",closed:!0}],company_profile:{company_name:"guezelwebdesign",slogan:"",about:""},ui_header:{nav_home:"Home",nav_products:"Products",nav_services:"Services",nav_contact:"Contact",cta_label:"Get Offer"}};function w(a){return u.includes(a)}function x(a){if(null==a)return"";if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return String(a);try{return JSON.stringify(a,null,2)}catch{return String(a)}}function y(a,b){return a?.data?.error?.message||a?.data?.message||a?.message||b}let z=({locale:a})=>{let[m,n]=c.useState(""),[q,{isLoading:r}]=(0,t.useUpdateSiteSettingAdminMutation)(),[s,{isLoading:z}]=(0,t.useDeleteSiteSettingAdminMutation)(),A=(0,g.useAdminTranslations)(a),B=c.useMemo(()=>({locale:"*",q:m.trim()||void 0,keys:u}),[m]),C=c.useMemo(()=>({locale:a,q:m.trim()||void 0,keys:u}),[a,m]),D=(0,t.useListSiteSettingsAdminQuery)(B,{skip:!a}),E=(0,t.useListSiteSettingsAdminQuery)(C,{skip:!a}),F=c.useMemo(()=>[...Array.isArray(D.data)?D.data:[],...Array.isArray(E.data)?E.data:[]],[D.data,E.data]),G=c.useMemo(()=>{let b=Array.isArray(F)?F:[],c=m.trim().toLowerCase(),d=(c&&c.length>=2?b.filter(a=>{if(!a||!w(a.key))return!1;let b=String(a.key||"").toLowerCase(),d=x(a.value).toLowerCase();return b.includes(c)||d.includes(c)}):b.filter(a=>a&&w(a.key))).filter(a=>a&&w(a.key)),e=new Map;for(let b of d){let c=b.key,d=e.get(c)||{};"*"===b.locale&&(d.global=b),b.locale===a&&(d.local=b),e.set(c,d)}return u.map(a=>{let b=e.get(a)||{},c=b.local?"locale":b.global?"global":"none",d="locale"===c?b.local?.value:"global"===c?b.global?.value:void 0;return{key:a,globalRow:b.global,localeRow:b.local,effectiveSource:c,effectiveValue:d}})},[F,a,m]),H=D.isLoading||E.isLoading||D.isFetching||E.isFetching||r||z,I=async()=>{await Promise.all([D.refetch(),E.refetch()])},J=async b=>{if(!b.globalRow)return void d.toast.error(A("admin.siteSettings.general.missingGlobalError"));try{await q({key:b.key,locale:a,value:b.globalRow.value}).unwrap(),d.toast.success(A("admin.siteSettings.general.overrideCreated",{key:b.key,locale:a})),await I()}catch(a){d.toast.error(y(a,A("admin.siteSettings.messages.error")))}},K=async(a,b)=>{try{await q({key:a,locale:b,value:v[a]}).unwrap(),d.toast.success(A("admin.siteSettings.general.defaultsRestored",{key:a,locale:b})),await I()}catch(a){d.toast.error(y(a,A("admin.siteSettings.messages.error")))}},L=async(a,b)=>{if(window.confirm(A("admin.siteSettings.general.deleteConfirm",{key:a,locale:b})))try{await s({key:a,locale:b}).unwrap(),d.toast.success(A("admin.siteSettings.general.deleted",{key:a,locale:b})),await I()}catch(a){d.toast.error(y(a,A("admin.siteSettings.messages.error")))}},M=async()=>{try{for(let a of u)G.find(b=>b.key===a)?.globalRow||await q({key:a,locale:"*",value:v[a]}).unwrap();d.toast.success(A("admin.siteSettings.general.globalBootstrapSuccess")),await I()}catch(a){d.toast.error(y(a,A("admin.siteSettings.messages.error")))}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:A("admin.siteSettings.general.title")}),(0,b.jsx)(l.CardDescription,{children:A("admin.siteSettings.general.description",{locale:a})})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(k.Badge,{variant:"secondary",children:[A("admin.siteSettings.filters.language"),": ",a]}),(0,b.jsxs)(h.Button,{type:"button",variant:"outline",onClick:I,disabled:H,title:A("admin.siteSettings.filters.refreshButton"),children:[(0,b.jsx)(f.RefreshCcw,{className:"mr-2 size-4"}),A("admin.siteSettings.filters.refreshButton")]}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:M,disabled:H,title:A("admin.siteSettings.general.globalBootstrapTooltip"),children:A("admin.siteSettings.general.globalBootstrap")})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"general-search",children:A("admin.siteSettings.filters.search")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Search,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"general-search",value:m,onChange:a=>n(a.target.value),placeholder:A("admin.siteSettings.general.searchPlaceholder"),className:"pl-9",disabled:H})]})]}),H?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Badge,{variant:"outline",children:A("admin.siteSettings.messages.loading")}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:A("admin.siteSettings.general.loadingNote")})]}):null]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:A("admin.siteSettings.general.recordsTitle")}),(0,b.jsxs)(l.CardDescription,{children:[A("admin.siteSettings.general.managedKeys")," ",(0,b.jsx)("span",{className:"text-muted-foreground",children:u.map(a=>(0,b.jsx)("code",{className:"mr-2",children:a},a))})]})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{className:"w-[24%]",children:A("admin.siteSettings.general.keyColumn")}),(0,b.jsx)(p.TableHead,{className:"w-[16%]",children:A("admin.siteSettings.general.sourceColumn")}),(0,b.jsx)(p.TableHead,{className:"w-[40%]",children:A("admin.siteSettings.general.effectiveColumn")}),(0,b.jsx)(p.TableHead,{className:"w-[20%] text-right",children:A("admin.siteSettings.general.actionsColumn")})]})}),(0,b.jsx)(p.TableBody,{children:G.length?G.map(c=>{var d,e;let f=!!c.globalRow,g=!!c.localeRow,i=g?a:"*";return(0,b.jsxs)(p.TableRow,{children:[(0,b.jsxs)(p.TableCell,{className:"align-top",children:[(0,b.jsx)("div",{className:"wrap-break-word font-mono text-sm font-medium",children:c.key}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,b.jsx)(k.Badge,{variant:"outline",className:"text-xs",children:f?A("admin.siteSettings.general.globalExists"):A("admin.siteSettings.general.globalNotExists")}),(0,b.jsx)(k.Badge,{variant:"outline",className:"text-xs",children:g?A("admin.siteSettings.general.localeExists",{locale:a}):A("admin.siteSettings.general.localeNotExists",{locale:a})})]})]}),(0,b.jsx)(p.TableCell,{className:"align-top",children:"locale"===(d=c.effectiveSource)?(0,b.jsx)(k.Badge,{children:A("admin.siteSettings.general.sourceOverride")}):"global"===d?(0,b.jsx)(k.Badge,{variant:"secondary",children:A("admin.siteSettings.general.sourceGlobal")}):(0,b.jsx)(k.Badge,{variant:"outline",children:A("admin.siteSettings.general.sourceNone")})}),(0,b.jsxs)(p.TableCell,{className:"align-top",children:[(0,b.jsx)("div",{className:"max-w-md overflow-hidden wrap-break-word text-xs text-muted-foreground",children:(0,b.jsx)("code",{className:"rounded bg-muted px-1.5 py-0.5",children:function(a){if(void 0===a)return"";let b=x(a);return b.length<=180?b:`${b.slice(0,177)}...`}(c.effectiveValue)})}),"global"!==c.effectiveSource||g?null:(0,b.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:A("admin.siteSettings.general.noOverrideNote",{locale:a})})]}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-1",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",disabled:H||!(f||g),children:(0,b.jsx)(o.default,{prefetch:!1,href:(e=c.key,`/admin/site-settings/${encodeURIComponent(e)}?locale=${encodeURIComponent(i)}`),children:A("admin.siteSettings.actions.edit")})}),!g&&f?(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>J(c),disabled:H,children:A("admin.siteSettings.general.overrideButton")}):null,f||g?(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>K(c.key,g?a:"*"),disabled:H,title:A("admin.siteSettings.general.restoreTooltip"),children:A("admin.siteSettings.general.restoreButton")}):null]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-1",children:[(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>L(c.key,"*"),disabled:H||!f,title:A("admin.siteSettings.general.deleteGlobalTooltip"),children:A("admin.siteSettings.general.deleteGlobal")}),(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>L(c.key,a),disabled:H||!g,title:A("admin.siteSettings.general.deleteLocaleTooltip",{locale:a}),children:A("admin.siteSettings.general.deleteLocale")})]})]})})]},`group_${c.key}`)}):(0,b.jsx)(p.TableRow,{children:(0,b.jsxs)(p.TableCell,{colSpan:4,className:"py-10 text-center text-muted-foreground",children:[A("admin.siteSettings.general.noRecords"),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:M,disabled:H,children:A("admin.siteSettings.general.globalBootstrap")})})]})})})]})}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:A("admin.siteSettings.general.deleteTooltip")})]})]})]})};z.displayName="GeneralSettingsTab";var A=a.i(88780);let B=A.z.string().trim().min(1),C=A.z.object({type:A.z.enum(["website","article","product"]).default("website"),images:A.z.array(A.z.string().trim().min(1)).default([])}).strict(),D=A.z.object({card:A.z.enum(["summary","summary_large_image","app","player"]).default("summary_large_image"),site:A.z.string().trim().optional(),creator:A.z.string().trim().optional()}).strict(),E=A.z.object({noindex:A.z.boolean().default(!1),index:A.z.boolean().default(!0),follow:A.z.boolean().default(!0)}).strict();A.z.object({site_name:B,title_default:B,title_template:B,description:A.z.string().trim().optional(),open_graph:C.default({type:"website",images:["/img/og-default.jpg"]}),twitter:D.default({card:"summary_large_image",site:"",creator:""}),robots:E.default({noindex:!1,index:!0,follow:!0})}).strict(),A.z.object({title:B,description:B,keywords:A.z.string().trim().optional()}).strict();let F={site_name:"guezelwebdesign Industrial Cooling Towers",title_default:"guezelwebdesign Industrial Cooling Towers and Engineering",title_template:"%s – guezelwebdesign",description:"Industrial cooling towers, engineering, installation and service solutions for efficient process cooling.",open_graph:{type:"website",images:["/img/og-default.jpg"]},twitter:{card:"summary_large_image",site:"",creator:""},robots:{noindex:!1,index:!0,follow:!0}},G={tr:{title:"guezelwebdesign – Endüstriyel Su Soğutma Kuleleri ve Mühendislik",description:"Endüstriyel soğutma kuleleri, modernizasyon ve enerji verimliliği çözümleri. Keşif, üretim, montaj, bakım ve yedek parça.",keywords:"guezelwebdesign, endüstriyel, soğutma kulesi, enerji verimliliği, b2b"},en:{title:"guezelwebdesign – Industrial Cooling Towers and Engineering",description:"Industrial cooling towers and energy efficiency solutions. Engineering, manufacturing, installation, modernization, testing and spare parts.",keywords:"guezelwebdesign, industrial, cooling towers, energy efficiency, b2b"},de:{title:"guezelwebdesign – Industrielle Kuehltuerme und Engineering",description:"Industrielle Kuehlturmtechnik und Energieeffizienzloesungen. Planung, Fertigung, Montage, Modernisierung, Leistungstests und Ersatzteile.",keywords:"guezelwebdesign, industriell, kuehlturm, energieeffizienz, b2b"}};var H=a.i(56414);function I(a){if(null==a)return"";if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return String(a);try{return JSON.stringify(a,null,2)}catch{return String(a)}}let J=["seo","site_seo","site_meta_default"];function K(a){if(void 0===a)return"";let b=I(a);return b.length<=180?b:b.slice(0,180)+"..."}function L(a,b){return`/admin/site-settings/${encodeURIComponent(a)}?locale=${encodeURIComponent(b)}`}let M=a=>null==a?"":String(a).trim();async function N(a){let b=M(a);if(b)try{await navigator.clipboard.writeText(b),d.toast.success("URL kopyalandı.")}catch{d.toast.error("Kopyalama başarısız. Tarayıcı izni engelliyor olabilir.")}}let O=({locale:a})=>{let[f,g]=(0,c.useState)(""),m=(0,c.useMemo)(()=>({locale:"*",q:f.trim()||void 0}),[f]),n=(0,c.useMemo)(()=>({locale:a,q:f.trim()||void 0}),[a,f]),q=(0,c.useMemo)(()=>({locale:"*",keys:["site_og_default_image"],sort:"key",order:"asc",limit:1,offset:0}),[]),r=(0,t.useListSiteSettingsAdminQuery)(m,{skip:!a,refetchOnMountOrArgChange:!0}),s=(0,t.useListSiteSettingsAdminQuery)(n,{skip:!a,refetchOnMountOrArgChange:!0}),u=(0,t.useListSiteSettingsAdminQuery)(q,{refetchOnMountOrArgChange:!0}),v=(0,c.useMemo)(()=>[...Array.isArray(r.data)?r.data:[],...Array.isArray(s.data)?s.data:[]],[r.data,s.data]),w=(0,c.useMemo)(()=>{let b=v||[],c=f.trim().toLowerCase();return function(a,b){let c,d=a.filter(a=>{let b;return a&&!!(b=String(a.key||"").trim().toLowerCase())&&("seo"===b||"site_seo"===b||"site_meta_default"===b||b.startsWith("seo_")||b.startsWith("seo|")||b.startsWith("site_seo|")||b.startsWith("ui_seo")||b.startsWith("ui_seo_"))}),e=(c=Array.from(new Set(d.map(a=>a.key).filter(Boolean))),[...J.filter(a=>c.includes(a)),...c.filter(a=>!J.includes(a)).sort((a,b)=>a.localeCompare(b))]),f=new Map;for(let a of d){let c=f.get(a.key)||{};"*"===a.locale&&(c.global=a),a.locale===b&&(c.local=a),f.set(a.key,c)}return e.map(a=>{let b=f.get(a)||{},c=b.local?"locale":b.global?"global":"none",d="locale"===c?b.local?.value:"global"===c?b.global?.value:void 0;return{key:a,globalRow:b.global,localeRow:b.local,effectiveSource:c,effectiveValue:d}})}(c&&c.length>=2?b.filter(a=>{let b=String(a?.key||"").toLowerCase(),d=I(a?.value).toLowerCase();return b.includes(c)||d.includes(c)}):b,a)},[v,a,f]),[x,{isLoading:y}]=(0,t.useUpdateSiteSettingAdminMutation)(),[z,{isLoading:A}]=(0,t.useDeleteSiteSettingAdminMutation)(),B=r.isLoading||s.isLoading||u.isLoading||r.isFetching||s.isFetching||u.isFetching||y||A,C=async()=>{await Promise.all([r.refetch(),s.refetch(),u.refetch()])};(0,c.useEffect)(()=>{a&&C()},[a]);let D=async(a,b)=>{if(window.confirm(`"${a}" (${b}) silinsin mi?`))try{await z({key:a,locale:b}).unwrap(),d.toast.success(`"${a}" (${b}) silindi.`),await C()}catch(b){let a=b?.data?.error?.message||b?.message||"SEO ayarı silinirken hata oluştu.";d.toast.error(a)}},E=async b=>{if(!b.globalRow)return void d.toast.error("GLOBAL (*) kayıt bulunamadı. Önce global değer oluşturmalısın.");if("site_meta_default"===b.key)return void d.toast.error("site_meta_default GLOBAL(*) olamaz. Locale için seed/structured değer yaz.");try{await x({key:b.key,locale:a,value:b.globalRow.value}).unwrap(),d.toast.success(`"${b.key}" i\xe7in ${a} override oluşturuldu (GLOBAL kopyalandı).`),await C()}catch(b){let a=b?.data?.error?.message||b?.message||"Override oluşturulurken hata oluştu.";d.toast.error(a)}},O=async(b,c)=>{try{if("seo"===b)await x({key:b,locale:c,value:F}).unwrap();else if("site_seo"===b)await x({key:b,locale:c,value:F}).unwrap();else{if("site_meta_default"!==b)return void d.toast.error("Bu key için default tanımlı değil.");if("*"===c)return void d.toast.error("site_meta_default global(*) olamaz. Locale seçerek restore et.");let e=G[c]||G[a]||G.de;await x({key:b,locale:c,value:e}).unwrap()}d.toast.success(`"${b}" (${c}) default değerler geri y\xfcklendi.`),await C()}catch(b){let a=b?.data?.error?.message||b?.message||"Default restore hata verdi.";d.toast.error(a)}},P=async()=>{try{for(let a of["seo","site_seo"])w.find(b=>b.key===a)?.globalRow||await x({key:a,locale:"*",value:F}).unwrap();d.toast.success("Eksik GLOBAL SEO kayıtları oluşturuldu."),await C()}catch(b){let a=b?.data?.error?.message||b?.message||"GLOBAL bootstrap hata verdi.";d.toast.error(a)}},Q=(0,c.useMemo)(()=>((Array.isArray(u.data)?u.data:[]).find(a=>a&&"site_og_default_image"===a.key)||null)??null,[u.data]),R=(0,c.useMemo)(()=>Q?function(a){let b=M(a);if(!b)return"";if(b.startsWith("http://")||b.startsWith("https://")||b.startsWith("data:")||b.startsWith("//"))return b;let c="http://localhost:3000".replace(/\/$/,"");try{return b.startsWith("/")?`${c}${b}`:`${c}/storage/${b}`}catch(a){}return b}(function(a){if(null==a)return"";if("string"==typeof a){let b=a.trim();if(!b)return"";if(!(b.startsWith("{")&&b.endsWith("}")||b.startsWith("[")&&b.endsWith("]")))return b;try{let a=JSON.parse(b);return M(a?.url)||""}catch{return b}}return"object"==typeof a&&M(a?.url)||""}(Q.value)):"",[Q]),S=async a=>{let b=M(a);if(b)try{let a;await x({key:"site_og_default_image",locale:"*",value:(a=M(b))?{url:a}:null}).unwrap(),d.toast.success("Varsayılan OG görseli güncellendi."),await u.refetch()}catch(b){let a=b?.data?.error?.message||b?.message||"Varsayılan OG görseli kaydedilirken hata oluştu.";d.toast.error(a)}};return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:"SEO Ayarları"}),(0,b.jsxs)(l.CardDescription,{children:["GLOBAL (",(0,b.jsx)("code",{children:"*"}),") default + seçili dil (",(0,b.jsx)("strong",{children:a}),') override birlikte yönetilir. "Düzenle" butonu form sayfasını açar.']})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(k.Badge,{variant:"secondary",children:["Dil: ",a]}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:C,disabled:B,children:"Yenile"}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:P,disabled:B,title:"seo / site_seo GLOBAL (*) yoksa default schema ile oluşturur",children:"Global Bootstrap"})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-md border p-4",children:[(0,b.jsx)("div",{className:"mb-4 flex items-start justify-between",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Varsayılan OG Görseli (Global)"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Key: ",(0,b.jsx)("code",{children:"site_og_default_image"})," / ",(0,b.jsx)("code",{children:'locale="*"'})]})]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(H.AdminImageUploadField,{label:"",helperText:(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Upload sonrası otomatik kaydedilir. Brand & Media tabındaki"," ",(0,b.jsx)("code",{children:"site_og_default_image"})," ile aynıdır."]}),bucket:"public",folder:"site-media",metadata:{key:"site_og_default_image",scope:"site_settings",locale:"*"},value:R,onChange:a=>void S(a),disabled:B,openLibraryHref:"/admin/storage",previewAspect:"16x9",previewObjectFit:"cover"}),R&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"rounded-md border bg-muted/50 p-3",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Kayıtlı URL:"}),(0,b.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>void N(R),disabled:B,children:"Kopyala"})]}),(0,b.jsx)("code",{className:"block wrap-break-word text-xs font-mono leading-relaxed",children:R})]}),(0,b.jsxs)("div",{className:"rounded-md border bg-muted/50 p-3",children:[(0,b.jsx)("div",{className:"mb-2 text-xs font-medium text-muted-foreground",children:"Önizleme:"}),(0,b.jsx)("div",{className:"relative aspect-video w-full max-w-sm overflow-hidden rounded border bg-background",children:(0,b.jsx)("img",{src:R,alt:"OG Default Image",className:"h-full w-full object-cover",onError:a=>{let b=a.target;b.style.display="none";let c=b.parentElement;if(c&&!c.querySelector(".error-message")){let a=document.createElement("div");a.className="error-message flex h-full items-center justify-center text-xs text-muted-foreground",a.textContent="Görsel yüklenemedi",c.appendChild(a)}}})})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"seo-search",children:"Ara"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Search,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"seo-search",type:"text",placeholder:"Key veya değer içinde ara",value:f,onChange:a=>g(a.target.value),disabled:B,className:"pl-9"})]})]}),B&&(0,b.jsx)("div",{children:(0,b.jsx)(k.Badge,{variant:"secondary",children:"Yükleniyor..."})}),(0,b.jsxs)("div",{className:"overflow-x-auto rounded-md border",children:[(0,b.jsxs)(p.Table,{className:"table-fixed",children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{className:"w-[20%]",children:"Key"}),(0,b.jsx)(p.TableHead,{className:"w-[15%]",children:"Kaynak"}),(0,b.jsx)(p.TableHead,{className:"w-[35%]",children:"Effective (Özet)"}),(0,b.jsx)(p.TableHead,{className:"w-[30%] text-right",children:"İşlemler"})]})}),(0,b.jsx)(p.TableBody,{children:w.length?w.map(d=>{var e;let f,g=!!d.globalRow,i=!!d.localeRow,j=(f=d.localeRow?a:d.globalRow?"*":a,"site_meta_default"===d.key&&"*"===f?a:f),l=L(d.key,j);return(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsxs)(p.TableRow,{className:"bg-muted/50",children:[(0,b.jsx)(p.TableCell,{className:"font-mono text-sm font-semibold",children:d.key}),(0,b.jsx)(p.TableCell,{children:"locale"===d.effectiveSource?(0,b.jsx)(k.Badge,{variant:"default",children:"Override"}):"global"===d.effectiveSource?(0,b.jsx)(k.Badge,{variant:"secondary",children:"Global"}):(0,b.jsx)(k.Badge,{variant:"outline",children:"Yok"})}),(0,b.jsxs)(p.TableCell,{children:[(0,b.jsx)("div",{className:"wrap-break-word overflow-hidden text-sm text-muted-foreground",children:K(d.effectiveValue)}),"global"===d.effectiveSource&&!i&&(0,b.jsxs)("div",{className:"mt-1 wrap-break-word text-xs text-muted-foreground",children:["Bu key için ",(0,b.jsx)("strong",{children:a})," override yok; GLOBAL (",(0,b.jsx)("code",{children:"*"}),") uygulanıyor."]})]}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsx)("div",{className:"flex flex-col gap-2",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-1",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(o.default,{href:l,children:"Düzenle"})}),!i&&g&&"site_meta_default"!==d.key&&(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>E(d),disabled:B,children:"Override Oluştur"}),("seo"===(e=d.key)||"site_seo"===e||"site_meta_default"===e)&&(g||i)&&(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>O(d.key,i?a:"*"),disabled:B,title:"Bu satırın default değerlerini geri yükler",children:"Restore"})]})})})]}),(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableCell,{className:"pl-8 text-sm text-muted-foreground",children:"GLOBAL (*)"}),(0,b.jsx)(p.TableCell,{className:"text-sm text-muted-foreground",children:g?"Var":"Yok"}),(0,b.jsx)(p.TableCell,{className:"wrap-break-word overflow-hidden text-sm text-muted-foreground",children:g?K(d.globalRow?.value):"-"}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-1",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",disabled:!g,children:(0,b.jsx)(o.default,{href:L(d.key,"site_meta_default"===d.key?a:"*"),"aria-disabled":!g,tabIndex:g?0:-1,children:"Düzenle"})}),(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",disabled:B||!g,onClick:()=>D(d.key,"*"),title:"site_meta_default"===d.key?"Normalde GLOBAL olmaz; varsa silinebilir.":"",children:"Sil"})]})})]}),(0,b.jsxs)(p.TableRow,{children:[(0,b.jsxs)(p.TableCell,{className:"pl-8 text-sm text-muted-foreground",children:["LOCALE (",a,")"]}),(0,b.jsx)(p.TableCell,{className:"text-sm text-muted-foreground",children:i?"Var":"Yok"}),(0,b.jsx)(p.TableCell,{className:"wrap-break-word overflow-hidden text-sm text-muted-foreground",children:i?K(d.localeRow?.value):"-"}),(0,b.jsx)(p.TableCell,{className:"align-top",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-1",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",disabled:!i,children:(0,b.jsx)(o.default,{href:L(d.key,a),"aria-disabled":!i,tabIndex:i?0:-1,children:"Düzenle"})}),(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",disabled:B||!i,onClick:()=>D(d.key,a),children:"Sil"})]})})]})]},`group_${d.key}`)}):(0,b.jsx)(p.TableRow,{children:(0,b.jsx)(p.TableCell,{colSpan:4,className:"py-10 text-center",children:(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["SEO kaydı bulunamadı.",(0,b.jsxs)("div",{className:"mt-2",children:["Seed çalıştıysa en az ",(0,b.jsx)("code",{children:"seo"})," ve ",(0,b.jsx)("code",{children:"site_seo"})," GLOBAL satırı görünmelidir."]})]})})})})]}),(0,b.jsx)("div",{className:"border-t p-3",children:(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Not: ",(0,b.jsx)("code",{children:"site_meta_default"})," GLOBAL(*) olamaz; edit linki her zaman locale ile açılır."]})})]})]})]})};var P=a.i(93456),Q=a.i(63658),R=a.i(5084);let S=["smtp_host","smtp_port","smtp_username","smtp_password","smtp_from_email","smtp_from_name","smtp_ssl"],T={smtp_host:"",smtp_port:"",smtp_username:"",smtp_password:"",smtp_from_email:"",smtp_from_name:"",smtp_ssl:!1};function U(a){if(null==a)return"";if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return String(a);try{return JSON.stringify(a)}catch{return String(a)}}let V=({locale:a})=>{let e=(0,g.useAdminTranslations)(a),{data:f,isLoading:m,isFetching:n,refetch:o}=(0,t.useListSiteSettingsAdminQuery)({keys:S}),[p,{isLoading:q}]=(0,t.useUpdateSiteSettingAdminMutation)(),[r,{isLoading:s}]=(0,P.useSendTestMailMutation)(),[u,v]=c.default.useState(T),[w,x]=c.default.useState("");c.default.useEffect(()=>{let a=function(a){let b=new Map;if(a)for(let c of a)b.set(c.key,c);return b}(f),b={...T};b.smtp_host=U(a.get("smtp_host")?.value),b.smtp_port=U(a.get("smtp_port")?.value),b.smtp_username=U(a.get("smtp_username")?.value),b.smtp_password=U(a.get("smtp_password")?.value),b.smtp_from_email=U(a.get("smtp_from_email")?.value),b.smtp_from_name=U(a.get("smtp_from_name")?.value),b.smtp_ssl=function(a){if(!0===a)return!0;if(!1===a)return!1;if("number"==typeof a)return 1===a;if("string"==typeof a){let b=a.trim().toLowerCase();return"1"===b||"true"===b||"yes"===b||"on"===b}return!1}(a.get("smtp_ssl")?.value),v(b)},[f]);let y=m||n||q||s,z=(a,b)=>{v(c=>({...c,[a]:b}))},A=async()=>{try{for(let a of[{key:"smtp_host",value:u.smtp_host.trim()},{key:"smtp_port",value:u.smtp_port.trim()||""},{key:"smtp_username",value:u.smtp_username.trim()},{key:"smtp_password",value:u.smtp_password},{key:"smtp_from_email",value:u.smtp_from_email.trim()},{key:"smtp_from_name",value:u.smtp_from_name.trim()},{key:"smtp_ssl",value:u.smtp_ssl}])await p({key:a.key,value:a.value}).unwrap();d.toast.success(e("admin.siteSettings.smtp.saved")),await o()}catch(b){let a=b?.data?.error?.message||b?.message||e("admin.siteSettings.smtp.saved");d.toast.error(a)}},B=async()=>{try{let a=w.trim(),b=u.smtp_from_email.trim();a?await r({to:a}).unwrap():b?await r({to:b}).unwrap():await r().unwrap(),d.toast.success(e("admin.siteSettings.smtp.testSent"))}catch(b){let a=b?.data?.error?.details||b?.data?.error?.message||b?.message;d.toast.error(a||e("admin.siteSettings.smtp.testSent"))}};return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:e("admin.siteSettings.smtp.title")}),(0,b.jsx)(l.CardDescription,{children:e("admin.siteSettings.smtp.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(k.Badge,{variant:"secondary",children:e("admin.siteSettings.smtp.badge",{locale:a||"—"})}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:o,disabled:y,children:e("admin.common.refresh")})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[y&&(0,b.jsx)("div",{children:(0,b.jsx)(k.Badge,{variant:"secondary",children:e("admin.common.loading")})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-12",children:[(0,b.jsxs)("div",{className:"space-y-2 md:col-span-6",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-host",className:"text-sm",children:e("admin.siteSettings.smtp.host")}),(0,b.jsx)(i.Input,{id:"smtp-host",value:u.smtp_host,onChange:a=>z("smtp_host",a.target.value),placeholder:e("admin.siteSettings.smtp.hostPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-3",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-port",className:"text-sm",children:e("admin.siteSettings.smtp.port")}),(0,b.jsx)(i.Input,{id:"smtp-port",value:u.smtp_port,onChange:a=>z("smtp_port",a.target.value),placeholder:e("admin.siteSettings.smtp.portPlaceholder"),disabled:y})]}),(0,b.jsx)("div",{className:"flex items-end md:col-span-3",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(Q.Switch,{id:"smtp-ssl",checked:u.smtp_ssl,onCheckedChange:()=>{v(a=>({...a,smtp_ssl:!a.smtp_ssl}))},disabled:y}),(0,b.jsx)(j.Label,{htmlFor:"smtp-ssl",className:"text-sm",children:e("admin.siteSettings.smtp.ssl")})]})}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-6",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-username",className:"text-sm",children:e("admin.siteSettings.smtp.username")}),(0,b.jsx)(i.Input,{id:"smtp-username",value:u.smtp_username,onChange:a=>z("smtp_username",a.target.value),placeholder:e("admin.siteSettings.smtp.usernamePlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-6",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-password",className:"text-sm",children:e("admin.siteSettings.smtp.password")}),(0,b.jsx)(i.Input,{id:"smtp-password",type:"password",value:u.smtp_password,onChange:a=>z("smtp_password",a.target.value),placeholder:e("admin.siteSettings.smtp.passwordPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-6",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-from-email",className:"text-sm",children:e("admin.siteSettings.smtp.fromEmail")}),(0,b.jsx)(i.Input,{id:"smtp-from-email",value:u.smtp_from_email,onChange:a=>z("smtp_from_email",a.target.value),placeholder:e("admin.siteSettings.smtp.fromEmailPlaceholder"),disabled:y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:e("admin.siteSettings.smtp.fromEmailHelp")})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-6",children:[(0,b.jsx)(j.Label,{htmlFor:"smtp-from-name",className:"text-sm",children:e("admin.siteSettings.smtp.fromName")}),(0,b.jsx)(i.Input,{id:"smtp-from-name",value:u.smtp_from_name,onChange:a=>z("smtp_from_name",a.target.value),placeholder:e("admin.siteSettings.smtp.fromNamePlaceholder"),disabled:y})]})]}),(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("div",{className:"grid grid-cols-1 items-end gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"test-email",className:"text-sm",children:e("admin.siteSettings.smtp.testEmail")}),(0,b.jsx)(i.Input,{id:"test-email",value:w,onChange:a=>x(a.target.value),placeholder:e("admin.siteSettings.smtp.testEmailPlaceholder"),disabled:y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:e("admin.siteSettings.smtp.testEmailHelp")})]}),(0,b.jsxs)("div",{className:"mt-3 flex justify-end gap-2 md:mt-0 md:justify-end",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",disabled:y,onClick:B,children:s?e("admin.siteSettings.smtp.sendingTest"):e("admin.siteSettings.smtp.sendTest")}),(0,b.jsx)(h.Button,{type:"button",variant:"default",disabled:y,onClick:A,children:q?e("admin.common.saving"):e("admin.common.save")})]})]})]})]})};var W=a.i(77262);let X=["storage_driver","storage_local_root","storage_local_base_url","storage_cdn_public_base","storage_public_api_base","cloudinary_cloud_name","cloudinary_api_key","cloudinary_api_secret","cloudinary_folder","cloudinary_unsigned_preset"],Y={storage_driver:"",storage_local_root:"",storage_local_base_url:"",storage_cdn_public_base:"",storage_public_api_base:"",cloudinary_cloud_name:"",cloudinary_api_key:"",cloudinary_api_secret:"",cloudinary_folder:"",cloudinary_unsigned_preset:""},Z=({locale:a})=>{let{data:e,isLoading:f,isFetching:m,refetch:n}=(0,t.useListSiteSettingsAdminQuery)({keys:X}),[o,{isLoading:p}]=(0,t.useUpdateSiteSettingAdminMutation)(),[q,{data:r,isFetching:s,error:u}]=(0,W.useLazyDiagCloudinaryAdminQuery)(),[v,w]=c.useState(Y),x=(0,g.useAdminTranslations)(a);c.useEffect(()=>{let a=function(a){let b=new Map;if(a)for(let c of a)b.set(String(c.key),c);return b}(e),b={...Y};X.forEach(c=>b[c]=function(a){if(null==a)return"";if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return String(a);try{return JSON.stringify(a)}catch{return String(a)}}(a.get(c)?.value)),w(b)},[e]);let y=f||m||p||s,z=(a,b)=>{w(c=>({...c,[a]:b}))},A=async()=>{if(!y)try{for(let a of X)await o({key:a,value:v[a].trim()}).unwrap();d.toast.success(x("admin.siteSettings.cloudinary.saved")),await n()}catch(b){var a;d.toast.error((a=x("admin.siteSettings.messages.error"),b?.data?.error?.message||b?.data?.message||b?.message||a))}},B=async()=>{if(!y)try{let a=await q().unwrap();a?.ok?d.toast.success(x("admin.siteSettings.cloudinary.testSuccess",{cloud:a.cloud,publicId:a.uploaded?.public_id||""})):d.toast.error(x("admin.siteSettings.cloudinary.testFailedConsole"))}catch(c){let a=c?.status,b=c?.data;if(501===a)return void("driver_is_local"===b?.reason?d.toast.error(x("admin.siteSettings.cloudinary.testFailedLocal")):d.toast.error(x("admin.siteSettings.cloudinary.testFailedConfig")));if(502===a){let a=b?.step,e=b?.error?.msg||b?.error?.message||b?.message||c?.message||"Cloudinary test failed.";d.toast.error(x("admin.siteSettings.cloudinary.testFailedStep",{step:a||"unknown",message:e}));return}d.toast.error(b?.error?.msg||b?.error?.message||b?.message||c?.message||x("admin.siteSettings.messages.error"))}},C=c.useMemo(()=>s?x("admin.siteSettings.cloudinary.testInfoTesting"):r?.ok?x("admin.siteSettings.cloudinary.testInfoSuccess",{cloud:r.cloud}):u?x("admin.siteSettings.cloudinary.testInfoError"):x("admin.siteSettings.cloudinary.testInfo"),[s,r,u,x]);return(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:x("admin.siteSettings.cloudinary.title")}),(0,b.jsx)(l.CardDescription,{children:x("admin.siteSettings.cloudinary.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(k.Badge,{variant:"secondary",children:x("admin.siteSettings.cloudinary.badge",{locale:a||"—"})}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>n(),disabled:y,children:x("admin.siteSettings.actions.refresh")}),y?(0,b.jsx)(k.Badge,{variant:"outline",children:x("admin.siteSettings.messages.loading")}):null]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"storage_driver",children:x("admin.siteSettings.cloudinary.storageDriver")}),(0,b.jsx)(i.Input,{id:"storage_driver",value:v.storage_driver,onChange:a=>z("storage_driver",a.target.value),placeholder:x("admin.siteSettings.cloudinary.storageDriverPlaceholder"),disabled:y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:x("admin.siteSettings.cloudinary.storageDriverHelp")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"storage_local_root",children:x("admin.siteSettings.cloudinary.localRoot")}),(0,b.jsx)(i.Input,{id:"storage_local_root",value:v.storage_local_root,onChange:a=>z("storage_local_root",a.target.value),placeholder:x("admin.siteSettings.cloudinary.localRootPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"storage_local_base_url",children:x("admin.siteSettings.cloudinary.localBaseUrl")}),(0,b.jsx)(i.Input,{id:"storage_local_base_url",value:v.storage_local_base_url,onChange:a=>z("storage_local_base_url",a.target.value),placeholder:x("admin.siteSettings.cloudinary.localBaseUrlPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2 lg:col-span-1",children:[(0,b.jsx)(j.Label,{htmlFor:"storage_cdn_public_base",children:x("admin.siteSettings.cloudinary.cdnPublicBase")}),(0,b.jsx)(i.Input,{id:"storage_cdn_public_base",value:v.storage_cdn_public_base,onChange:a=>z("storage_cdn_public_base",a.target.value),placeholder:x("admin.siteSettings.cloudinary.cdnPublicBasePlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2 lg:col-span-2",children:[(0,b.jsx)(j.Label,{htmlFor:"storage_public_api_base",children:x("admin.siteSettings.cloudinary.publicApiBase")}),(0,b.jsx)(i.Input,{id:"storage_public_api_base",value:v.storage_public_api_base,onChange:a=>z("storage_public_api_base",a.target.value),placeholder:x("admin.siteSettings.cloudinary.publicApiBasePlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"cloudinary_cloud_name",children:x("admin.siteSettings.cloudinary.cloudName")}),(0,b.jsx)(i.Input,{id:"cloudinary_cloud_name",value:v.cloudinary_cloud_name,onChange:a=>z("cloudinary_cloud_name",a.target.value),placeholder:x("admin.siteSettings.cloudinary.cloudNamePlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"cloudinary_api_key",children:x("admin.siteSettings.cloudinary.apiKey")}),(0,b.jsx)(i.Input,{id:"cloudinary_api_key",value:v.cloudinary_api_key,onChange:a=>z("cloudinary_api_key",a.target.value),placeholder:x("admin.siteSettings.cloudinary.apiKeyPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"cloudinary_api_secret",children:x("admin.siteSettings.cloudinary.apiSecret")}),(0,b.jsx)(i.Input,{id:"cloudinary_api_secret",value:v.cloudinary_api_secret,onChange:a=>z("cloudinary_api_secret",a.target.value),placeholder:x("admin.siteSettings.cloudinary.apiSecretPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1 lg:col-span-1",children:[(0,b.jsx)(j.Label,{htmlFor:"cloudinary_folder",children:x("admin.siteSettings.cloudinary.folder")}),(0,b.jsx)(i.Input,{id:"cloudinary_folder",value:v.cloudinary_folder,onChange:a=>z("cloudinary_folder",a.target.value),placeholder:x("admin.siteSettings.cloudinary.folderPlaceholder"),disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1 lg:col-span-2",children:[(0,b.jsx)(j.Label,{htmlFor:"cloudinary_unsigned_preset",children:x("admin.siteSettings.cloudinary.unsignedPreset")}),(0,b.jsx)(i.Input,{id:"cloudinary_unsigned_preset",value:v.cloudinary_unsigned_preset,onChange:a=>z("cloudinary_unsigned_preset",a.target.value),placeholder:x("admin.siteSettings.cloudinary.unsignedPresetPlaceholder"),disabled:y})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 border-t pt-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:C}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",disabled:y,onClick:B,children:s?x("admin.siteSettings.cloudinary.testing"):x("admin.siteSettings.cloudinary.testButton")}),(0,b.jsx)(h.Button,{type:"button",variant:"default",disabled:y,onClick:A,children:p?x("admin.siteSettings.actions.saving"):x("admin.siteSettings.actions.save")})]})]})]})]})})};Z.displayName="CloudinarySettingsTab";var $=a.i(79755);let _=["site_logo","site_logo_dark","site_logo_light","site_favicon","site_apple_touch_icon","site_app_icon_512","site_og_default_image"],aa={site_logo:"Logo",site_logo_dark:"Logo (Dark)",site_logo_light:"Logo (Light)",site_favicon:"Favicon",site_apple_touch_icon:"Apple Touch Icon",site_app_icon_512:"App Icon 512x512",site_og_default_image:"OG Default Image"};function ab(a){return _.includes(a)}let ac={site_logo:{aspect:"4x3",fit:"contain"},site_logo_dark:{aspect:"4x3",fit:"contain"},site_logo_light:{aspect:"4x3",fit:"contain"},site_favicon:{aspect:"1x1",fit:"contain"},site_apple_touch_icon:{aspect:"1x1",fit:"contain"},site_app_icon_512:{aspect:"1x1",fit:"contain"},site_og_default_image:{aspect:"16x9",fit:"cover"}},ad=a=>null==a?"":String(a).trim();async function ae(a,b,c){let e=ad(a);if(e)try{await navigator.clipboard.writeText(e),d.toast.success(b)}catch{d.toast.error(c)}}let af=()=>{let[a,f]=(0,c.useState)(""),g=(0,$.useAdminT)(),m=(0,c.useMemo)(()=>({locale:"*",q:a.trim()||void 0,keys:[..._],sort:"key",order:"asc",limit:200,offset:0}),[a]),n=(0,t.useListSiteSettingsAdminQuery)(m,{refetchOnMountOrArgChange:!0}),[p,{isLoading:q}]=(0,t.useUpdateSiteSettingAdminMutation)(),[r,{isLoading:s}]=(0,t.useDeleteSiteSettingAdminMutation)(),u=n.isLoading||n.isFetching||q||s,v=(0,c.useCallback)(async()=>{await n.refetch()},[n.refetch]),w=(0,c.useMemo)(()=>{let b=(Array.isArray(n.data)?n.data:[]).filter(a=>a&&ab(String(a.key||""))&&"*"===String(a.locale??"")),c=a.trim().toLowerCase();return!c||c.length<2?b:b.filter(a=>String(a?.key||"").toLowerCase().includes(c))},[n.data,a]),x=(0,c.useMemo)(()=>{let a=new Map;for(let b of _)a.set(b,null);for(let b of w)b&&ab(String(b.key||""))&&a.set(b.key,b);return a},[w]),y=(0,c.useCallback)(async(a,b)=>{let c=ad(b);if(c)try{let b;await p({key:a,locale:"*",value:(b=ad(c))?{url:b}:null}).unwrap(),d.toast.success(g("admin.siteSettings.brandMedia.updated",{label:aa[a]})),await v()}catch(b){d.toast.error(b?.data?.error?.message||b?.message||g("admin.siteSettings.brandMedia.updateError",{label:aa[a]}))}},[p,v,g]),z=(0,c.useCallback)(async a=>{if(window.confirm(g("admin.siteSettings.brandMedia.deleteConfirm",{key:a,locale:"*"})))try{await r({key:a,locale:"*"}).unwrap(),d.toast.success(g("admin.common.deleted",{item:a})),await v()}catch(a){d.toast.error(a?.data?.error?.message||a?.message||g("admin.siteSettings.brandMedia.deleteError"))}},[r,v,g]);return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:g("admin.siteSettings.brandMedia.title")}),(0,b.jsx)(l.CardDescription,{children:g("admin.siteSettings.brandMedia.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(k.Badge,{variant:"secondary",children:"Locale: *"}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:v,disabled:u,children:g("admin.siteSettings.actions.refresh")})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"brand-search",children:g("admin.siteSettings.filters.search")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Search,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"brand-search",type:"text",placeholder:g("admin.siteSettings.brandMedia.searchPlaceholder"),value:a,onChange:a=>f(a.target.value),disabled:u,className:"pl-9"})]})]}),u&&(0,b.jsx)("div",{children:(0,b.jsx)(k.Badge,{variant:"secondary",children:g("admin.siteSettings.messages.loading")})}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:_.map(a=>{let c=x.get(a)??null,d=!!c,e=function(a){let b=ad(a);if(!b)return"";if(b.startsWith("http://")||b.startsWith("https://")||b.startsWith("data:")||b.startsWith("//"))return b;let c="http://localhost:3000".replace(/\/$/,"");try{return b.startsWith("/")?`${c}${b}`:`${c}/storage/${b}`}catch(a){}return b}(function(a){if(null==a)return"";if("string"==typeof a){let b=a.trim();if(!b)return"";if(b.startsWith("{")&&b.endsWith("}")||b.startsWith("[")&&b.endsWith("]"))try{let a=JSON.parse(b),c=ad(a?.url);if(c)return c}catch{}return b}if("object"==typeof a&&null!==a){let b=ad(a?.url);if(b)return b}return""}(c?.value??null)),f=ac[a];return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-sm",children:g(`admin.siteSettings.brandMedia.labels.${a}`)}),(0,b.jsxs)(l.CardDescription,{className:"text-xs",children:[(0,b.jsx)("code",{className:"font-mono",children:a}),(0,b.jsx)("span",{className:"mx-1",children:"•"}),(0,b.jsx)("span",{children:"locale: *"})]})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(o.default,{href:`/admin/site-settings/${encodeURIComponent(a)}?locale=${encodeURIComponent("*")}`,children:g("admin.siteSettings.actions.edit")})}),(0,b.jsx)(h.Button,{type:"button",variant:"destructive",size:"sm",disabled:u||!d,onClick:()=>void z(a),children:g("admin.siteSettings.actions.delete")})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsx)(H.AdminImageUploadField,{label:"",helperText:(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:g("admin.siteSettings.brandMedia.uploadHelp")}),bucket:"public",folder:"site-media",metadata:{key:a,scope:"site_settings",locale:"*"},value:e,onChange:b=>void y(a,b),disabled:u,openLibraryHref:"/admin/storage",previewAspect:f.aspect,previewObjectFit:f.fit}),e&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"rounded-md border bg-muted/50 p-3",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:g("admin.common.savedUrl")}),(0,b.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>void ae(e,g("admin.common.copySuccess"),g("admin.common.copyFailed")),disabled:u,children:g("admin.siteSettings.actions.copy")})]}),(0,b.jsx)("code",{className:"block wrap-break-word text-xs font-mono leading-relaxed",children:e})]}),(0,b.jsxs)("div",{className:"rounded-md border bg-muted/50 p-3",children:[(0,b.jsx)("div",{className:"mb-2 text-xs font-medium text-muted-foreground",children:g("admin.common.previewColon")}),(0,b.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded border bg-background",children:(0,b.jsx)("img",{src:e,alt:g(`admin.siteSettings.brandMedia.labels.${a}`),className:"h-full w-full object-contain",onError:a=>{let b=a.target;b.style.display="none";let c=b.parentElement;if(c&&!c.querySelector(".error-message")){let a=document.createElement("div");a.className="error-message flex h-full items-center justify-center text-xs text-muted-foreground",a.textContent=g("admin.common.imageLoadFailed"),c.appendChild(a)}}})})]})]})]})]},`media_${a}`)})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:g("admin.siteSettings.brandMedia.note")})]})]})};af.displayName="BrandMediaTab";var ag=a.i(29246);let ah=["google_client_id","google_client_secret","gtm_container_id","ga4_measurement_id","cookie_consent"],ai={google_client_id:"",google_client_secret:"",gtm_container_id:"",ga4_measurement_id:"",cookie_consent:""},aj=({locale:a})=>{let{data:e,isLoading:m,isFetching:n,refetch:o}=(0,t.useListSiteSettingsAdminQuery)({keys:ah,locale:"*"}),[p,{isLoading:q}]=(0,t.useUpdateSiteSettingAdminMutation)(),[r,s]=c.useState(ai),u=(0,g.useAdminTranslations)(a);c.useEffect(()=>{let a=function(a){let b=new Map;if(a)for(let c of a)b.set(c.key,c);return b}(e),b={...ai};ah.forEach(c=>{b[c]=function(a){if(null==a)return"";if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return String(a);try{return JSON.stringify(a,null,2)}catch{return String(a)}}(a.get(c)?.value)}),s(b)},[e]);let v=m||n||q,w=(a,b)=>s(c=>({...c,[a]:b})),x=async()=>{try{for(let a of[{key:"google_client_id",value:r.google_client_id.trim()},{key:"google_client_secret",value:r.google_client_secret.trim()},{key:"gtm_container_id",value:r.gtm_container_id.trim()},{key:"ga4_measurement_id",value:r.ga4_measurement_id.trim()},{key:"cookie_consent",value:function(a){let b=String(a??"").trim();if(!b)return"";try{return JSON.parse(b)}catch{return b}}(r.cookie_consent)}])await p({key:a.key,value:a.value,locale:"*"}).unwrap();d.toast.success(u("admin.siteSettings.api.saved")),await o()}catch(b){let a=b?.data?.error?.message||b?.message||u("admin.siteSettings.api.saveError");d.toast.error(a)}};return(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:u("admin.siteSettings.api.title")}),(0,b.jsx)(l.CardDescription,{children:u("admin.siteSettings.api.description")})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(k.Badge,{variant:"secondary",children:u("admin.siteSettings.api.badge")}),a&&(0,b.jsx)(k.Badge,{variant:"outline",children:u("admin.siteSettings.api.uiBadge",{locale:a})}),v&&(0,b.jsx)(k.Badge,{variant:"outline",children:u("admin.siteSettings.messages.loading")}),(0,b.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(),disabled:v,title:u("admin.siteSettings.actions.refresh"),children:(0,b.jsx)(f.RefreshCcw,{className:"size-4"})})]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:u("admin.siteSettings.api.note")}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"google_client_id",children:[u("admin.siteSettings.api.googleClientId"),(0,b.jsx)("code",{className:"ml-2 text-xs text-muted-foreground",children:"(google_client_id)"})]}),(0,b.jsx)(i.Input,{id:"google_client_id",value:r.google_client_id,onChange:a=>w("google_client_id",a.target.value),placeholder:"Google OAuth Client ID",disabled:v}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:u("admin.siteSettings.api.googleClientIdHelp")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"google_client_secret",children:[u("admin.siteSettings.api.googleClientSecret"),(0,b.jsx)("code",{className:"ml-2 text-xs text-muted-foreground",children:"(google_client_secret)"})]}),(0,b.jsx)(i.Input,{id:"google_client_secret",type:"password",value:r.google_client_secret,onChange:a=>w("google_client_secret",a.target.value),placeholder:"Google OAuth Client Secret",disabled:v}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:u("admin.siteSettings.api.googleClientSecretHelp")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"gtm_container_id",children:[u("admin.siteSettings.api.gtmContainerId"),(0,b.jsx)("code",{className:"ml-2 text-xs text-muted-foreground",children:"(gtm_container_id)"})]}),(0,b.jsx)(i.Input,{id:"gtm_container_id",value:r.gtm_container_id,onChange:a=>w("gtm_container_id",a.target.value),placeholder:u("admin.siteSettings.api.gtmContainerIdPlaceholder"),disabled:v}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:u("admin.siteSettings.api.gtmContainerIdHelp")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"ga4_measurement_id",children:[u("admin.siteSettings.api.ga4MeasurementId"),(0,b.jsx)("code",{className:"ml-2 text-xs text-muted-foreground",children:"(ga4_measurement_id)"})]}),(0,b.jsx)(i.Input,{id:"ga4_measurement_id",value:r.ga4_measurement_id,onChange:a=>w("ga4_measurement_id",a.target.value),placeholder:u("admin.siteSettings.api.ga4MeasurementIdPlaceholder"),disabled:v}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:u("admin.siteSettings.api.ga4MeasurementIdHelp")})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"cookie_consent",children:[u("admin.siteSettings.api.cookieConsent"),(0,b.jsx)("code",{className:"ml-2 text-xs text-muted-foreground",children:"(cookie_consent)"})]}),(0,b.jsx)(ag.Textarea,{id:"cookie_consent",rows:10,value:r.cookie_consent,onChange:a=>w("cookie_consent",a.target.value),placeholder:u("admin.siteSettings.api.cookieConsentPlaceholder"),disabled:v,className:"font-mono text-xs"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:u("admin.siteSettings.api.cookieConsentHelp")})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(h.Button,{type:"button",onClick:x,disabled:v,children:q?u("admin.siteSettings.actions.saving"):u("admin.siteSettings.actions.save")})})]})]})};function ak(a){return null==a?"":String(a)}function al(a,b){let c=a?.data?.error?.message;if("string"==typeof c&&c.trim())return c;let d=a?.data?.error;if("string"==typeof d&&d.trim())return d;let e=a?.data?.message;if("string"==typeof e&&e.trim())return e;let f=a?.error;return"string"==typeof f&&f.trim()?f:b}function am({locale:a,search:d,onDeleteRow:e}){let f=c.useMemo(()=>({locale:a,q:d.trim()||void 0,sort:"key",order:"asc",limit:200,offset:0}),[a,d]),g=(0,t.useListSiteSettingsAdminQuery)(f,{skip:!a,refetchOnMountOrArgChange:!0}),h=g.isLoading||g.isFetching;return(0,b.jsx)(s,{settings:g.data??[],loading:h,selectedLocale:a,onDelete:e,getEditHref:b=>{var c;return c=String(b.key||""),`/admin/site-settings/${encodeURIComponent(c)}?locale=${encodeURIComponent(a)}`}})}function an(){let a=(0,t.useGetAppLocalesAdminQuery)(),o=(0,t.useGetDefaultLocaleAdminQuery)(),p=c.useMemo(()=>{var b,c;let d,e,f;return b=a.data,c=o.data,d=Array.isArray(b)?b:[],e="string"==typeof c?c:ak(c),(f=[...d].sort((a,b)=>{let c=+(a?.is_active===!1),d=+(b?.is_active===!1);return c!==d?c-d:String(a?.code||"").localeCompare(String(b?.code||""))}).filter(a=>a?.code).map(a=>{let b=String(a.code),c=a.label?`${a.label} (${b})`:b;return{value:b,label:c+(a.is_default?" • default":!1===a.is_active?" • inactive":"")}})).length?f:[{value:e||"de",label:e||"de"}]},[a.data,o.data]),q=c.useMemo(()=>(function(a,b){let c=Array.isArray(a)?a:[],d="string"==typeof b?b.trim():ak(b).trim();if(d)return d;let e=c.find(a=>a?.is_active!==!1&&a?.code)?.code;return e?String(e):"de"})(a.data,o.data),[a.data,o.data]),[r,s]=c.useState("general"),[u,v]=c.useState(""),[w,x]=c.useState(""),[y,{isLoading:A}]=(0,t.useDeleteSiteSettingAdminMutation)(),B=(0,g.useAdminTranslations)(w);c.useEffect(()=>{w||x(q)},[q]);let C=a.isFetching||o.isFetching||a.isLoading||o.isLoading||A,D=async()=>{try{await Promise.all([a.refetch(),o.refetch()]),d.toast.success(B("admin.siteSettings.filters.refreshed"))}catch(a){d.toast.error(al(a,B("admin.siteSettings.messages.error")))}},E=async a=>{let b=String(a?.key||"").trim(),c=a?.locale?String(a.locale):void 0;if(b&&window.confirm(`"${b}" (${c||w||"—"}) silinsin mi?`))try{await y({key:b,locale:c??void 0}).unwrap(),d.toast.success(B("admin.siteSettings.messages.deleted"))}catch(a){d.toast.error(al(a,B("admin.siteSettings.messages.error")))}},F=!!(w&&w.trim()),G="global_list"===r||"smtp"===r||"brand_media"===r;return(0,b.jsxs)("div",{className:"w-full max-w-full space-y-6 overflow-x-hidden px-2 pb-6 md:px-0 md:pb-0",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:B("admin.siteSettings.title")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:B("admin.siteSettings.description")})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{className:"gap-2",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:B("admin.siteSettings.filters.title")}),(0,b.jsx)(l.CardDescription,{children:B("admin.siteSettings.filters.description")})]}),(0,b.jsx)(l.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-end",children:[(0,b.jsxs)("div",{className:"w-full flex-1 space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"q",children:B("admin.siteSettings.filters.search")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Search,{className:"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"q",value:u,onChange:a=>v(a.target.value),placeholder:B("admin.siteSettings.filters.searchPlaceholder"),className:"w-full pl-9",disabled:C})]})]}),(0,b.jsxs)("div",{className:"w-full space-y-2 lg:w-56",children:[(0,b.jsx)(j.Label,{children:B("admin.siteSettings.filters.language")}),(0,b.jsxs)(n.Select,{value:F?w:"",onValueChange:a=>x(a),disabled:C||G,children:[(0,b.jsx)(n.SelectTrigger,{className:"w-full",children:(0,b.jsx)(n.SelectValue,{placeholder:G?"Global":B("admin.siteSettings.filters.selectLanguage")})}),(0,b.jsx)(n.SelectContent,{children:(p??[]).map(a=>(0,b.jsx)(n.SelectItem,{value:a.value,children:a.label},a.value))})]}),G?(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:B("admin.siteSettings.filters.languageDisabledNote")}):null]}),(0,b.jsxs)("div",{className:"flex w-full gap-2 lg:w-auto",children:[(0,b.jsxs)(h.Button,{type:"button",variant:"ghost",onClick:D,disabled:C,title:B("admin.siteSettings.filters.refreshButton"),className:"flex-1 lg:flex-initial",children:[(0,b.jsx)(f.RefreshCcw,{className:"size-4"}),(0,b.jsx)("span",{className:"ml-2 lg:hidden",children:B("admin.siteSettings.filters.refreshButton")})]}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>{v(""),G||x(q)},disabled:C,className:"flex-1 lg:flex-initial",children:B("admin.siteSettings.filters.resetButton")})]})]})})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{className:"gap-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(l.CardTitle,{className:"text-base",children:B("admin.siteSettings.management.title")}),(0,b.jsxs)(l.CardDescription,{children:["list"===r?B("admin.siteSettings.management.localeRecords"):null,"global_list"===r?B("admin.siteSettings.management.globalRecords"):null,"general"===r?B("admin.siteSettings.general.title"):null,"seo"===r?B("admin.siteSettings.tabs.seo"):null,"smtp"===r?B("admin.siteSettings.tabs.smtp"):null,"cloudinary"===r?B("admin.siteSettings.cloudinary.title"):null,"brand_media"===r?B("admin.siteSettings.brandMedia.title"):null,"api"===r?B("admin.siteSettings.api.title"):null]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[G?(0,b.jsx)(k.Badge,{variant:"secondary",children:"Global"}):null,!G&&F?(0,b.jsx)(k.Badge,{variant:"secondary",children:w}):null,C?(0,b.jsx)(k.Badge,{variant:"outline",children:B("admin.siteSettings.messages.loading")}):null]})]})}),(0,b.jsx)(l.CardContent,{className:"space-y-4",children:F?(0,b.jsxs)(m.Tabs,{value:r,onValueChange:a=>s(a),children:[(0,b.jsx)("div",{className:"-mx-2 overflow-x-auto px-2 md:mx-0 md:overflow-x-visible md:px-0",children:(0,b.jsxs)(m.TabsList,{className:"inline-flex min-w-full flex-nowrap justify-start md:flex-wrap",children:[(0,b.jsx)(m.TabsTrigger,{value:"list",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.list")}),(0,b.jsx)(m.TabsTrigger,{value:"global_list",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.globalList")}),(0,b.jsx)(m.TabsTrigger,{value:"general",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.general")}),(0,b.jsx)(m.TabsTrigger,{value:"seo",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.seo")}),(0,b.jsx)(m.TabsTrigger,{value:"smtp",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.smtp")}),(0,b.jsx)(m.TabsTrigger,{value:"cloudinary",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.cloudinary")}),(0,b.jsx)(m.TabsTrigger,{value:"brand_media",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.brandMedia")}),(0,b.jsx)(m.TabsTrigger,{value:"api",className:"whitespace-nowrap",children:B("admin.siteSettings.tabs.api")})]})}),(0,b.jsx)(m.TabsContent,{value:"list",className:"mt-4",children:(0,b.jsx)(am,{locale:w,search:u,onDeleteRow:E})}),(0,b.jsx)(m.TabsContent,{value:"global_list",className:"mt-4",children:(0,b.jsx)(am,{locale:"*",search:u,onDeleteRow:E})}),(0,b.jsx)(m.TabsContent,{value:"general",className:"mt-4",children:(0,b.jsx)(z,{locale:w})}),(0,b.jsx)(m.TabsContent,{value:"seo",className:"mt-4",children:(0,b.jsx)(O,{locale:w})}),(0,b.jsx)(m.TabsContent,{value:"smtp",className:"mt-4",children:(0,b.jsx)(V,{locale:w})}),(0,b.jsx)(m.TabsContent,{value:"cloudinary",className:"mt-4",children:(0,b.jsx)(Z,{locale:w})}),(0,b.jsx)(m.TabsContent,{value:"brand_media",className:"mt-4",children:(0,b.jsx)(af,{})}),(0,b.jsx)(m.TabsContent,{value:"api",className:"mt-4",children:(0,b.jsx)(aj,{locale:w})})]}):(0,b.jsx)("div",{className:"rounded-md border p-4 text-sm text-muted-foreground",children:B("admin.siteSettings.management.loadingMeta")})})]})]})}a.s(["default",()=>an],41273)}];

//# sourceMappingURL=6457b_admin_%28admin%29_site-settings__components_admin-site_settings-client_tsx_63caf8e0._.js.map