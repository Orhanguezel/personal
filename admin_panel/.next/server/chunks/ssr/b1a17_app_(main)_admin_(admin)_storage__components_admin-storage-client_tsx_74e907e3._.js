module.exports=[72608,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(15618),g=a.i(28790),h=a.i(87532),i=a.i(81560),j=a.i(99464),k=a.i(96221),l=a.i(38632),m=a.i(35487),n=a.i(70106);let o=(0,n.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),p=(0,n.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),q=(0,n.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),r=(0,n.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var s=a.i(68114),t=a.i(99570),u=a.i(66718),v=a.i(70430),w=a.i(86304),x=a.i(91119),y=a.i(80701),z=a.i(6015),A=a.i(86192);a.i(58501);var B=a.i(77262),C=a.i(79755);function D(a){if(0===a)return"0 B";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["B","KB","MB","GB"][b]}function E(a){if(!a)return"-";try{let b=new Date(a);if(Number.isNaN(b.getTime()))return String(a);return b.toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return String(a)}}function F(a,b=40){let c=a||"";return c.length<=b?c||"-":c.slice(0,b-1)+"…"}function G(a){return a.startsWith("image/")?l.Image:m.File}function H(a){return a.startsWith("image/")?"text-blue-600 dark:text-blue-400":a.startsWith("video/")?"text-purple-600 dark:text-purple-400":a.startsWith("audio/")?"text-green-600 dark:text-green-400":a.includes("pdf")?"text-red-600 dark:text-red-400":"text-muted-foreground"}function I(){let a=(0,d.useRouter)(),l=(0,C.useAdminT)();function m(a){return a?.data?.error?.message||a?.data?.message||a?.message||l("admin.storage.errorFallback")}let[n,I]=c.useState({search:"",bucket:"all",folder:"all",mime:"all"}),[J,K]=c.useState(new Set),L=c.useMemo(()=>({q:n.search||void 0,bucket:"all"!==n.bucket?n.bucket:void 0,folder:"all"!==n.folder?n.folder:void 0,mime:"all"!==n.mime?n.mime:void 0,sort:"created_at",order:"desc",limit:100}),[n]),{data:M,isLoading:N,isFetching:O,refetch:P}=(0,B.useListAssetsAdminQuery)(L),{data:Q=[]}=(0,B.useListFoldersAdminQuery)(),[R]=(0,B.useDeleteAssetAdminMutation)(),[S]=(0,B.useBulkDeleteAssetsAdminMutation)(),T=M?.items||[],U=M?.total||0,[V,W]=c.useState(!1),[X,Y]=c.useState(null),Z=a=>{let b=new Set(J);b.has(a)?b.delete(a):b.add(a),K(b)},$=async()=>{if(0===J.size)return void e.toast.error(l("admin.storage.list.selectFileError"));try{await S({ids:Array.from(J)}).unwrap(),e.toast.success(l("admin.storage.list.filesDeleted",{count:J.size})),K(new Set),P()}catch(a){e.toast.error(m(a))}},_=b=>{a.push(`/admin/storage/${b.id}`)},aa=a=>{Y(a),W(!0)},ab=async()=>{if(X)try{await R({id:X.id}).unwrap(),e.toast.success(l("admin.storage.list.fileDeleted")),W(!1),Y(null),P()}catch(a){e.toast.error(m(a))}},ac=J.size>0,ad=c.useMemo(()=>Array.from(new Set(T.map(a=>a.bucket).filter(Boolean))),[T]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(x.Card,{children:[(0,b.jsx)(x.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(x.CardTitle,{children:l("admin.storage.list.title")}),(0,b.jsx)(x.CardDescription,{children:l("admin.storage.list.description")})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[ac&&(0,b.jsxs)(t.Button,{variant:"destructive",onClick:$,disabled:N,className:"gap-2",children:[(0,b.jsx)(i.Trash2,{className:"size-4"}),l("admin.storage.list.deleteSelected",{count:J.size})]}),(0,b.jsxs)(t.Button,{onClick:()=>a.push("/admin/storage/new"),disabled:N,className:"gap-2",children:[(0,b.jsx)(f.Plus,{className:"size-4"}),l("admin.storage.list.uploadButton")]})]})]})}),(0,b.jsxs)(x.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,b.jsx)(v.Label,{htmlFor:"search",className:"text-sm",children:l("admin.storage.list.searchLabel")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(u.Input,{id:"search",placeholder:l("admin.storage.list.searchPlaceholder"),value:n.search,onChange:a=>{var b;return b=a.target.value,void I(a=>({...a,search:b}))},disabled:N,className:"pl-9"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"bucket",className:"text-sm",children:l("admin.storage.list.bucketLabel")}),(0,b.jsxs)(y.Select,{value:n.bucket,onValueChange:a=>{I(b=>({...b,bucket:a}))},disabled:N,children:[(0,b.jsx)(y.SelectTrigger,{id:"bucket",children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:l("admin.storage.list.allOption")}),ad.map(a=>(0,b.jsx)(y.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"folder",className:"text-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(o,{className:"size-3.5"}),l("admin.storage.list.folderLabel")]})}),(0,b.jsxs)(y.Select,{value:n.folder,onValueChange:a=>{I(b=>({...b,folder:a}))},disabled:N,children:[(0,b.jsx)(y.SelectTrigger,{id:"folder",children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:l("admin.storage.list.allOption")}),Q.map(a=>(0,b.jsx)(y.SelectItem,{value:a,children:a||l("admin.storage.list.rootFolder")},a))]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"mime",className:"text-sm",children:l("admin.storage.list.fileTypeLabel")}),(0,b.jsxs)(y.Select,{value:n.mime,onValueChange:a=>{I(b=>({...b,mime:a}))},disabled:N,children:[(0,b.jsx)(y.SelectTrigger,{id:"mime",children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:l("admin.storage.list.allOption")}),(0,b.jsx)(y.SelectItem,{value:"image/",children:l("admin.storage.list.imageType")}),(0,b.jsx)(y.SelectItem,{value:"video/",children:l("admin.storage.list.videoType")}),(0,b.jsx)(y.SelectItem,{value:"audio/",children:l("admin.storage.list.audioType")}),(0,b.jsx)(y.SelectItem,{value:"application/pdf",children:l("admin.storage.list.pdfType")})]})]})]}),(0,b.jsx)("div",{className:"flex items-end lg:col-span-3",children:(0,b.jsxs)(t.Button,{variant:"outline",onClick:()=>P(),disabled:N,className:"gap-2",children:[(0,b.jsx)(g.RefreshCcw,{className:(0,s.cn)("size-4",O&&"animate-spin")}),l("admin.storage.list.refreshButton")]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:[l("admin.storage.list.totalFiles",{total:U}),ac&&` • ${l("admin.storage.list.selectedCount",{count:J.size})}`]}),O&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-4 animate-spin"}),(0,b.jsx)("span",{children:l("admin.storage.list.loading")})]})]})]})]}),(0,b.jsx)(x.Card,{className:"hidden xl:block",children:(0,b.jsx)(x.CardContent,{className:"p-0",children:(0,b.jsxs)(z.Table,{children:[(0,b.jsx)(z.TableHeader,{children:(0,b.jsxs)(z.TableRow,{children:[(0,b.jsx)(z.TableHead,{className:"w-12",children:(0,b.jsx)(t.Button,{variant:"ghost",size:"icon-sm",onClick:()=>{J.size===T.length?K(new Set):K(new Set(T.map(a=>a.id)))},disabled:N,children:J.size===T.length&&T.length>0?(0,b.jsx)(q,{className:"size-4"}):(0,b.jsx)(r,{className:"size-4"})})}),(0,b.jsx)(z.TableHead,{className:"w-16",children:l("admin.storage.list.previewColumn")}),(0,b.jsx)(z.TableHead,{children:l("admin.storage.list.fileColumn")}),(0,b.jsx)(z.TableHead,{className:"w-32",children:l("admin.storage.list.bucketColumn")}),(0,b.jsx)(z.TableHead,{className:"w-32",children:l("admin.storage.list.folderColumn")}),(0,b.jsx)(z.TableHead,{className:"w-32",children:l("admin.storage.list.typeColumn")}),(0,b.jsx)(z.TableHead,{className:"w-24 text-right",children:l("admin.storage.list.sizeColumn")}),(0,b.jsx)(z.TableHead,{className:"w-44",children:l("admin.storage.list.dateColumn")}),(0,b.jsx)(z.TableHead,{className:"w-40 text-right",children:l("admin.storage.list.actionsColumn")})]})}),(0,b.jsx)(z.TableBody,{children:N?(0,b.jsx)(z.TableRow,{children:(0,b.jsx)(z.TableCell,{colSpan:9,className:"h-24 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:l("admin.storage.list.loading")})]})})}):0===T.length?(0,b.jsx)(z.TableRow,{children:(0,b.jsx)(z.TableCell,{colSpan:9,className:"h-24 text-center",children:l("admin.storage.list.noFiles")})}):T.map(a=>{let c=G(a.mime),d=H(a.mime),e=J.has(a.id);return(0,b.jsxs)(z.TableRow,{className:(0,s.cn)(e&&"bg-muted/50"),children:[(0,b.jsx)(z.TableCell,{children:(0,b.jsx)(t.Button,{variant:"ghost",size:"icon-sm",onClick:()=>Z(a.id),disabled:N,children:e?(0,b.jsx)(q,{className:"size-4"}):(0,b.jsx)(r,{className:"size-4"})})}),(0,b.jsx)(z.TableCell,{children:a.url&&a.mime.startsWith("image/")?(0,b.jsx)("img",{src:a.url,alt:a.name,className:"size-10 rounded object-cover"}):(0,b.jsx)("div",{className:"flex size-10 items-center justify-center rounded bg-muted",children:(0,b.jsx)(c,{className:(0,s.cn)("size-5",d)})})}),(0,b.jsx)(z.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"font-medium",children:F(a.name,30)}),a.path&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:F(a.path,40)})]})}),(0,b.jsx)(z.TableCell,{children:(0,b.jsx)(w.Badge,{variant:"outline",children:a.bucket})}),(0,b.jsx)(z.TableCell,{children:a.folder?(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs",children:[(0,b.jsx)(o,{className:"size-3"}),a.folder]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(z.TableCell,{children:(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.mime.split("/")[1]||a.mime})}),(0,b.jsx)(z.TableCell,{className:"text-right text-sm",children:D(a.size)}),(0,b.jsx)(z.TableCell,{className:"text-xs text-muted-foreground",children:(0,b.jsx)("div",{children:E(a.created_at)})}),(0,b.jsx)(z.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[a.url&&(0,b.jsx)(t.Button,{variant:"ghost",size:"icon-sm",asChild:!0,title:l("admin.storage.list.downloadTitle"),children:(0,b.jsx)("a",{href:a.url,download:!0,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)(p,{className:"size-3.5"})})}),(0,b.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>_(a),disabled:N,className:"gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),l("admin.storage.list.editButton")]}),(0,b.jsx)(t.Button,{variant:"outline",size:"sm",onClick:()=>aa(a),disabled:N,className:"gap-2",children:(0,b.jsx)(i.Trash2,{className:"size-3.5"})})]})})]},a.id)})})]})})}),(0,b.jsx)("div",{className:"space-y-4 xl:hidden",children:N?(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Loader2,{className:"size-5 animate-spin"}),(0,b.jsx)("span",{children:l("admin.storage.list.loading")})]})})}):0===T.length?(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"py-12 text-center text-muted-foreground",children:l("admin.storage.list.noFiles")})}):T.map(a=>{let c=G(a.mime),d=H(a.mime),e=J.has(a.id);return(0,b.jsx)(x.Card,{className:(0,s.cn)(e&&"ring-2 ring-primary"),children:(0,b.jsxs)(x.CardContent,{className:"space-y-4 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(t.Button,{variant:"ghost",size:"icon-sm",onClick:()=>Z(a.id),disabled:N,children:e?(0,b.jsx)(q,{className:"size-4"}):(0,b.jsx)(r,{className:"size-4"})}),a.url&&a.mime.startsWith("image/")?(0,b.jsx)("img",{src:a.url,alt:a.name,className:"size-20 rounded object-cover"}):(0,b.jsx)("div",{className:"flex size-20 items-center justify-center rounded bg-muted",children:(0,b.jsx)(c,{className:(0,s.cn)("size-8",d)})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.name}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(w.Badge,{variant:"outline",children:a.bucket}),a.folder&&(0,b.jsxs)(w.Badge,{variant:"secondary",children:[(0,b.jsx)(o,{className:"size-3"}),a.folder]})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.mime.split("/")[1]," • ",D(a.size)]})]})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:E(a.created_at)}),(0,b.jsxs)("div",{className:"flex gap-2",children:[a.url&&(0,b.jsx)(t.Button,{variant:"outline",size:"sm",asChild:!0,className:"flex-1 gap-2",children:(0,b.jsxs)("a",{href:a.url,download:!0,target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(p,{className:"size-3.5"}),l("admin.storage.list.downloadTitle")]})}),(0,b.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>_(a),disabled:N,className:"flex-1 gap-2",children:[(0,b.jsx)(j.Pencil,{className:"size-3.5"}),l("admin.storage.list.editButton")]}),(0,b.jsx)(t.Button,{variant:"outline",size:"sm",onClick:()=>aa(a),disabled:N,className:"gap-2",children:(0,b.jsx)(i.Trash2,{className:"size-3.5"})})]})]})},a.id)})})]}),(0,b.jsx)(A.AlertDialog,{open:V,onOpenChange:W,children:(0,b.jsxs)(A.AlertDialogContent,{children:[(0,b.jsxs)(A.AlertDialogHeader,{children:[(0,b.jsx)(A.AlertDialogTitle,{children:l("admin.storage.list.deleteConfirmTitle")}),(0,b.jsx)(A.AlertDialogDescription,{children:l("admin.storage.list.deleteConfirmDescription",{name:X?.name||"Bu dosya"})})]}),(0,b.jsxs)(A.AlertDialogFooter,{children:[(0,b.jsx)(A.AlertDialogCancel,{children:l("admin.storage.list.cancelButton")}),(0,b.jsx)(A.AlertDialogAction,{onClick:ab,children:l("admin.storage.list.deleteButton")})]})]})})]})}a.s(["default",()=>I],72608)}];

//# sourceMappingURL=b1a17_app_%28main%29_admin_%28admin%29_storage__components_admin-storage-client_tsx_74e907e3._.js.map