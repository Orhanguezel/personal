module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(76306),d=a.i(187),e=a.i(68114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},63658,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7554),e=a.i(70121),f=a.i(50104),g=a.i(25152),h=a.i(77994),i=a.i(3688),j=a.i(30553),k="Switch",[l,m]=(0,f.createContextScope)(k),[n,o]=l(k),p=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:i,checked:l,defaultChecked:m,required:o,disabled:p,value:q="on",onCheckedChange:r,form:u,...v}=a,[w,x]=c.useState(null),y=(0,e.useComposedRefs)(f,a=>x(a)),z=c.useRef(!1),A=!w||u||!!w.closest("form"),[B,C]=(0,g.useControllableState)({prop:l,defaultProp:m??!1,onChange:r,caller:k});return(0,b.jsxs)(n,{scope:h,checked:B,disabled:p,children:[(0,b.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":o,"data-state":t(B),"data-disabled":p?"":void 0,disabled:p,value:q,...v,ref:y,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(s,{control:w,bubbles:!z.current,name:i,value:q,checked:B,required:o,disabled:p,form:u,style:{transform:"translateX(-100%)"}})]})});p.displayName=k;var q="SwitchThumb",r=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=o(q,d);return(0,b.jsx)(j.Primitive.span,{"data-state":t(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});r.displayName=q;var s=c.forwardRef(({__scopeSwitch:a,control:d,checked:f,bubbles:g=!0,...j},k)=>{let l=c.useRef(null),m=(0,e.useComposedRefs)(l,k),n=(0,h.usePrevious)(f),o=(0,i.useSize)(d);return c.useEffect(()=>{let a=l.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==f&&b){let c=new Event("click",{bubbles:g});b.call(a,f),a.dispatchEvent(c)}},[n,f,g]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f,...j,tabIndex:-1,ref:m,style:{...j.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function t(a){return a?"checked":"unchecked"}s.displayName="SwitchBubbleInput",a.s(["Root",()=>p,"Switch",()=>p,"SwitchThumb",()=>r,"Thumb",()=>r,"createSwitchScope",()=>m],19025);var u=a.i(19025),u=u,v=a.i(68114);function w({className:a,...c}){return(0,b.jsx)(u.Root,{"data-slot":"switch",className:(0,v.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(u.Thumb,{"data-slot":"switch-thumb",className:(0,v.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}a.s(["Switch",()=>w],63658)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},1229,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,a.i(70106).default)("braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);var e=a.i(68114),f=a.i(70430),g=a.i(29246),h=a.i(86304);let i=a=>{try{return JSON.stringify(a??{},null,2)}catch{return""}};a.s(["AdminJsonEditor",0,({label:a,value:j,onChange:k,onErrorChange:l,disabled:m,helperText:n,height:o=260})=>{let[p,q]=(0,c.useState)(()=>i(j)),[r,s]=(0,c.useState)(null);return(0,c.useEffect)(()=>{q(i(j))},[j]),(0,b.jsxs)("div",{className:"space-y-2",children:[a?(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)(f.Label,{className:"text-sm",children:a}),(0,b.jsxs)(h.Badge,{variant:"secondary",className:"gap-1",children:[(0,b.jsx)(d,{className:"size-3.5"}),"JSON editor"]})]}):null,(0,b.jsx)(g.Textarea,{value:p,onChange:a=>q(a.target.value),onBlur:()=>{if(!p.trim()){k({}),s(null),l?.(null);return}try{let a=JSON.parse(p);k(a),s(null),l?.(null)}catch(b){let a=b?.message?String(b.message):"Geçersiz JSON";s(a),l?.(a)}},disabled:m,spellCheck:!1,className:(0,e.cn)("font-mono text-xs leading-5",r&&"border-destructive focus-visible:ring-destructive"),style:{minHeight:o,whiteSpace:"pre",fontFamily:"SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"}}),n&&!r?(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:n}):null,r?(0,b.jsxs)("div",{className:"text-xs text-destructive",children:["JSON hatası: ",(0,b.jsx)("span",{className:"font-medium",children:r})]}):null]})}],1229)},51311,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(99570),g=a.i(66718),h=a.i(70430),i=a.i(29246),j=a.i(63658),k=a.i(91119),l=a.i(80701),m=a.i(1229),n=a.i(1664);a.i(34658);var o=a.i(42969);a.i(58501);var p=a.i(24109);let q={customer_name:"",company_name:"",email:"",phone:"",subject:"",message:"",service_id:"",service_title:"",status:"new",currency:"TRY",net_total:null,vat_rate:null,vat_total:null,shipping_total:null,gross_total:null,offer_no:"",valid_until:"",admin_notes:"",form_data:void 0,consent_marketing:!1,consent_terms:!1};function r({id:a}){let r=(0,d.useRouter)(),{copy:s}=(0,n.useAdminUiCopy)(),t=s.pages?.offers_detail??{},u=s.common,v="new"===String(a),w=!v&&(0,o.isUuidLike)(a),x=(0,p.useGetOfferAdminQuery)({id:a},{skip:!w,refetchOnMountOrArgChange:!0}),[y,z]=(0,p.useCreateOfferAdminMutation)(),[A,B]=(0,p.useUpdateOfferAdminMutation)(),[C,D]=(0,p.useGenerateOfferPdfAdminMutation)(),[E,F]=(0,p.useSendOfferEmailAdminMutation)(),[G,H]=(0,p.useSendOfferAdminMutation)(),I=x.isFetching||z.isLoading||B.isLoading,[J,K]=c.useState(q);async function L(){if(!J.customer_name.trim()||!J.email.trim())return void e.toast.error(t?.required_error||"");try{let a={customer_name:J.customer_name.trim(),company_name:J.company_name?.trim()||null,email:J.email.trim(),phone:J.phone?.trim()||void 0,subject:J.subject?.trim()||void 0,message:J.message?.trim()||void 0,service_id:J.service_id?.trim()||void 0,service_title:J.service_title?.trim()||void 0,status:J.status,currency:J.currency?.trim()||void 0,net_total:J.net_total??void 0,vat_rate:J.vat_rate??void 0,vat_total:J.vat_total??void 0,shipping_total:J.shipping_total??void 0,gross_total:J.gross_total??void 0,offer_no:J.offer_no?.trim()||void 0,valid_until:J.valid_until?.trim()||void 0,admin_notes:J.admin_notes?.trim()||void 0,form_data:J.form_data??void 0,consent_marketing:J.consent_marketing,consent_terms:J.consent_terms};if(v){let b=await y(a).unwrap();if(b?.id){e.toast.success(u?.actions?.save||""),r.replace(`/admin/offers/${encodeURIComponent(b.id)}`);return}}else J.id&&(await A({id:J.id,body:a}).unwrap(),e.toast.success(u?.actions?.save||""))}catch(a){e.toast.error(a?.data?.error?.message||a?.message||u?.states?.error||"")}}async function M(){if(J.id)try{await C({id:J.id,force:!0}).unwrap(),e.toast.success(t?.pdf_ok||"")}catch(a){e.toast.error(a?.data?.error?.message||a?.message||u?.states?.error||"")}}async function N(){if(J.id)try{await E({id:J.id,force:!0}).unwrap(),e.toast.success(t?.email_ok||"")}catch(a){e.toast.error(a?.data?.error?.message||a?.message||u?.states?.error||"")}}async function O(){if(J.id)try{await G({id:J.id,force:!0}).unwrap(),e.toast.success(t?.send_ok||"")}catch(a){e.toast.error(a?.data?.error?.message||a?.message||u?.states?.error||"")}}return c.useEffect(()=>{if(x.data){let a=x.data;K({id:a.id,customer_name:a.customer_name,company_name:a.company_name??"",email:a.email,phone:a.phone??"",subject:a.subject??"",message:a.message??"",service_id:a.service_id??"",service_title:a.service_title??"",status:a.status,currency:a.currency??"TRY",net_total:a.net_total??null,vat_rate:a.vat_rate??null,vat_total:a.vat_total??null,shipping_total:a.shipping_total??null,gross_total:a.gross_total??null,offer_no:a.offer_no??"",valid_until:a.valid_until??"",admin_notes:a.admin_notes??"",form_data:a.form_data??void 0,consent_marketing:a.consent_marketing??!1,consent_terms:a.consent_terms??!1})}else v&&K({...q})},[x.data,v]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:v?t?.create_title:t?.edit_title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:t?.subtitle})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>r.push("/admin/offers"),children:u?.actions?.back}),(0,b.jsx)(f.Button,{onClick:L,disabled:I,children:u?.actions?.save})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 xl:grid-cols-3",children:[(0,b.jsxs)(k.Card,{className:"xl:col-span-2",children:[(0,b.jsxs)(k.CardHeader,{className:"gap-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:t?.form_title}),(0,b.jsx)(k.CardDescription,{children:t?.form_desc})]}),(0,b.jsxs)(k.CardContent,{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(h.Label,{children:t?.status_label}),(0,b.jsxs)(l.Select,{value:J.status||"new",onValueChange:a=>K(b=>({...b,status:a})),children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"new",children:t?.status_new}),(0,b.jsx)(l.SelectItem,{value:"in_review",children:t?.status_in_review}),(0,b.jsx)(l.SelectItem,{value:"quoted",children:t?.status_quoted}),(0,b.jsx)(l.SelectItem,{value:"sent",children:t?.status_sent}),(0,b.jsx)(l.SelectItem,{value:"accepted",children:t?.status_accepted}),(0,b.jsx)(l.SelectItem,{value:"rejected",children:t?.status_rejected}),(0,b.jsx)(l.SelectItem,{value:"cancelled",children:t?.status_cancelled})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.customer_label}),(0,b.jsx)(g.Input,{value:J.customer_name,onChange:a=>K(b=>({...b,customer_name:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.company_label}),(0,b.jsx)(g.Input,{value:J.company_name??"",onChange:a=>K(b=>({...b,company_name:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.email_label}),(0,b.jsx)(g.Input,{value:J.email,onChange:a=>K(b=>({...b,email:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.phone_label}),(0,b.jsx)(g.Input,{value:J.phone??"",onChange:a=>K(b=>({...b,phone:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(h.Label,{children:t?.subject_label}),(0,b.jsx)(g.Input,{value:J.subject??"",onChange:a=>K(b=>({...b,subject:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(h.Label,{children:t?.message_label}),(0,b.jsx)(i.Textarea,{value:J.message??"",onChange:a=>K(b=>({...b,message:a.target.value})),rows:4})]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"gap-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:t?.meta_title}),(0,b.jsx)(k.CardDescription,{children:t?.meta_desc})]}),(0,b.jsxs)(k.CardContent,{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.service_id_label}),(0,b.jsx)(g.Input,{value:J.service_id??"",onChange:a=>K(b=>({...b,service_id:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.service_title_label}),(0,b.jsx)(g.Input,{value:J.service_title??"",onChange:a=>K(b=>({...b,service_title:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.currency_label}),(0,b.jsx)(g.Input,{value:J.currency??"",onChange:a=>K(b=>({...b,currency:a.target.value}))})]}),(0,b.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.net_total_label}),(0,b.jsx)(g.Input,{type:"number",value:J.net_total??"",onChange:a=>K(b=>({...b,net_total:a.target.value?Number(a.target.value):null}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.vat_rate_label}),(0,b.jsx)(g.Input,{type:"number",value:J.vat_rate??"",onChange:a=>K(b=>({...b,vat_rate:a.target.value?Number(a.target.value):null}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.vat_total_label}),(0,b.jsx)(g.Input,{type:"number",value:J.vat_total??"",onChange:a=>K(b=>({...b,vat_total:a.target.value?Number(a.target.value):null}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.shipping_total_label}),(0,b.jsx)(g.Input,{type:"number",value:J.shipping_total??"",onChange:a=>K(b=>({...b,shipping_total:a.target.value?Number(a.target.value):null}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.gross_total_label}),(0,b.jsx)(g.Input,{type:"number",value:J.gross_total??"",onChange:a=>K(b=>({...b,gross_total:a.target.value?Number(a.target.value):null}))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.offer_no_label}),(0,b.jsx)(g.Input,{value:J.offer_no??"",onChange:a=>K(b=>({...b,offer_no:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.valid_until_label}),(0,b.jsx)(g.Input,{type:"date",value:J.valid_until??"",onChange:a=>K(b=>({...b,valid_until:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:t?.admin_notes_label}),(0,b.jsx)(i.Textarea,{value:J.admin_notes??"",onChange:a=>K(b=>({...b,admin_notes:a.target.value})),rows:3})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Switch,{checked:!!J.consent_marketing,onCheckedChange:a=>K(b=>({...b,consent_marketing:a}))}),(0,b.jsx)(h.Label,{children:t?.consent_marketing_label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Switch,{checked:!!J.consent_terms,onCheckedChange:a=>K(b=>({...b,consent_terms:a}))}),(0,b.jsx)(h.Label,{children:t?.consent_terms_label})]}),(0,b.jsx)(m.AdminJsonEditor,{label:t?.form_data_label,value:J.form_data??{},onChange:a=>K(b=>({...b,form_data:a})),helperText:t?.form_data_help})]})]})]}),!v&&J.id?(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"gap-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:t?.actions_title}),(0,b.jsx)(k.CardDescription,{children:t?.actions_desc})]}),(0,b.jsxs)(k.CardContent,{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:M,disabled:D.isLoading,children:t?.action_pdf}),(0,b.jsx)(f.Button,{variant:"outline",onClick:N,disabled:F.isLoading,children:t?.action_email}),(0,b.jsx)(f.Button,{onClick:O,disabled:H.isLoading,children:t?.action_send})]})]}):null]})}a.s(["default",()=>r])}];

//# sourceMappingURL=src_9cfd8ebd._.js.map