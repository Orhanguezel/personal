module.exports=[91418,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(15618),g=a.i(28790),h=a.i(95490),i=a.i(85668),j=a.i(14548),k=a.i(87532),l=a.i(81560),m=a.i(99464);let n=(0,a.i(70106).default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var o=a.i(28551),p=a.i(90899),q=a.i(30637),r=a.i(68114),s=a.i(99570),t=a.i(66718),u=a.i(70430),v=a.i(86304),w=a.i(91119),x=a.i(80701),y=a.i(6015);a.i(58501);var z=a.i(56373);function A(a,b=40){let c=a||"";return c.length<=b?c||"-":c.slice(0,b-1)+"…"}function B(a){return a?.data?.error?.message||a?.data?.message||a?.message||"İşlem başarısız"}function C(){let a=(0,d.useRouter)(),C=(0,d.useSearchParams)(),{localeOptions:D,defaultLocaleFromDb:E,loading:F,fetching:G}=(0,o.useAdminLocales)(),H=c.useMemo(()=>(0,p.resolveAdminApiLocale)(D,E,"de"),[D,E]),I=c.useMemo(()=>{let a=C?.get("locale");return(0,q.localeShortClient)(a)||""},[C]),[J,K]=c.useState({search:"",activeFilter:"all",location:"all",type:"all",locale:""}),[L,M]=c.useState(!1),[N,O]=c.useState([]);c.useEffect(()=>{D&&0!==D.length&&K(a=>{let b=(0,q.localeShortClient)(a.locale),c=(0,q.localeShortClient)(I),d=(0,q.localeShortClientOr)(H,"de"),e=a=>!!a&&(D??[]).some(b=>(0,q.localeShortClient)(b.value)===a);return b&&e(b)?a:c&&e(c)?{...a,locale:c}:d&&e(d)?{...a,locale:d}:{...a,locale:(0,q.localeShortClient)(D?.[0]?.value)||"de"}})},[D,I,H]);let P=c.useMemo(()=>(0,q.localeShortClient)(J.locale)||H,[J.locale,H]);c.useEffect(()=>{let b=(0,q.localeShortClient)(J.locale);if(!b||b===I)return;let c=new URLSearchParams(C?.toString()||"");c.set("locale",b),a.replace(`/admin/menuitem?${c.toString()}`)},[J.locale]);let Q=c.useMemo(()=>{if("all"!==J.activeFilter)return+("active"===J.activeFilter)},[J.activeFilter]),R=c.useMemo(()=>({q:J.search.trim()||void 0,locale:P||void 0,is_active:Q,location:"all"===J.location?void 0:J.location,limit:200,offset:0,sort:"display_order",order:"asc"}),[J.search,P,Q,J.location]),{data:S,isLoading:T,isFetching:U,refetch:V}=(0,z.useListMenuItemsAdminQuery)(R),W=c.useMemo(()=>S?Array.isArray(S)?S:"items"in S&&Array.isArray(S.items)?S.items:[]:[],[S]),[X,{isLoading:Y}]=(0,z.useUpdateMenuItemAdminMutation)(),[Z,{isLoading:$}]=(0,z.useDeleteMenuItemAdminMutation)(),[_,{isLoading:aa}]=(0,z.useReorderMenuItemsAdminMutation)(),ab=T||U||Y||$||aa,ac=c.useMemo(()=>"all"===J.type?W:W.filter(a=>a.type===J.type),[W,J.type]);c.useEffect(()=>{O(ac)},[ac]);let ad=b=>{a.push(`/admin/menuitem/${encodeURIComponent(b.id)}`)},ae=async a=>{if(confirm(`"${a.title}" men\xfc \xf6ğesini silmek istediğinize emin misiniz?`))try{await Z({id:a.id}).unwrap(),e.toast.success("Menü öğesi silindi")}catch(a){e.toast.error(B(a))}},af=async a=>{try{await X({id:a.id,data:{is_active:+!a.is_active}}).unwrap(),e.toast.success(a.is_active?"Pasif edildi":"Aktif edildi")}catch(a){e.toast.error(B(a))}},ag=a=>{if(0===a)return;let b=[...N];[b[a-1],b[a]]=[b[a],b[a-1]],O(b)},ah=a=>{if(a===N.length-1)return;let b=[...N];[b[a],b[a+1]]=[b[a+1],b[a]],O(b)},ai=async()=>{let a={items:N.map((a,b)=>({id:a.id,display_order:b+1}))};try{await _(a).unwrap(),e.toast.success("Sıralama kaydedildi"),M(!1),V()}catch(a){e.toast.error(B(a))}},aj=L?N:ac;return(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)(w.Card,{children:(0,b.jsx)(w.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.CardTitle,{className:"text-2xl font-bold",children:"Menü Öğeleri"}),(0,b.jsxs)(w.CardDescription,{children:["Tüm menü öğelerini yönetin (",aj.length," öğe)"]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:L?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.Button,{onClick:ai,disabled:ab,size:"sm",children:[(0,b.jsx)(j.Save,{className:"mr-2 size-4"}),"Sıralamayı Kaydet"]}),(0,b.jsx)(s.Button,{onClick:()=>{M(!1),O(ac)},variant:"outline",size:"sm",children:"İptal"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.Button,{onClick:()=>M(!0),variant:"outline",size:"sm",disabled:ab||0===aj.length,children:[(0,b.jsx)(n,{className:"mr-2 size-4"}),"Sırala"]}),(0,b.jsxs)(s.Button,{onClick:()=>{V()},disabled:ab,variant:"outline",size:"sm",children:[(0,b.jsx)(g.RefreshCcw,{className:(0,r.cn)("mr-2 size-4",ab&&"animate-spin")}),"Yenile"]}),(0,b.jsxs)(s.Button,{onClick:()=>{a.push("/admin/menuitem/new")},size:"sm",children:[(0,b.jsx)(f.Plus,{className:"mr-2 size-4"}),"Yeni Menü"]})]})})]})})}),!L&&(0,b.jsxs)(w.Card,{children:[(0,b.jsx)(w.CardHeader,{className:"pb-3",children:(0,b.jsx)(w.CardTitle,{className:"text-base font-semibold",children:"Filtreler"})}),(0,b.jsx)(w.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"search",children:"Ara"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(t.Input,{id:"search",className:"pl-9",placeholder:"Başlık...",value:J.search,onChange:a=>K(b=>({...b,search:a.target.value}))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"locale",children:"Dil"}),(0,b.jsxs)(x.Select,{value:J.locale,onValueChange:a=>K(b=>({...b,locale:a})),children:[(0,b.jsx)(x.SelectTrigger,{id:"locale",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsx)(x.SelectContent,{children:D.map(a=>(0,b.jsx)(x.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"location",children:"Konum"}),(0,b.jsxs)(x.Select,{value:J.location,onValueChange:a=>K(b=>({...b,location:a})),children:[(0,b.jsx)(x.SelectTrigger,{id:"location",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(x.SelectItem,{value:"header",children:"Header"}),(0,b.jsx)(x.SelectItem,{value:"footer",children:"Footer"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"type",children:"Tip"}),(0,b.jsxs)(x.Select,{value:J.type,onValueChange:a=>K(b=>({...b,type:a})),children:[(0,b.jsx)(x.SelectTrigger,{id:"type",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(x.SelectItem,{value:"page",children:"Sayfa"}),(0,b.jsx)(x.SelectItem,{value:"custom",children:"Özel URL"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"activeFilter",children:"Durum"}),(0,b.jsxs)(x.Select,{value:J.activeFilter,onValueChange:a=>K(b=>({...b,activeFilter:a})),children:[(0,b.jsx)(x.SelectTrigger,{id:"activeFilter",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Tümü"}),(0,b.jsx)(x.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(x.SelectItem,{value:"inactive",children:"Pasif"})]})]})]})]})})]}),(0,b.jsx)(w.Card,{children:(0,b.jsxs)(w.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"hidden overflow-auto xl:block",children:(0,b.jsxs)(y.Table,{children:[(0,b.jsx)(y.TableHeader,{children:(0,b.jsxs)(y.TableRow,{children:[L&&(0,b.jsx)(y.TableHead,{className:"w-12"}),(0,b.jsx)(y.TableHead,{className:"w-50",children:"Başlık"}),(0,b.jsx)(y.TableHead,{className:"w-25",children:"Konum"}),(0,b.jsx)(y.TableHead,{className:"w-25",children:"Tip"}),(0,b.jsx)(y.TableHead,{className:"w-50",children:"URL"}),(0,b.jsx)(y.TableHead,{className:"w-20",children:"Durum"}),(0,b.jsx)(y.TableHead,{className:"w-20",children:"Sıra"}),(0,b.jsx)(y.TableHead,{className:"w-50 text-right",children:"İşlemler"})]})}),(0,b.jsxs)(y.TableBody,{children:[0===aj.length&&(0,b.jsx)(y.TableRow,{children:(0,b.jsx)(y.TableCell,{colSpan:L?8:7,className:"h-24 text-center text-muted-foreground",children:ab?"Yükleniyor...":"Menü öğesi bulunamadı"})}),aj.map((a,c)=>(0,b.jsxs)(y.TableRow,{className:(0,r.cn)(!L&&"cursor-pointer hover:bg-muted/50",!a.is_active&&"opacity-50"),onClick:()=>!L&&ad(a),children:[L&&(0,b.jsx)(y.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:()=>ag(c),disabled:0===c||ab,className:"h-6 w-6 p-0",children:(0,b.jsx)(h.ArrowUp,{className:"size-3"})}),(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:()=>ah(c),disabled:c===aj.length-1||ab,className:"h-6 w-6 p-0",children:(0,b.jsx)(i.ArrowDown,{className:"size-3"})})]})}),(0,b.jsx)(y.TableCell,{className:"font-medium",children:A(a.title,40)}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)(v.Badge,{variant:"outline",children:"header"===a.location?"Header":"Footer"})}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)(v.Badge,{variant:"page"===a.type?"default":"secondary",children:"page"===a.type?"Sayfa":"URL"})}),(0,b.jsx)(y.TableCell,{className:"text-sm text-muted-foreground",children:A(a.url,40)}),(0,b.jsx)(y.TableCell,{children:(0,b.jsx)(v.Badge,{variant:a.is_active?"default":"secondary",children:a.is_active?"Aktif":"Pasif"})}),(0,b.jsx)(y.TableCell,{className:"text-sm text-muted-foreground",children:a.display_order}),(0,b.jsx)(y.TableCell,{className:"text-right",children:!L&&(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),af(a)},disabled:ab,children:a.is_active?"Pasif Et":"Aktif Et"}),(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),ad(a)},disabled:ab,children:(0,b.jsx)(m.Pencil,{className:"size-4"})}),(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),ae(a)},disabled:ab,children:(0,b.jsx)(l.Trash2,{className:"size-4 text-destructive"})})]})})]},a.id))]})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 p-4 xl:hidden",children:[0===aj.length&&(0,b.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:ab?"Yükleniyor...":"Menü öğesi bulunamadı"}),aj.map((a,c)=>(0,b.jsx)(w.Card,{className:(0,r.cn)(!L&&"cursor-pointer transition-colors hover:bg-muted/50",!a.is_active&&"opacity-50"),onClick:()=>!L&&ad(a),children:(0,b.jsxs)(w.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:A(a.url,50)})]}),L&&(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(s.Button,{size:"sm",variant:"outline",onClick:()=>ag(c),disabled:0===c||ab,children:(0,b.jsx)(h.ArrowUp,{className:"size-4"})}),(0,b.jsx)(s.Button,{size:"sm",variant:"outline",onClick:()=>ah(c),disabled:c===aj.length-1||ab,children:(0,b.jsx)(i.ArrowDown,{className:"size-4"})})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,b.jsx)(v.Badge,{variant:"outline",children:"header"===a.location?"Header":"Footer"}),(0,b.jsx)(v.Badge,{variant:"page"===a.type?"default":"secondary",children:"page"===a.type?"Sayfa":"URL"}),(0,b.jsx)(v.Badge,{variant:a.is_active?"default":"secondary",children:a.is_active?"Aktif":"Pasif"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Sıra: ",a.display_order]})]})]}),!L&&(0,b.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,b.jsx)(s.Button,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),af(a)},disabled:ab,className:"flex-1",children:a.is_active?"Pasif Et":"Aktif Et"}),(0,b.jsx)(s.Button,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),ad(a)},disabled:ab,children:(0,b.jsx)(m.Pencil,{className:"size-4"})}),(0,b.jsx)(s.Button,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),ae(a)},disabled:ab,children:(0,b.jsx)(l.Trash2,{className:"size-4 text-destructive"})})]})]})},a.id))]})]})})]})}a.s(["default",()=>C],91418)}];

//# sourceMappingURL=c80d1_%28main%29_admin_%28admin%29_menuitem__components_admin-menuitem-client_tsx_47e8117e._.js.map