module.exports=[35605,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(70106);let g=(0,f.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var h=a.i(4416);let i=(0,f.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var j=a.i(28790),k=a.i(87532),l=a.i(41675),m=a.i(69012),n=a.i(96221),o=a.i(99570),p=a.i(66718),q=a.i(70430),r=a.i(86304),s=a.i(63658),t=a.i(91119),u=a.i(75083),v=a.i(5084),w=a.i(6015),x=a.i(80701);function y(a,b=0){let c="number"==typeof a?a:Number(a);return Number.isFinite(c)?c:b}function z(a){let b=String(a??"").trim();if(!b)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(b))return b;if(/^\d{4}-\d{2}-\d{2}T/.test(b))return b.slice(0,10);let c=new Date(b);return Number.isNaN(c.getTime())?b:c.toISOString().slice(0,10)}function A(a){let b=String(z(a)).match(/^(\d{4})-(\d{2})-(\d{2})$/);return b?`${b[3]}.${b[2]}.${b[1]}`:String(a||"")}a.s(["AuditDailyChart",0,({rows:a,loading:d,height:e=220})=>{let f,g,h,i,[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!0),n=(0,c.useMemo)(()=>[...Array.isArray(a)?a:[]].map(a=>{let b,c=z(a.date??a.day??a.dt??a.ts??a.created_at??"");return{date:c,label:(b=String(z(c)).match(/^(\d{4})-(\d{2})-(\d{2})$/))?`${b[3]}.${b[2]}`:String(c||""),requests:y(a.requests??a.count??a.total_requests),unique_ips:y(a.unique_ips??a.unique??a.uniq_ips),errors:y(a.errors??a.error_count??a.fails)}}).filter(a=>!!a.date&&/^\d{4}-\d{2}-\d{2}/.test(a.date)).sort((a,b)=>String(a.date).localeCompare(String(b.date))),[a]),o=n.length>0,p=Math.max(140,Math.min(360,e)),q=p-12-30,r=(0,c.useMemo)(()=>Math.max(1,n.reduce((a,b)=>Math.max(a,b.requests),0)),[n]),s=Array.from({length:5}).map((a,b)=>Math.round(r*(4-b)/4)),t=Math.max(1,n.length),u=Math.max(8,Math.floor((924-6*(t-1))/t)),[v,w]=(0,c.useState)(null);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-2 flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Son ",n.length||0," gün: ",(0,b.jsx)("strong",{children:"requests"})," bar",j?", unique":""," ",l?", errors":""]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-3",children:[(0,b.jsxs)("label",{className:"mb-0 flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:j,onChange:a=>k(a.target.checked)}),"Unique IP"]}),(0,b.jsxs)("label",{className:"mb-0 flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:l,onChange:a=>m(a.target.checked)}),"Errors"]}),d&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Yükleniyor..."})]})]}),!o&&!d&&(0,b.jsx)("div",{className:"rounded-md border border-muted bg-muted/40 px-3 py-2 text-sm",children:"Grafik verisi boş. (Backend response shape / date format uyumsuz olabilir.)"}),(0,b.jsxs)("div",{className:"overflow-hidden rounded border bg-card",children:[(0,b.jsxs)("svg",{viewBox:`0 0 980 ${p}`,width:"100%",height:p,role:"img","aria-label":"Audit günlük metrik grafiği",children:[(0,b.jsx)("rect",{x:"0",y:"0",width:980,height:p,fill:"white"}),s.map((a,c)=>{let d=12+q*c/4;return(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{x1:42,y1:d,x2:966,y2:d,stroke:"#e9ecef",strokeWidth:"1"}),(0,b.jsx)("text",{x:34,y:d+4,textAnchor:"end",fontSize:"11",fill:"#6c757d",children:a})]},`t-${c}`)}),n.map((a,c)=>{let d=42+c*(u+6),e=Math.round(a.requests/r*q),f=v===c;return(0,b.jsxs)("g",{onMouseEnter:()=>w(c),onMouseLeave:()=>w(null),children:[(0,b.jsx)("rect",{x:d,y:12+(q-e),width:u,height:e,rx:"3",fill:f?"#0b5ed7":"#0d6efd",opacity:0===a.requests?.25:.9}),(n.length<=14||c%2==0)&&(0,b.jsx)("text",{x:d+u/2,y:p-10,textAnchor:"middle",fontSize:"11",fill:"#6c757d",children:a.label})]},`${a.date}-${c}`)}),null!==v&&n[v]&&(f=n[v],g=42+v*(u+6),h=j||l?76:56,i=g+u+10+220<=966?g+u+10:g-220-10,(0,b.jsxs)("g",{children:[(0,b.jsx)("rect",{x:i,y:22,width:220,height:h,rx:"8",fill:"white",stroke:"#dee2e6"}),(0,b.jsx)("text",{x:i+12,y:42,fontSize:"12",fill:"#212529",children:(0,b.jsx)("tspan",{fontWeight:"600",children:A(f.date)})}),(0,b.jsxs)("text",{x:i+12,y:62,fontSize:"12",fill:"#212529",children:["requests: ",(0,b.jsx)("tspan",{fontWeight:"600",children:f.requests})]}),(j||l)&&(0,b.jsxs)("text",{x:i+12,y:80,fontSize:"12",fill:"#212529",children:[j?(0,b.jsxs)(b.Fragment,{children:["unique: ",(0,b.jsx)("tspan",{fontWeight:"600",children:f.unique_ips})]}):null,j&&l?(0,b.jsx)("tspan",{children:" · "}):null,l?(0,b.jsxs)(b.Fragment,{children:["errors: ",(0,b.jsx)("tspan",{fontWeight:"600",children:f.errors})]}):null]})]})),(0,b.jsx)("line",{x1:42,y1:12+q,x2:966,y2:12+q,stroke:"#dee2e6",strokeWidth:"1"})]}),o&&(0,b.jsxs)("div",{className:"flex items-center justify-between border-t px-3 py-2 text-sm text-muted-foreground",children:[(0,b.jsx)("div",{children:n[n.length-1]?.date?A(n[n.length-1].date):"-"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("span",{children:["requests:"," ",(0,b.jsx)("strong",{className:"text-foreground",children:n[n.length-1]?.requests??0})]}),j&&(0,b.jsxs)("span",{children:["unique:"," ",(0,b.jsx)("strong",{className:"text-foreground",children:n[n.length-1]?.unique_ips??0})]}),l&&(0,b.jsxs)("span",{children:["errors:"," ",(0,b.jsx)("strong",{className:"text-foreground",children:n[n.length-1]?.errors??0})]})]})]})]})]})}],23845);var B=a.i(23845);let C=B.default??B.AuditDailyChart,D=B.AuditDailyChart??C;a.i(34658);var E=a.i(42345);a.i(58501);var F=a.i(39138);function G(a,b=""){return String(a??"").trim()||b}function H(a,b){let c=Number(a??"");return Number.isFinite(c)&&c>=0?c:b}function I(a){let b=a?.data?.error?.message;if("string"==typeof b&&b.trim())return b;let c=a?.data?.message;if("string"==typeof c&&c.trim())return c;let d=a?.error;return"string"==typeof d&&d.trim()?d:"İşlem başarısız. Lütfen tekrar deneyin."}function J(a){if(!a)return"—";let b=new Date(a);return Number.isNaN(b.getTime())?String(a):b.toLocaleString()}function K(){var a;let f,y=(0,d.useRouter)(),z=(0,d.useSearchParams)(),A="auth"===(f=String(z.get("tab")??"").toLowerCase())?"auth":"metrics"===f?"metrics":"requests",B=z.get("q")??"",C=z.get("method")??"",K=z.get("status")??"",L=z.get("from")??"",M=z.get("to")??"",N="1"===(a=z.get("only_admin"))||"true"===a,O=z.get("event")??"",P=z.get("email")??"",Q=z.get("user_id")??"",R=z.get("ip")??"",S=String(H(z.get("days"),14)||14),T=z.get("path_prefix")??"",U=H(z.get("limit"),50)||50,V=H(z.get("offset"),0),[W,X]=c.useState(B),[Y,Z]=c.useState(C),[$,_]=c.useState(K),[aa,ab]=c.useState(L),[ac,ad]=c.useState(M),[ae,af]=c.useState(N),[ag,ah]=c.useState(O),[ai,aj]=c.useState(P),[ak,al]=c.useState(Q),[am,an]=c.useState(R),[ao,ap]=c.useState(S),[aq,ar]=c.useState(T);function as(a){var b;let c,d,e={tab:A,q:B,method:C,status:K,from:L,to:M,only_admin:N?"1":"",event:O,email:P,user_id:Q,ip:R,days:S,path_prefix:T,limit:U,offset:V,...a};null==a.offset&&(e.offset=0);let f=(b={tab:e.tab,q:e.q||void 0,method:e.method||void 0,status:e.status||void 0,from:e.from||void 0,to:e.to||void 0,only_admin:e.only_admin||void 0,event:e.event||void 0,email:e.email||void 0,user_id:e.user_id||void 0,ip:e.ip||void 0,days:e.days||void 0,path_prefix:e.path_prefix||void 0,limit:e.limit||void 0,offset:e.offset||void 0},c=new URLSearchParams,Object.entries(b).forEach(([a,b])=>{null!=b&&""!==b&&c.set(a,String(b))}),(d=c.toString())?`?${d}`:"");y.push(`/admin/dashboard/audit${f}`)}c.useEffect(()=>X(B),[B]),c.useEffect(()=>Z(C),[C]),c.useEffect(()=>_(K),[K]),c.useEffect(()=>ab(L),[L]),c.useEffect(()=>ad(M),[M]),c.useEffect(()=>af(N),[N]),c.useEffect(()=>ah(O),[O]),c.useEffect(()=>aj(P),[P]),c.useEffect(()=>al(Q),[Q]),c.useEffect(()=>an(R),[R]),c.useEffect(()=>ap(S),[S]),c.useEffect(()=>ar(T),[T]);let at=c.useMemo(()=>({q:B||void 0,method:C||void 0,status_code:function(a){let b=Number(a);if(Number.isFinite(b)&&!(b<100)&&!(b>599))return Math.floor(b)}(K),only_admin:N?1:void 0,created_from:L||void 0,created_to:M||void 0,sort:"created_at",orderDir:"desc",limit:U,offset:V}),[B,C,K,N,L,M,U,V]),au=c.useMemo(()=>({event:O||void 0,email:P||void 0,user_id:Q||void 0,ip:R||void 0,created_from:L||void 0,created_to:M||void 0,sort:"created_at",orderDir:"desc",limit:U,offset:V}),[O,P,Q,R,L,M,U,V]),av=c.useMemo(()=>({days:H(S,14)||14,only_admin:N?1:void 0,path_prefix:T||void 0}),[S,N,T]),aw=(0,F.useListAuditRequestLogsAdminQuery)("requests"===A?at:void 0,{skip:"requests"!==A,refetchOnFocus:!0}),ax=(0,F.useListAuditAuthEventsAdminQuery)("auth"===A?au:void 0,{skip:"auth"!==A,refetchOnFocus:!0}),ay=(0,F.useGetAuditMetricsDailyAdminQuery)("metrics"===A?av:void 0,{skip:"metrics"!==A,refetchOnFocus:!0}),az=aw.data??{items:[],total:0},aA=ax.data??{items:[],total:0},aB=ay.data??{days:[]},aC=aw.isLoading||aw.isFetching,aD=ax.isLoading||ax.isFetching,aE=ay.isLoading||ay.isFetching,aF=az.total??0,aG=aA.total??0,aH=V>0,aI=V+U<aF,aJ=V+U<aG;async function aK(){try{"requests"===A&&await aw.refetch(),"auth"===A&&await ax.refetch(),"metrics"===A&&await ay.refetch(),e.toast.success("Yenilendi")}catch(a){e.toast.error(I(a))}}return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Audit & Logs"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"İstek logları, auth olayları ve günlük metrikleri tek ekrandan izleyin."})]}),(0,b.jsxs)(o.Button,{variant:"outline",onClick:aK,disabled:aC||aD||aE,children:[(0,b.jsx)(j.RefreshCcw,{className:"mr-2 h-4 w-4"}),"Yenile"]})]}),(0,b.jsxs)(u.Tabs,{value:A,onValueChange:function(a){as({tab:a,offset:0})},children:[(0,b.jsxs)(u.TabsList,{children:[(0,b.jsxs)(u.TabsTrigger,{value:"requests",children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"})," Request Logs"]}),(0,b.jsxs)(u.TabsTrigger,{value:"auth",children:[(0,b.jsx)(i,{className:"mr-2 h-4 w-4"})," Auth Events"]}),(0,b.jsxs)(u.TabsTrigger,{value:"metrics",children:[(0,b.jsx)(h.ShieldCheck,{className:"mr-2 h-4 w-4"})," Günlük Metrikler"]})]}),(0,b.jsxs)(u.TabsContent,{value:"requests",className:"space-y-4",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsxs)(t.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(m.Filter,{className:"h-4 w-4"})," Request Filtreleri"]}),(0,b.jsx)(t.CardDescription,{children:"Path, method ve tarih bazlı filtreleme."})]}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:function(a){a.preventDefault(),as({tab:"requests",q:W.trim(),method:Y.trim().toUpperCase(),status:$.trim(),from:aa.trim(),to:ac.trim(),only_admin:ae?"1":"",offset:0})},className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Arama"}),(0,b.jsx)(p.Input,{value:W,onChange:a=>X(a.target.value),placeholder:"/api/orders"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Method"}),(0,b.jsx)(p.Input,{value:Y,onChange:a=>Z(a.target.value),placeholder:"GET"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Status"}),(0,b.jsx)(p.Input,{value:$,onChange:a=>_(a.target.value),placeholder:"200"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Başlangıç"}),(0,b.jsx)(p.Input,{type:"datetime-local",value:aa,onChange:a=>ab(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Bitiş"}),(0,b.jsx)(p.Input,{type:"datetime-local",value:ac,onChange:a=>ad(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{className:"flex items-center gap-2",children:(0,b.jsx)("span",{children:"Sadece Admin"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Switch,{checked:ae,onCheckedChange:af}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Admin istekleri"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(o.Button,{type:"submit",children:[(0,b.jsx)(k.Search,{className:"mr-2 h-4 w-4"})," Uygula"]}),(0,b.jsx)(o.Button,{type:"button",variant:"secondary",onClick:function(){X(""),Z(""),_(""),ab(""),ad(""),af(!1),as({tab:"requests",q:"",method:"",status:"",from:"",to:"",only_admin:"",offset:0})},children:"Sıfırla"})]})]})})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(t.CardTitle,{className:"text-base",children:"Request Logları"}),(0,b.jsxs)(t.CardDescription,{children:["Toplam ",(0,b.jsx)("strong",{children:aF})," kayıt"]})]}),(0,b.jsx)(r.Badge,{variant:"outline",children:aC?"Yükleniyor…":`${az.items.length} kayıt`})]})}),(0,b.jsxs)(t.CardContent,{children:[aw.error&&(0,b.jsx)("div",{className:"rounded-md border border-destructive/30 bg-destructive/5 p-3 text-sm",children:I(aw.error)}),(0,b.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableHead,{children:"Tarih"}),(0,b.jsx)(w.TableHead,{children:"İstek"}),(0,b.jsx)(w.TableHead,{children:"Status"}),(0,b.jsx)(w.TableHead,{children:"IP / User"})]})}),(0,b.jsxs)(w.TableBody,{children:[0===az.items.length&&!aC&&(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Kayıt bulunamadı."})}),az.items.map(a=>{let c=Number(a.status_code??0);return(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"whitespace-nowrap text-sm",children:J(a.created_at)}),(0,b.jsxs)(w.TableCell,{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:G(a.method)}),(0,b.jsx)("div",{className:"text-muted-foreground",children:G(a.path)}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:G(a.url)})]}),(0,b.jsxs)(w.TableCell,{children:[(0,b.jsx)(r.Badge,{variant:c>=500?"destructive":c>=400?"secondary":c>=300?"outline":"default",children:c||"—"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[Number(a.response_time_ms??0),"ms"]})]}),(0,b.jsxs)(w.TableCell,{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:G(a.ip)}),(0,b.jsxs)("div",{className:"text-muted-foreground",children:[a.user_id?`uid:${a.user_id}`:"anon",a.is_admin?" · admin":""]})]})]},String(a.id))})]})]})}),(0,b.jsx)(v.Separator,{className:"my-4"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[0===aF?"0":`${V+1}-${Math.min(V+U,aF)}`," / "," ",aF]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",size:"sm",disabled:!aH,onClick:()=>as({offset:Math.max(0,V-U)}),children:"Önceki"}),(0,b.jsx)(o.Button,{variant:"outline",size:"sm",disabled:!aI,onClick:()=>as({offset:V+U}),children:"Sonraki"})]})]})]})]})]}),(0,b.jsxs)(u.TabsContent,{value:"auth",className:"space-y-4",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsxs)(t.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(m.Filter,{className:"h-4 w-4"})," Auth Filtreleri"]}),(0,b.jsx)(t.CardDescription,{children:"Login / logout eventlerini filtreleyin."})]}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:function(a){a.preventDefault(),as({tab:"auth",event:ag,email:ai.trim(),user_id:ak.trim(),ip:am.trim(),from:aa.trim(),to:ac.trim(),offset:0})},className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Event"}),(0,b.jsxs)(x.Select,{value:ag||"",onValueChange:ah,children:[(0,b.jsx)(x.SelectTrigger,{children:(0,b.jsx)(x.SelectValue,{placeholder:"Hepsi"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"",children:"Hepsi"}),E.AUDIT_AUTH_EVENTS.map(a=>(0,b.jsx)(x.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Email"}),(0,b.jsx)(p.Input,{value:ai,onChange:a=>aj(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"User ID"}),(0,b.jsx)(p.Input,{value:ak,onChange:a=>al(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"IP"}),(0,b.jsx)(p.Input,{value:am,onChange:a=>an(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Başlangıç"}),(0,b.jsx)(p.Input,{type:"datetime-local",value:aa,onChange:a=>ab(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Bitiş"}),(0,b.jsx)(p.Input,{type:"datetime-local",value:ac,onChange:a=>ad(a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-3 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(o.Button,{type:"submit",children:[(0,b.jsx)(k.Search,{className:"mr-2 h-4 w-4"})," Uygula"]}),(0,b.jsx)(o.Button,{type:"button",variant:"secondary",onClick:function(){ah(""),aj(""),al(""),an(""),ab(""),ad(""),as({tab:"auth",event:"",email:"",user_id:"",ip:"",from:"",to:"",offset:0})},children:"Sıfırla"})]})]})})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(t.CardTitle,{className:"text-base",children:"Auth Eventleri"}),(0,b.jsxs)(t.CardDescription,{children:["Toplam ",(0,b.jsx)("strong",{children:aG})," kayıt"]})]}),(0,b.jsx)(r.Badge,{variant:"outline",children:aD?"Yükleniyor…":`${aA.items.length} kayıt`})]})}),(0,b.jsxs)(t.CardContent,{children:[ax.error&&(0,b.jsx)("div",{className:"rounded-md border border-destructive/30 bg-destructive/5 p-3 text-sm",children:I(ax.error)}),(0,b.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableHead,{children:"Tarih"}),(0,b.jsx)(w.TableHead,{children:"Event"}),(0,b.jsx)(w.TableHead,{children:"Kullanıcı"}),(0,b.jsx)(w.TableHead,{children:"IP"})]})}),(0,b.jsxs)(w.TableBody,{children:[0===aA.items.length&&!aD&&(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Kayıt bulunamadı."})}),aA.items.map(a=>(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"whitespace-nowrap text-sm",children:J(a.created_at)}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)(r.Badge,{variant:"outline",children:G(a.event)})}),(0,b.jsxs)(w.TableCell,{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:G(a.email||a.user_id||"—")}),(0,b.jsx)("div",{className:"text-muted-foreground",children:a.user_id?`uid:${a.user_id}`:""})]}),(0,b.jsx)(w.TableCell,{className:"text-sm",children:G(a.ip)})]},String(a.id)))]})]})}),(0,b.jsx)(v.Separator,{className:"my-4"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[0===aG?"0":`${V+1}-${Math.min(V+U,aG)}`," / "," ",aG]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",size:"sm",disabled:!aH,onClick:()=>as({offset:Math.max(0,V-U)}),children:"Önceki"}),(0,b.jsx)(o.Button,{variant:"outline",size:"sm",disabled:!aJ,onClick:()=>as({offset:V+U}),children:"Sonraki"})]})]})]})]})]}),(0,b.jsxs)(u.TabsContent,{value:"metrics",className:"space-y-4",children:[(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsxs)(t.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4"})," Günlük Metrikler"]}),(0,b.jsx)(t.CardDescription,{children:"Request sayısı, unique IP ve error sayıları."})]}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:function(a){a.preventDefault();let b=String(H(ao,14)||14);ap(b),as({tab:"metrics",days:b,path_prefix:aq.trim(),only_admin:ae?"1":""})},className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Gün"}),(0,b.jsxs)(x.Select,{value:ao,onValueChange:ap,children:[(0,b.jsx)(x.SelectTrigger,{children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"7",children:"7 gün"}),(0,b.jsx)(x.SelectItem,{value:"14",children:"14 gün"}),(0,b.jsx)(x.SelectItem,{value:"30",children:"30 gün"}),(0,b.jsx)(x.SelectItem,{value:"60",children:"60 gün"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Path Prefix"}),(0,b.jsx)(p.Input,{value:aq,onChange:a=>ar(a.target.value),placeholder:"/api"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Sadece Admin"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Switch,{checked:ae,onCheckedChange:af}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Admin istekleri"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(o.Button,{type:"submit",children:[(0,b.jsx)(m.Filter,{className:"mr-2 h-4 w-4"})," Uygula"]}),(0,b.jsx)(o.Button,{type:"button",variant:"secondary",onClick:function(){ap("14"),ar(""),af(!1),as({tab:"metrics",days:"14",path_prefix:"",only_admin:""})},children:"Sıfırla"})]})]})})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsx)(t.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(t.CardTitle,{className:"text-base",children:"Günlük Grafik"}),(0,b.jsxs)(t.CardDescription,{children:["Son ",aB.days?.length??0," gün"]})]}),aE&&(0,b.jsxs)(r.Badge,{variant:"outline",className:"flex items-center gap-2",children:[(0,b.jsx)(n.Loader2,{className:"h-3 w-3 animate-spin"})," Yükleniyor"]})]})}),(0,b.jsxs)(t.CardContent,{children:[ay.error&&(0,b.jsx)("div",{className:"rounded-md border border-destructive/30 bg-destructive/5 p-3 text-sm",children:I(ay.error)}),(0,b.jsx)(D,{rows:aB.days??[],loading:aE})]})]})]})]})]})}a.s(["default",()=>K],35605)}];

//# sourceMappingURL=src_app_%28main%29_admin_%28admin%29_audit_admin-audit-client_tsx_d26be905._.js.map