module.exports=[26495,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(23292),f=a.i(99570),g=a.i(91119);a.i(34658);var h=a.i(42969);a.i(58501);var i=a.i(52205),j=a.i(86304),k=a.i(75083),l=a.i(9348),m=a.i(66718),n=a.i(70430),o=a.i(63658),p=a.i(80701);let q=({mode:a,values:c,disabled:d,hasResourceId:f,onChange:g,onSubmit:h})=>{let i=async a=>{a.preventDefault(),d||(c.title.trim()?await h():e.toast.error("Ad zorunlu."))};return(0,b.jsxs)("form",{onSubmit:i,noValidate:!0,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Ad"}),(0,b.jsx)(m.Input,{value:c.title,onChange:a=>g({title:a.target.value}),disabled:d,placeholder:"Örn: Anna (Terapist)"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Admin panelde görünen isim."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Tür"}),(0,b.jsxs)(p.Select,{value:c.type,onValueChange:a=>g({type:a}),disabled:d,children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsx)(p.SelectContent,{children:l.RESOURCE_TYPE_OPTIONS.map(a=>(0,b.jsx)(p.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Filtreleme ve raporlama için."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Kapasite"}),(0,b.jsx)(m.Input,{type:"number",min:1,value:c.capacity,onChange:a=>g({capacity:Number(a.target.value)}),disabled:d}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Haftalık plan kapasitesi bu değeri aşamaz."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Dış Referans (opsiyonel)"}),(0,b.jsx)(m.Input,{type:"text",value:c.external_ref_id??"",onChange:a=>g({external_ref_id:a.target.value||null}),disabled:d}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Harici sistem id / ref."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Durum"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Switch,{checked:c.is_active,onCheckedChange:a=>g({is_active:a}),disabled:d}),(0,b.jsx)("span",{className:"text-sm",children:"Aktif"})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pasif kaynak public ekranda listelenmez (backend kuralı)."})]})]}),f||"create"!==a?null:(0,b.jsxs)("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-700",children:["Kaynak oluşturulduktan sonra ",(0,b.jsx)("strong",{children:"Haftalık Plan"})," ve"," ",(0,b.jsx)("strong",{children:"Günlük Plan"})," sekmeleri aktif olur."]})]})};var r=a.i(5084),s=a.i(6015),t=a.i(87936),u=a.i(35133);async function v(a){try{let b=await fetch(a,{credentials:"omit",cache:"no-store"});if(!b.ok)return null;return await b.json()}catch{return null}}function w(a){let[b,d]=(0,c.useState)("/"),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),i=(0,c.useRef)(!1);return(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{if(i.current)return;i.current=!0;let a=("http://localhost:8044/api".trim()||(process.env.API_BASE_URL||"").trim()).replace(/\/+$/,"");a&&(async()=>{let[b,c]=await Promise.all([v(`${a}/site_settings/app-locales`),v(`${a}/site_settings/default-locale`)]),d=Array.isArray(b)?b:b&&"object"==typeof b&&"data"in b&&Array.isArray(b.data)?b.data:[],e=c&&"object"==typeof c&&"data"in c?(0,u.normLocaleTag)(c.data):(0,u.normLocaleTag)(c);f(d.length?d:null),h(e||null)})()},[]),(0,c.useMemo)(()=>{var b;let c,d,f,h,i,j=(d=Array.from(new Set((c=Array.isArray(b=e||[])?b:[]).filter(a=>a&&!1!==a.is_active).map(a=>(0,u.normLocaleTag)(a.code)).filter(Boolean))),(i=(h=(f=c.find(a=>a?.is_default===!0&&a?.is_active!==!1))?(0,u.normLocaleTag)(f.code):"")?[h,...d.filter(a=>a!==h)]:d).length?i:[(0,u.normLocaleTag)("de")||"de"]),k=new Set(j.map(u.normLocaleTag)),l=function(){if("u"<typeof document)return"";let a=document.cookie.match(/(?:^|;\s*)NEXT_LOCALE=([^;]+)/);return a?(0,u.normLocaleTag)(decodeURIComponent(a[1])):""}();if(l&&k.has(l))return l;let m=(0,u.normLocaleTag)(a);if(m&&k.has(m))return m;let n=(0,u.normLocaleTag)(g);if(n&&k.has(n))return n;let o=(0,u.normLocaleTag)(j[0]);return o||(0,u.normLocaleTag)("de")||"de"},[b,a,e,g])}var x=a.i(9107);let y={ui_header_nav_home:"Home",ui_header_nav_about:"About Us",ui_header_nav_services:"Services",ui_header_nav_product:"Products",ui_header_nav_sparepart:"Spare Parts",ui_header_nav_references:"References",ui_header_nav_library:"Library",ui_header_nav_blog:"Blog",ui_header_nav_contact:"Contact",ui_home_hero_title:"Welcome to Our Website",ui_home_hero_subtitle:"We provide the best solutions for your business.",ui_home_hero_cta_primary:"Get Started",ui_home_hero_cta_secondary:"Learn More"},z={ui_header:["ui_header_nav_home","ui_header_nav_about","ui_header_nav_services","ui_header_nav_product","ui_header_nav_sparepart","ui_header_nav_references","ui_header_nav_library","ui_header_nav_news","ui_header_nav_contact","ui_header_cta","ui_header_open_menu","ui_header_open_sidebar","ui_header_close","ui_header_language","ui_header_auth","ui_header_register","ui_header_search_placeholder","ui_header_search","ui_header_contact_info","ui_header_call","ui_header_email"],ui_home:["ui_home_h1","ui_hero_kicker_prefix","ui_hero_kicker_brand","ui_hero_title_fallback","ui_hero_desc_fallback","ui_hero_cta","ui_hero_prev","ui_hero_next"],ui_footer:["ui_footer_company","ui_footer_about","ui_footer_blog","ui_footer_resources","ui_footer_free_tools","ui_footer_contact_us","ui_footer_services","ui_footer_service_seo","ui_footer_service_ppc","ui_footer_service_smm","ui_footer_service_link_building","ui_footer_service_cro","ui_footer_explore","ui_footer_account","ui_footer_privacy","ui_footer_affiliate","ui_footer_product_design","ui_footer_web_design","ui_footer_contact","ui_footer_phone_aria","ui_footer_email_aria","ui_footer_copyright_prefix","ui_footer_copyright_suffix"],ui_services:["ui_services_subprefix","ui_services_sublabel","ui_services_title","ui_services_placeholder_title","ui_services_placeholder_summary","ui_services_details_aria"],ui_banner:["ui_breadcrumb_home"],ui_hero:["ui_hero_kicker_prefix","ui_hero_kicker_brand","ui_hero_title_fallback","ui_hero_desc_fallback","ui_hero_cta","ui_hero_prev","ui_hero_next"],ui_contact:["ui_contact_subprefix","ui_contact_sublabel","ui_contact_title_left","ui_contact_tagline","ui_contact_quick_email_placeholder","ui_contact_form_title","ui_contact_first_name","ui_contact_last_name","ui_contact_company","ui_contact_website","ui_contact_phone","ui_contact_email","ui_contact_select_label","ui_contact_service_cooling_towers","ui_contact_service_maintenance","ui_contact_service_modernization","ui_contact_service_other","ui_contact_terms_prefix","ui_contact_terms","ui_contact_conditions","ui_contact_submit","ui_contact_sending","ui_contact_success","ui_contact_error_generic"],ui_about:["ui_about_subprefix","ui_about_sublabel","ui_about_view_all","ui_about_fallback_title"],ui_about_stats:["ui_about_stats_refs_title","ui_about_stats_projects_title","ui_about_stats_years_title"],ui_pricing:[],ui_testimonials:["ui_feedback_subprefix","ui_feedback_sublabel","ui_feedback_title","ui_feedback_paragraph","ui_feedback_prev","ui_feedback_next","ui_feedback_role_customer"],ui_faq:[],ui_features:[],ui_cta:[],ui_blog:["ui_news_subprefix","ui_news_sublabel","ui_news_title_prefix","ui_news_title_mark","ui_news_read_more","ui_news_read_more_aria","ui_news_view_all","ui_news_untitled","ui_news_sample_one","ui_news_sample_two"],ui_dashboard:[],ui_auth:["ui_auth_title","ui_auth_lead","ui_auth_register_link","ui_auth_email_label","ui_auth_email_placeholder","ui_auth_password_label","ui_auth_password_placeholder","ui_auth_remember_me","ui_auth_submit","ui_auth_loading","ui_auth_or","ui_auth_google_button","ui_auth_google_loading","ui_auth_error_required","ui_auth_error_google_generic"],ui_newsletter:["ui_newsletter_title","ui_newsletter_desc","ui_newsletter_cta","ui_newsletter_ok","ui_newsletter_fail","ui_newsletter_placeholder","ui_newsletter_section_aria","ui_newsletter_email_aria"],ui_library:["ui_library_subprefix","ui_library_sublabel","ui_library_title_prefix","ui_library_title_mark","ui_library_view_detail","ui_library_view_detail_aria","ui_library_view_all","ui_library_untitled","ui_library_sample_one","ui_library_sample_two"],ui_feedback:["ui_feedback_subprefix","ui_feedback_sublabel","ui_feedback_title","ui_feedback_paragraph","ui_feedback_prev","ui_feedback_next","ui_feedback_role_customer"],ui_references:["ui_references_subprefix","ui_references_sublabel","ui_references_title","ui_references_view_all"],ui_news:["ui_news_subprefix","ui_news_sublabel","ui_news_title_prefix","ui_news_title_mark","ui_news_read_more","ui_news_read_more_aria","ui_news_view_all","ui_news_untitled","ui_news_sample_one","ui_news_sample_two"],ui_products:["ui_products_kicker_prefix","ui_products_kicker_label","ui_products_title_prefix","ui_products_title_mark","ui_products_read_more","ui_products_read_more_aria","ui_products_price_label","ui_products_view_all","ui_products_empty"],ui_spareparts:["ui_spareparts_kicker_prefix","ui_spareparts_kicker_label","ui_spareparts_title_prefix","ui_spareparts_title_mark","ui_spareparts_read_more","ui_spareparts_read_more_aria","ui_spareparts_price_label","ui_spareparts_view_all","ui_spareparts_empty"],ui_faqs:["ui_faqs_page_title"],ui_team:["ui_team_page_title"],ui_offer:["ui_offer_page_title"],ui_catalog:["ui_catalog_page_title"],ui_cookie:["ui_cookie_title","ui_cookie_description","ui_cookie_label_necessary","ui_cookie_desc_necessary","ui_cookie_label_analytics","ui_cookie_desc_analytics","ui_cookie_btn_cancel","ui_cookie_btn_save"],ui_errors:["ui_404_title","ui_404_subtitle","ui_404_back_home","ui_500_title","ui_500_subtitle","ui_500_try_again","ui_generic_error","ui_loading"],ui_cookie_policy:["ui_cookie_policy_page_title"],ui_quality:["ui_quality_meta_title","ui_quality_meta_description"],ui_mission_vision:["ui_mission_vision_meta_title","ui_mission_vision_meta_description"],ui_mission:["ui_mission_page_title","ui_mission_meta_title","ui_mission_meta_description"],ui_vision:["ui_vision_page_title","ui_vision_meta_title","ui_vision_meta_description"],ui_kvkk:["ui_kvkk_page_title","ui_kvkk_meta_title","ui_kvkk_meta_description","ui_kvkk_empty","ui_kvkk_empty_text"],ui_legal_notice:["ui_legal_notice_page_title","ui_legal_notice_meta_title","ui_legal_notice_meta_description","ui_legal_notice_empty","ui_legal_notice_empty_text"],ui_privacy_notice:["ui_privacy_notice_page_title","ui_privacy_notice_meta_title","ui_privacy_notice_meta_description","ui_privacy_notice_empty","ui_privacy_notice_empty_text"],ui_privacy_policy:["ui_privacy_policy_page_title","ui_privacy_policy_meta_title","ui_privacy_policy_meta_description","ui_privacy_policy_empty","ui_privacy_policy_empty_text"],ui_terms:["ui_terms_page_title","ui_terms_meta_title","ui_terms_meta_description","ui_terms_empty","ui_terms_empty_text"],ui_common:["ui_common_read_more","ui_common_read_less","ui_common_loading","ui_common_error_generic"],ui_solutions:["ui_solutions_page_title","ui_solutions_meta_title","ui_solutions_meta_description"],ui_appointment:["ui_appointment_page_title","ui_appointment_meta_title","ui_appointment_meta_description","ui_appointment_og_image"]},A=a=>String(a??"").trim(),B=a=>(0,l.hmToMinutes)(a),C=({resourceId:a,hasResourceId:d,disabled:g,onEditDay:h})=>{let i,{ui:k}=function(a,b){let d=w(b),{data:e}=(0,x.useGetSiteSettingByKeyQuery)(a),f=(0,c.useMemo)(()=>(function(a){let b=!a||"object"!=typeof a||Array.isArray(a)?a:"data"in a?a.data:"value"in a?a.value:a;if(!b)return{};if("object"==typeof b&&!Array.isArray(b))return b;if("string"==typeof b){let a=b.trim();if(!a)return{};if(a.startsWith("{")&&a.endsWith("}"))try{let b=JSON.parse(a);if(b&&"object"==typeof b&&!Array.isArray(b))return b}catch{}}return{}})(e?.value),[e?.value]),{t:g}=function(a,b){let d=(0,c.useMemo)(()=>a.map(a=>String(a)),[a]),{data:e}=(0,x.useListSiteSettingsQuery)(),f=(0,c.useMemo)(()=>{let a={};if(!e)return a;for(let b of e){let c=String(b?.key||"").trim();c&&(!d.length||d.includes(c))&&(a[c]=function(a){let b=function(a){if("string"!=typeof a)return a;let b=a.trim();if(!b)return a;if(b.startsWith("{")&&b.endsWith("}")||b.startsWith("[")&&b.endsWith("]"))try{return JSON.parse(b)}catch{}return a}(a);return"string"==typeof b?{label:{en:b}}:b&&"object"==typeof b&&!Array.isArray(b)?b.label&&"object"==typeof b.label&&!Array.isArray(b.label)?b:{label:b}:{}}(b?.value))}return a},[e,d]);return{t:a=>{let c=String(a||"").trim();if(!c)return"";let d=f[c],e=d?.label||{},g=String(b||"").trim().toLowerCase().replace("_","-").split("-")[0].trim(),h=y[c]??"",i=g&&e[g]||e.en||e.tr||Object.values(e||{})[0]||h||c;return("string"==typeof i?i:"").trim()||h||c},map:f}}(z[a]??[],d);return{ui:(a,b="")=>{let c=String(a||"").trim();if(!c)return"";let d=f[c];if("string"==typeof d&&d.trim())return d.trim();let e=String(g(c)||"").trim();if(e&&e!==c)return e;let h=String(b||"").trim();if(h)return h;let i=y[c];return"string"==typeof i&&i.trim()?i.trim():c},raw:f,locale:d}}("ui_appointment",(i=w(void 0),(0,c.useMemo)(()=>(0,u.normLocaleTag)(i)||"de",[i]))),q=(0,c.useCallback)((a,b)=>{let c=A(k(a,b));return!function(a,b){let c=String(a??"").trim();if(!c||c===b||/^ui_[a-z0-9_]+$/i.test(c))return!1;let d=c.replace(/\s+/g,"");return d!==`[${b}]`&&d!==`{{${b}}}`}(c,a)?b:c},[k]),v=(0,c.useMemo)(()=>[{value:1,label:q("ui_dow_1","Pazartesi")},{value:2,label:q("ui_dow_2","Salı")},{value:3,label:q("ui_dow_3","Çarşamba")},{value:4,label:q("ui_dow_4","Perşembe")},{value:5,label:q("ui_dow_5","Cuma")},{value:6,label:q("ui_dow_6","Cumartesi")},{value:7,label:q("ui_dow_7","Pazar")}],[q]),C=(0,c.useMemo)(()=>d?{resource_id:a}:void 0,[d,a]),D=(0,t.useListWorkingHoursAdminQuery)(C,{skip:!C,refetchOnMountOrArgChange:!0}),E=(0,c.useMemo)(()=>[...D.data??[]].map(a=>({id:A(a.id),dow:(0,l.clampInt)(a.dow,1,1,7),start_time:(0,l.normalizeHm)(a.start_time),end_time:(0,l.normalizeHm)(a.end_time),slot_minutes:(0,l.clampInt)(a.slot_minutes,60,1,1440),break_minutes:(0,l.clampInt)(a.break_minutes,0,0,1440),capacity:(0,l.clampInt)(a.capacity,1,0,999),is_active:(0,l.toActiveBool)(a.is_active)})).sort((a,b)=>a.dow!==b.dow?a.dow-b.dow:B(a.start_time)-B(b.start_time)),[D.data]),[F,G]=(0,c.useState)({});(0,c.useEffect)(()=>{let a={};for(let b of E)a[b.id]={...b};G(a)},[E]);let[H,{isLoading:I}]=(0,t.useUpsertWorkingHourAdminMutation)(),[J,{isLoading:K}]=(0,t.useDeleteWorkingHourAdminMutation)(),L=g||D.isLoading||D.isFetching||I||K,[M,N]=(0,c.useState)(()=>({resource_id:a||"00000000-0000-0000-0000-000000000000",dow:1,start_time:"10:00",end_time:"18:00",slot_minutes:60,break_minutes:0,capacity:1,is_active:!0}));(0,c.useEffect)(()=>{d&&N(b=>({...b,resource_id:a}))},[d,a]);let O=(a,b)=>{let c=B(a),d=B(b);return Number.isFinite(c)&&Number.isFinite(d)&&d>c},P=async()=>{if(!d)return;let b=(0,l.normalizeHm)(M.start_time),c=(0,l.normalizeHm)(M.end_time);if(!O(b,c))return void e.toast.error(q("ui_admin_wh_err_range","Başlangıç/bitiş saati geçersiz. (Bitiş, başlangıçtan büyük olmalı)"));try{await H({resource_id:a,dow:(0,l.clampInt)(M.dow,1,1,7),start_time:b,end_time:c,slot_minutes:(0,l.clampInt)(M.slot_minutes,60,1,1440),break_minutes:(0,l.clampInt)(M.break_minutes,0,0,1440),capacity:(0,l.clampInt)(M.capacity,1,0,999),is_active:(0,l.toActiveBool)(M.is_active)}).unwrap(),e.toast.success(q("ui_admin_wh_added","Çalışma aralığı eklendi."))}catch(a){e.toast.error(a?.data?.error?.message||a?.message||q("ui_admin_wh_add_failed","Çalışma aralığı eklenemedi."))}},Q=async b=>{if(!d)return;let c=(0,l.normalizeHm)(b.start_time),f=(0,l.normalizeHm)(b.end_time);if(!O(c,f))return void e.toast.error(q("ui_admin_wh_err_invalid_range","Başlangıç/bitiş saati geçersiz."));try{await H({id:b.id,resource_id:a,dow:(0,l.clampInt)(b.dow,1,1,7),start_time:c,end_time:f,slot_minutes:(0,l.clampInt)(b.slot_minutes,60,1,1440),break_minutes:(0,l.clampInt)(b.break_minutes,0,0,1440),capacity:(0,l.clampInt)(b.capacity,1,0,999),is_active:!!b.is_active}).unwrap(),e.toast.success(q("ui_admin_wh_updated","Çalışma aralığı güncellendi."))}catch(a){e.toast.error(a?.data?.error?.message||a?.message||q("ui_admin_wh_update_failed","Çalışma aralığı güncellenemedi."))}},R=async b=>{let c=v.find(a=>a.value===b.dow)?.label||String(b.dow);if(window.confirm(q("ui_admin_wh_delete_confirm",`Bu \xe7alışma aralığını silmek \xfczeresin.

G\xfcn: ${c}
Saat: ${b.start_time} - ${b.end_time}

Devam edilsin mi?`)))try{await J({id:String(b.id),resource_id:a}).unwrap(),e.toast.success(q("ui_admin_wh_deleted","Çalışma aralığı silindi."))}catch(a){e.toast.error(a?.data?.error?.message||a?.message||q("ui_admin_wh_delete_failed","Çalışma aralığı silinemedi."))}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:q("ui_admin_wh_title","Haftalık Çalışma Saatleri")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:q("ui_admin_wh_desc","Bu aralıklar günlük seans üretiminin kaynağıdır. (Seans dk + Ara dk)")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[L?(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:q("ui_admin_loading","Yükleniyor...")}):null,(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>D.refetch(),disabled:L,children:q("ui_admin_refresh","Yenile")})]})]}),(0,b.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,b.jsxs)(s.Table,{children:[(0,b.jsx)(s.TableHeader,{children:(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableHead,{style:{width:180},children:q("ui_admin_col_day","Gün")}),(0,b.jsx)(s.TableHead,{style:{width:120},children:q("ui_admin_col_start","Başlangıç")}),(0,b.jsx)(s.TableHead,{style:{width:120},children:q("ui_admin_col_end","Bitiş")}),(0,b.jsx)(s.TableHead,{style:{width:120},children:q("ui_admin_col_session","Seans (dk)")}),(0,b.jsx)(s.TableHead,{style:{width:120},children:q("ui_admin_col_break","Ara (dk)")}),(0,b.jsx)(s.TableHead,{style:{width:110},children:q("ui_admin_col_capacity","Kapasite")}),(0,b.jsx)(s.TableHead,{style:{width:90},children:q("ui_admin_col_active","Aktif")}),(0,b.jsx)(s.TableHead,{className:"text-right",style:{width:260},children:q("ui_admin_col_actions","İşlemler")})]})}),(0,b.jsxs)(s.TableBody,{children:[0===E.length?(0,b.jsx)(s.TableRow,{children:(0,b.jsx)(s.TableCell,{colSpan:8,className:"text-sm text-muted-foreground",children:q("ui_admin_wh_empty","Henüz çalışma aralığı yok. Aşağıdan yeni aralık ekleyebilirsin.")})}):null,E.map(a=>{let c=F[a.id]||a;return(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableCell,{children:(0,b.jsxs)(p.Select,{value:String(c.dow),onValueChange:b=>G(d=>({...d,[a.id]:{...c,dow:Number(b)}})),disabled:L,children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsx)(p.SelectContent,{children:v.map(a=>(0,b.jsx)(p.SelectItem,{value:String(a.value),children:a.label},a.value))})]})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(m.Input,{type:"time",value:c.start_time,disabled:L,onChange:b=>G(d=>({...d,[a.id]:{...c,start_time:b.target.value}}))})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(m.Input,{type:"time",value:c.end_time,disabled:L,onChange:b=>G(d=>({...d,[a.id]:{...c,end_time:b.target.value}}))})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(m.Input,{type:"number",value:c.slot_minutes,min:1,max:1440,disabled:L,onChange:b=>G(d=>({...d,[a.id]:{...c,slot_minutes:Number(b.target.value)}}))})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(m.Input,{type:"number",value:c.break_minutes,min:0,max:1440,disabled:L,onChange:b=>G(d=>({...d,[a.id]:{...c,break_minutes:Number(b.target.value)}}))})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(m.Input,{type:"number",value:c.capacity,min:0,max:999,disabled:L,onChange:b=>G(d=>({...d,[a.id]:{...c,capacity:Number(b.target.value)}}))})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)(o.Switch,{checked:!!c.is_active,disabled:L,onCheckedChange:b=>G(d=>({...d,[a.id]:{...c,is_active:b}}))})}),(0,b.jsx)(s.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-end gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",disabled:L||!h,onClick:()=>{h?.({dow:c.dow,wh_id:c.id})},title:q("ui_admin_wh_edit_day_hint","Bu günün günlük seanslarını düzenle"),children:q("ui_admin_btn_edit","Düzenle")}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",disabled:L,onClick:()=>void Q(c),children:q("ui_admin_btn_save","Kaydet")}),(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"sm",disabled:L,onClick:()=>void R(c),children:q("ui_admin_btn_delete","Sil")})]})})]},a.id)})]})]})}),(0,b.jsx)(r.Separator,{className:"my-4"}),(0,b.jsx)("div",{className:"text-sm font-semibold mb-2",children:q("ui_admin_wh_add_title","Yeni Çalışma Aralığı Ekle")}),(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-8",children:[(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_day","Gün")}),(0,b.jsxs)(p.Select,{value:String(M.dow),onValueChange:a=>N(b=>({...b,dow:Number(a)})),disabled:L,children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsx)(p.SelectContent,{children:v.map(a=>(0,b.jsx)(p.SelectItem,{value:String(a.value),children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_start","Başlangıç")}),(0,b.jsx)(m.Input,{type:"time",value:String(M.start_time),onChange:a=>N(b=>({...b,start_time:a.target.value})),disabled:L})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_end","Bitiş")}),(0,b.jsx)(m.Input,{type:"time",value:String(M.end_time),onChange:a=>N(b=>({...b,end_time:a.target.value})),disabled:L})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_session","Seans (dk)")}),(0,b.jsx)(m.Input,{type:"number",value:Number(M.slot_minutes??60),min:1,max:1440,onChange:a=>N(b=>({...b,slot_minutes:Number(a.target.value)})),disabled:L})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_break","Ara")}),(0,b.jsx)(m.Input,{type:"number",value:Number(M.break_minutes??0),min:0,max:1440,onChange:a=>N(b=>({...b,break_minutes:Number(a.target.value)})),disabled:L})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_capacity","Kapasite")}),(0,b.jsx)(m.Input,{type:"number",value:Number(M.capacity??1),min:0,max:999,onChange:a=>N(b=>({...b,capacity:Number(a.target.value)})),disabled:L})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,b.jsx)(n.Label,{children:q("ui_admin_lbl_active","Aktif")}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(o.Switch,{checked:(0,l.toActiveBool)(M.is_active),onCheckedChange:a=>N(b=>({...b,is_active:a})),disabled:L})})]}),(0,b.jsx)("div",{className:"md:col-span-1 flex items-end justify-end",children:(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:P,disabled:L,children:q("ui_admin_btn_add","Ekle")})})]})]})},D=a=>String(a??"").trim(),E=()=>(0,l.normalizeYmd)(new Date().toISOString());function F(a){let{busy:c,effectiveDate:d,dayDow:e,onChangeDate:g,onRefresh:h,onGenerate:i,onCloseDay:k,onOpenDay:l}=a;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2 mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Günlük Plan"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Seçilen güne göre haftalık plandan seanslar çıkarılır. DB’ye yazmak için “Slot Üret” kullan."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[c?(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:"Yükleniyor..."}):null,(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:h,disabled:c,children:"Yenile"})]})]}),(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Tarih"}),(0,b.jsx)(m.Input,{type:"date",value:d,onChange:a=>g(a.target.value),disabled:c}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Gün: ",(0,b.jsx)("strong",{children:e})," (1=Pt … 7=Pz)"]})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex flex-col gap-2 md:items-end",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:i,disabled:c,children:"Slot Üret"}),(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"sm",onClick:k,disabled:c,children:"Günü Kapat"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:l,disabled:c,children:"Günü Aç"})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Not: Onay anında kapasite tekrar kontrol edilir (backend kuralı)."})]})]}),(0,b.jsx)(r.Separator,{className:"my-4"})]})}function G(a){let{busy:c,whForDay:d,selectedWhId:e,onSelectWhId:f,preview:g}=a,h=d.length>0,i=g.length>0;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Seans Önizleme (Haftalık Plandan)"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Önizleme sadece UI içindir. Public saatler için DB planı doldurmak gerekir."})]}),h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid gap-2 md:grid-cols-2 mb-2",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Çalışma Aralığı"}),(0,b.jsxs)(p.Select,{value:e,onValueChange:f,disabled:c,children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"Aralık seçin"})}),(0,b.jsx)(p.SelectContent,{children:d.map(a=>(0,b.jsxs)(p.SelectItem,{value:a.id,children:[a.start_time,"-",a.end_time," • ",a.slot_minutes,"dk + ",a.break_minutes,"dk • kap:",a.capacity]},a.id))})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Aynı gün içinde birden fazla aralık varsa, günlük seansları aralık bazında yönet."})]})}),e?i?(0,b.jsx)("div",{className:"overflow-x-auto mb-3",children:(0,b.jsxs)(s.Table,{children:[(0,b.jsx)(s.TableHeader,{children:(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableHead,{style:{width:120},children:"Saat"}),(0,b.jsx)(s.TableHead,{style:{width:120},children:"Kapasite"}),(0,b.jsx)(s.TableHead,{children:"Aralık"})]})}),(0,b.jsx)(s.TableBody,{children:g.map(a=>(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableCell,{className:"text-nowrap",children:(0,b.jsx)(j.Badge,{variant:"outline",children:a.time})}),(0,b.jsx)(s.TableCell,{className:"text-sm",children:a.capacity}),(0,b.jsx)(s.TableCell,{className:"text-sm text-muted-foreground",children:a.range})]},`${a.wh_id}:${a.time}`))})]})}):(0,b.jsx)("div",{className:"rounded-md border border-muted bg-muted/40 px-3 py-2 text-sm",children:"Seçilen aralık için seans üretilemedi. (Saatler/slot dk/ara dk kontrol et)"}):(0,b.jsx)("div",{className:"rounded-md border border-muted bg-muted/40 px-3 py-2 text-sm",children:"Önizleme için bir aralık seç."})]}):(0,b.jsx)("div",{className:"rounded-md border border-muted bg-muted/40 px-3 py-2 text-sm",children:"Bu gün için aktif haftalık çalışma aralığı yok. (DOW eşleşmiyor veya aralık pasif)"})]})}function H(a){let{busy:c,planRows:d,onToggle:e}=a,g=d.length>0;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"DB Plan (Slot Kayıtları)"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Public “müsait saatler” buradan okunur."})]}),g?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(s.Table,{children:[(0,b.jsx)(s.TableHeader,{children:(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableHead,{style:{width:110},children:"Saat"}),(0,b.jsx)(s.TableHead,{style:{width:140},children:"Kapasite"}),(0,b.jsx)(s.TableHead,{style:{width:140},children:"Durum"}),(0,b.jsx)(s.TableHead,{className:"text-right",style:{width:160},children:"İşlem"})]})}),(0,b.jsx)(s.TableBody,{children:d.map(a=>{let d,g,h=(0,l.normalizeHm)(a.time),i=1===Number(a.is_active??0),k=Number(a.capacity??0),m=Number(a.reserved_count??0),n=!!a.available;return(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableCell,{className:"text-nowrap",children:(0,b.jsx)(j.Badge,{variant:"outline",children:h})}),(0,b.jsxs)(s.TableCell,{className:"text-sm",children:[(d=Number(k??0),g=Number(m??0),d<=0?"-":`${g}/${d}`),k>0?(0,b.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(dolu/toplam)"}):null]}),(0,b.jsx)(s.TableCell,{className:"text-nowrap",children:i?n?(0,b.jsx)(j.Badge,{className:"bg-emerald-100 text-emerald-700",children:"Açık"}):(0,b.jsx)(j.Badge,{className:"bg-yellow-100 text-yellow-700",children:"Dolu"}):(0,b.jsx)(j.Badge,{variant:"secondary",children:"Kapalı"})}),(0,b.jsx)(s.TableCell,{className:"text-right text-nowrap",children:(0,b.jsx)(f.Button,{type:"button",variant:i?"destructive":"outline",size:"sm",onClick:()=>e(a),disabled:c,children:i?"Kapat":"Aç"})})]},String(a.id||`${h}:${D(a.slot_id||"")}`))})})]})}):(0,b.jsx)("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 px-3 py-2 text-sm text-yellow-700",children:"DB plan boş. Önizleme görüyorsan “Slot Üret” ile DB’ye yazdırmalısın."}),(0,b.jsxs)("div",{className:"mt-3 rounded-md border border-muted bg-muted/40 px-3 py-2 text-sm",children:[(0,b.jsx)("div",{className:"font-semibold mb-1",children:"Net Kural"}),(0,b.jsx)("div",{children:"Haftalık plan: seans üretiminin kaynağı (UI önizleme buradan)."}),(0,b.jsx)("div",{children:"DB plan: public’in gerçek kaynağı (müsait saatler buradan seçilir)."}),(0,b.jsx)("div",{children:"Plan boşsa public’te saat görünmez. Bu yüzden üretim şart."})]})]})}let I=({resourceId:a,hasResourceId:d,disabled:f,initialDow:g,initialWhId:h})=>{let[i,j]=(0,c.useState)(()=>E()),k=(0,c.useMemo)(()=>(0,l.normalizeYmd)(i)||E(),[i]),m=(0,c.useMemo)(()=>{let a;return 0===(a=new Date(`${k}T00:00:00`).getDay())?7:a},[k]),n=(0,c.useMemo)(()=>d?{resource_id:a}:void 0,[d,a]),o=(0,t.useListWorkingHoursAdminQuery)(n,{skip:!n,refetchOnMountOrArgChange:!0}),p=(0,c.useMemo)(()=>[...o.data??[]].map(a=>({id:D(a.id),dow:Number(a.dow??1),start_time:(0,l.normalizeHm)(a.start_time),end_time:(0,l.normalizeHm)(a.end_time),slot_minutes:Number(a.slot_minutes??60),break_minutes:Number(a.break_minutes??0),capacity:Number(a.capacity??1),is_active:1===Number(a.is_active??0)})),[o.data]),q=(0,c.useMemo)(()=>{let a=Number(g??m);return p.filter(a=>a.is_active).filter(b=>Number(b.dow)===a).sort((a,b)=>(0,l.hmToMinutes)(a.start_time)-(0,l.hmToMinutes)(b.start_time))},[p,m,g]),[r,s]=(0,c.useState)("");(0,c.useEffect)(()=>{h?s(String(h)):!r&&q.length&&s(q[0].id)},[h,q.length]);let u=(0,c.useMemo)(()=>q.find(a=>a.id===r)||null,[q,r]),v=(0,c.useMemo)(()=>{if(!u)return[];let a=[],b=(0,l.hmToMinutes)(u.start_time),c=(0,l.hmToMinutes)(u.end_time),d=Math.max(1,Number(u.slot_minutes??60)),e=Math.max(1,d+Math.max(0,Number(u.break_minutes??0)));if(!Number.isFinite(b)||!Number.isFinite(c)||c<=b)return[];for(let f=b;f+d<=c;f+=e)a.push({time:(0,l.minutesToHm)(f),wh_id:u.id,capacity:Math.max(0,Number(u.capacity??1)),slot_minutes:d,break_minutes:Math.max(0,Number(u.break_minutes??0)),range:`${u.start_time}-${u.end_time} • ${d}dk + ${Math.max(0,Number(u.break_minutes??0))}dk`});return a.sort((a,b)=>(0,l.hmToMinutes)(a.time)-(0,l.hmToMinutes)(b.time))},[u]),w=(0,c.useMemo)(()=>d?{resource_id:a,date:k}:void 0,[d,a,k]),x=(0,t.useGetDailyPlanAdminQuery)(w,{skip:!w,refetchOnMountOrArgChange:!0}),y=(0,c.useMemo)(()=>[...x.data??[]].sort((a,b)=>(0,l.hmToMinutes)((0,l.normalizeHm)(a.time))-(0,l.hmToMinutes)((0,l.normalizeHm)(b.time))),[x.data]),[z,{isLoading:A}]=(0,t.useGenerateSlotsAdminMutation)(),[B,{isLoading:C}]=(0,t.useOverrideDayAdminMutation)(),[I,{isLoading:J}]=(0,t.useOverrideSlotAdminMutation)(),K=f||o.isLoading||o.isFetching||x.isLoading||x.isFetching||A||C||J,L=async()=>{if(d)try{let b=await z({resource_id:a,date:k}).unwrap();e.toast.success(`Slot \xfcretimi tamam. Oluşan=${b?.created??0}, Plan=${b?.planned??0}`),await x.refetch()}catch(a){e.toast.error(a?.data?.error?.message||a?.message||"Slot üretimi başarısız.")}},M=async b=>{if(d)try{let c=await B({resource_id:a,date:k,is_active:b}).unwrap();e.toast.success(`G\xfcn g\xfcncellendi. updated=${c?.updated??0}`),await x.refetch()}catch(a){e.toast.error(a?.data?.error?.message||a?.message||"Gün override edilemedi.")}},N=async b=>{if(!d)return;let c=(0,l.normalizeHm)(b.time);if(!c)return;let f=1!==Number(b.is_active??0),g=Number(b.reserved_count??0);if(f||!(g>0)||window.confirm(`Bu slotta ${g} onaylı rezervasyon var.
Slotu kapatırsan bu randevular i\xe7in aksiyon gerekebilir.

Devam edilsin mi?`))try{await I({resource_id:a,date:k,time:c,is_active:f}).unwrap(),e.toast.success("Slot güncellendi."),await x.refetch()}catch(a){e.toast.error(a?.data?.error?.message||a?.message||"Slot güncellenemedi.")}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F,{busy:K,effectiveDate:k,dayDow:m,onChangeDate:a=>j((0,l.normalizeYmd)(a)||E()),onRefresh:()=>x.refetch(),onGenerate:L,onCloseDay:()=>void M(!1),onOpenDay:()=>void M(!0)}),(0,b.jsx)(G,{busy:K,whForDay:q,selectedWhId:r,onSelectWhId:s,preview:v}),(0,b.jsx)(H,{busy:K,planRows:y,onToggle:N})]})},J=a=>String(a??"").trim(),K=({mode:a,initialData:d,loading:e,saving:i,onSubmit:m,onCancel:n})=>{let o=J(d?.id),p=(0,h.isUuidLike)(o),[r,s]=(0,c.useState)("resource"),[t,u]=(0,c.useState)({}),[v,w]=(0,c.useState)(()=>{let a=J(d?.type),b=l.RESOURCE_TYPE_VALUES.includes(a)?a:"therapist";return{title:J(d?.title),type:b,is_active:(0,l.toActiveBool)(d?.is_active??1),capacity:Number(d?.capacity??1),external_ref_id:d?.external_ref_id?String(d?.external_ref_id):null}});(0,c.useEffect)(()=>{let a=J(d?.type),b=l.RESOURCE_TYPE_VALUES.includes(a)?a:"therapist";w({title:J(d?.title),type:b,is_active:(0,l.toActiveBool)(d?.is_active??1),capacity:Number(d?.capacity??1),external_ref_id:d?.external_ref_id?String(d?.external_ref_id):null})},[d]);let x=e||i,y=async()=>{let a=v.title.trim(),b=Number(v.capacity??1),c=v.external_ref_id?v.external_ref_id.trim():null;await m({...v,title:a,capacity:Number.isFinite(b)&&b>0?Math.floor(b):1,external_ref_id:c||null})};return(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{children:"create"===a?"Yeni Kaynak":"Kaynak Yönetimi"}),(0,b.jsx)(g.CardDescription,{children:"Kaynak bilgileri + haftalık plan + günlük plan."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[n?(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:n,disabled:x,children:"Geri"}):null,(0,b.jsx)(f.Button,{size:"sm",onClick:()=>void y(),disabled:x,children:i?"create"===a?"Oluşturuluyor...":"Kaydediliyor...":"create"===a?"Oluştur":"Kaydet"}),e?(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:"Yükleniyor..."}):null]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)(k.Tabs,{value:r,onValueChange:a=>s(a),children:[(0,b.jsxs)(k.TabsList,{className:"mb-4",children:[(0,b.jsx)(k.TabsTrigger,{value:"resource",disabled:x,children:"Kaynak"}),(0,b.jsx)(k.TabsTrigger,{value:"weekly",disabled:x||!p,title:p?void 0:"Önce kaynak oluştur.",children:"Haftalık Plan"}),(0,b.jsx)(k.TabsTrigger,{value:"daily",disabled:x||!p,title:p?void 0:"Önce kaynak oluştur.",children:"Günlük Plan"})]}),(0,b.jsx)(k.TabsContent,{value:"resource",children:(0,b.jsx)(q,{mode:a,values:v,disabled:x,hasResourceId:p,onChange:a=>w(b=>({...b,...a})),onSubmit:y})}),(0,b.jsx)(k.TabsContent,{value:"weekly",children:(0,b.jsx)(C,{resourceId:o,hasResourceId:p,disabled:x,onEditDay:({dow:a,wh_id:b})=>{u({dow:a,wh_id:b}),s("daily")}})}),(0,b.jsx)(k.TabsContent,{value:"daily",children:(0,b.jsx)(I,{resourceId:o,hasResourceId:p,disabled:x,initialDow:t.dow,initialWhId:t.wh_id})})]})})]})};function L({id:a}){let j=(0,d.useRouter)(),k=String(a??"").trim(),l="new"===k,m=(0,h.isUuidLike)(k),n=(0,i.useGetResourceAdminQuery)(k,{skip:l||!m,refetchOnMountOrArgChange:!0}),[o,p]=(0,i.useCreateResourceAdminMutation)(),[q,r]=(0,i.useUpdateResourceAdminMutation)(),s=n.isLoading||n.isFetching,t=p.isLoading||r.isLoading;c.useEffect(()=>{l||m||e.toast.error("Geçersiz kaynak id.")},[l,m]);let u=async a=>{try{if(l){let b=await o(a).unwrap(),c=String(b?.id||"").trim();e.toast.success("Kaynak oluşturuldu."),(0,h.isUuidLike)(c)?j.replace(`/admin/availability/${encodeURIComponent(c)}`):j.replace("/admin/availability");return}await q({id:k,patch:a}).unwrap(),e.toast.success("Kaynak güncellendi."),await n.refetch()}catch(a){e.toast.error(function(a){let b=a?.data?.error?.message;if("string"==typeof b&&b.trim())return b;let c=a?.data?.error;if("string"==typeof c&&c.trim())return c;let d=a?.data?.message;if("string"==typeof d&&d.trim())return d;let e=a?.error;return"string"==typeof e&&e.trim()?e:"İşlem başarısız. Lütfen tekrar deneyin."}(a))}};return l||m?!l&&n.isError?(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Kaynak Bulunamadı"}),(0,b.jsx)(g.CardDescription,{children:"Bu kaynağa erişilemedi veya silinmiş olabilir."})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(f.Button,{type:"button",onClick:()=>j.push("/admin/availability"),children:"Listeye Dön"})})]}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(K,{mode:l?"create":"edit",initialData:l?void 0:n.data,loading:s,saving:t,onSubmit:u,onCancel:()=>j.push("/admin/availability")})}):(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Geçersiz Kaynak"}),(0,b.jsx)(g.CardDescription,{children:"Gelen id geçersiz. Lütfen listeye dön."})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(f.Button,{type:"button",onClick:()=>j.push("/admin/availability"),children:"Listeye Dön"})})]})}a.s(["default",()=>L],26495)}];

//# sourceMappingURL=c80d1_%28main%29_admin_%28admin%29_availability_admin-availability-detail-client_tsx_87f2b1a3._.js.map