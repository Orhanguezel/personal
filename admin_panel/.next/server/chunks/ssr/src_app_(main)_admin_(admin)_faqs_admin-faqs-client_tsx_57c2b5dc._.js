module.exports=[72314,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292),e=a.i(28551),f=a.i(90899),g=a.i(30637);a.i(58501);var h=a.i(15422),i=a.i(38246),j=a.i(42737);let k=({filters:a,total:d,onFiltersChange:e,onRefresh:f,locales:g,localesLoading:h,allowAllOption:k=!1})=>{let l=c.default.useMemo(()=>{let a=(g||[]).map(a=>({value:String(a.value||"").trim().toLowerCase(),label:a.label})).filter(a=>a.value);return k?[{value:"",label:"Tüm diller"},...a]:a},[g,k]),m=!!h||0===l.length;return(0,b.jsx)("div",{className:"rounded-lg border bg-card",children:(0,b.jsx)("div",{className:"border-b p-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"FAQ"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"FAQ kayıtlarını dil, aktiflik ve arama kriterlerine göre yönetebilirsin."}),(0,b.jsxs)("div",{className:"mt-3 grid gap-2 md:grid-cols-12 md:items-end",children:[(0,b.jsxs)("div",{className:"md:col-span-4",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Arama (q)"}),(0,b.jsx)("input",{type:"search",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"question/answer içinde ara",value:a.q,onChange:b=>e({...a,q:b.target.value})})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Slug"}),(0,b.jsx)("input",{type:"text",className:"w-full rounded-md border bg-background px-3 py-2 text-sm",placeholder:"örn: fiyatlar",value:a.slug,onChange:b=>e({...a,slug:b.target.value})})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(j.AdminLocaleSelect,{value:a.locale,onChange:b=>e({...a,locale:(b||"").trim().toLowerCase()}),options:l,loading:!!h,disabled:m,label:"Dil"}),h?(0,b.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Diller yükleniyor..."}):null,h||0!==l.length?null:(0,b.jsx)("div",{className:"mt-1 text-xs text-destructive",children:"Aktif dil listesi yok. Site ayarlarından app_locales kontrol et."})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Aktif"}),(0,b.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:a.isActive,onChange:b=>e({...a,isActive:b.target.value}),children:[(0,b.jsx)("option",{value:"all",children:"Hepsi"}),(0,b.jsx)("option",{value:"active",children:"Aktif"}),(0,b.jsx)("option",{value:"inactive",children:"Pasif"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Sort"}),(0,b.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:a.sort,onChange:b=>e({...a,sort:b.target.value}),children:[(0,b.jsx)("option",{value:"updated_at",children:"updated_at"}),(0,b.jsx)("option",{value:"created_at",children:"created_at"}),(0,b.jsx)("option",{value:"display_order",children:"display_order"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Dir"}),(0,b.jsxs)("select",{className:"w-full rounded-md border bg-background px-2 py-2 text-sm",value:a.orderDir,onChange:b=>e({...a,orderDir:b.target.value}),children:[(0,b.jsx)("option",{value:"desc",children:"desc"}),(0,b.jsx)("option",{value:"asc",children:"asc"})]})]})]})]}),(0,b.jsxs)("div",{className:"lg:w-72 lg:border-l lg:pl-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Toplam Kayıt"}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:d})]}),f?(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs",onClick:f,children:"Yenile"}):null]}),(0,b.jsx)("div",{className:"mt-3 flex justify-end",children:(0,b.jsx)(i.default,{href:"/admin/faqs/new",className:"rounded-md bg-primary px-3 py-2 text-xs text-primary-foreground",children:"Yeni FAQ"})})]})]})})})};var l=a.i(95490),m=a.i(85668),n=a.i(14548),o=a.i(99570);let p=a=>{if(!a)return"-";let b=new Date(a);return Number.isNaN(b.getTime())?String(a):b.toLocaleString()},q=a=>null==a?"":String(a),r=({items:a,loading:e,onSaveOrder:f,savingOrder:g,enableMoveControls:j,onMoveUp:k,onMoveDown:r,activeLocale:s})=>{let t=a??[],u=t.length>0,[v,{isLoading:w}]=(0,h.useDeleteFaqAdminMutation)(),x=e||w||!!g,y=(0,c.useMemo)(()=>String(s||"").trim().toLowerCase().replace("_","-").split("-")[0].trim()||"",[s]),z=a=>({pathname:`/admin/faqs/${encodeURIComponent(a)}`,query:y?{locale:y}:void 0}),A=a=>Number(a.is_active??0)?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px]",children:"Aktif"}):(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:"Pasif"}),B=async a=>{if(window.confirm(`Bu FAQ kaydını silmek \xfczeresin.

Question: ${a.question??"(yok)"}
ID: ${a.id}
Slug: ${a.slug??"(yok)"}

Devam etmek istiyor musun?`))try{await v(a.id).unwrap(),d.toast.success("FAQ başarıyla silindi.")}catch(b){let a=b?.data?.error?.message??"FAQ silinirken bir hata oluştu.";d.toast.error(a)}},C=()=>e?(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"FAQ yükleniyor..."}):(0,b.jsx)("div",{className:"p-6 text-sm text-muted-foreground",children:"Henüz kayıtlı FAQ yok."}),D=({idx:a})=>j?(0,b.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>k?.(a),disabled:x||0===a||!k,title:"Yukarı",children:(0,b.jsx)(l.ArrowUp,{className:"size-4"})}),(0,b.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>r?.(a),disabled:x||a===t.length-1||!r,title:"Aşağı",children:(0,b.jsx)(m.ArrowDown,{className:"size-4"})})]}):null;return(0,b.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,b.jsx)("div",{className:"border-b p-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Liste"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:x?"Yükleniyor…":`${t.length} kayıt`})]}),f?(0,b.jsxs)(o.Button,{variant:"outline",onClick:f,disabled:x||!u,children:[(0,b.jsx)(n.Save,{className:"mr-2 size-4"}),g?"Kaydediliyor…":"Sıralamayı Kaydet"]}):null]})}),(0,b.jsx)("div",{className:"hidden min-[1700px]:block",children:u?(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b bg-muted/30 text-left",children:[(0,b.jsx)("th",{className:"px-3 py-2 text-xs text-muted-foreground",children:"#"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Question"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Slug"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Order"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Durum"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs",children:"Tarih"}),(0,b.jsx)("th",{className:"px-3 py-2 text-xs text-right",children:"İşlemler"})]})}),(0,b.jsx)("tbody",{children:t.map((a,c)=>{let d=q(a.locale_resolved);return(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("td",{className:"px-3 py-2 text-xs text-muted-foreground whitespace-nowrap",children:c+1}),(0,b.jsx)("td",{className:"px-3 py-2 min-w-0",children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate font-semibold",title:q(a.question),children:a.question??"Question yok"}),d?(0,b.jsxs)("div",{className:"truncate text-xs text-muted-foreground",children:["Locale: ",(0,b.jsx)("code",{children:d})]}):null]})}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,b.jsx)("code",{className:"text-xs",children:a.slug??"-"})}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,b.jsx)("code",{className:"text-xs",children:String(a.display_order??0)})}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:A(a)}),(0,b.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:[(0,b.jsx)("div",{children:p(a.created_at)}),(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Güncelleme: ",p(a.updated_at)]})]}),(0,b.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(D,{idx:c}),(0,b.jsx)(i.default,{href:z(a.id),className:"rounded-md border px-3 py-1 text-xs",children:"Düzenle"}),(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs text-destructive disabled:opacity-60",disabled:x,onClick:()=>B(a),children:"Sil"})]})})]},a.id)})})]}),(0,b.jsx)("div",{className:"p-3 text-xs text-muted-foreground",children:"Sıralama: Yukarı/Aşağı ile taşı, sonra kaydet."})]}):C()}),(0,b.jsx)("div",{className:"block min-[1700px]:hidden",children:u?(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"grid gap-3 2xl:grid-cols-2",children:t.map((a,c)=>{let d=q(a.locale_resolved);return(0,b.jsx)("div",{className:"rounded-lg border bg-card p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:["#",c+1]}),A(a),d?(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:["Locale: ",(0,b.jsx)("code",{className:"ml-1",children:d})]}):null,(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-muted-foreground",children:["Order: ",(0,b.jsx)("code",{className:"ml-1",children:String(a.display_order??0)})]})]}),(0,b.jsx)("div",{className:"mt-2 truncate text-sm font-semibold",title:q(a.question),children:a.question??(0,b.jsx)("span",{className:"text-muted-foreground",children:"Question yok"})}),(0,b.jsxs)("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:["Slug: ",(0,b.jsx)("code",{children:a.slug??"-"})]}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{children:["Oluşturulma: ",p(a.created_at)]}),(0,b.jsxs)("div",{children:["Güncelleme: ",p(a.updated_at)]})]})]}),(0,b.jsxs)("div",{className:"flex shrink-0 flex-col gap-2 items-end",children:[(0,b.jsx)(D,{idx:c}),(0,b.jsx)(i.default,{href:z(a.id),className:"rounded-md border px-3 py-1 text-xs text-center",children:"Düzenle"}),(0,b.jsx)("button",{type:"button",className:"rounded-md border px-3 py-1 text-xs text-center text-destructive disabled:opacity-60",disabled:x,onClick:()=>B(a),children:"Sil"})]})]})},a.id)})}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:["Varsayılan görünüm karttır. Çok büyük ekranlarda (≥ ",1700,"px) tablo görünümü açılır."]})]}):C()})]})};function s(){let{localeOptions:a,defaultLocaleFromDb:i,loading:j,fetching:l}=(0,e.useAdminLocales)(),m=c.useMemo(()=>(0,f.resolveAdminApiLocale)(a,i,"tr"),[a,i]),[n,o]=c.useState({q:"",slug:"",isActive:"all",sort:"updated_at",orderDir:"desc",locale:""});c.useEffect(()=>{a&&0!==a.length&&o(a=>a.locale?a:{...a,locale:(0,g.localeShortClientOr)(m,"tr")})},[a,m]);let p=c.useMemo(()=>String(n.locale||"").trim().toLowerCase().replace("_","-").split("-")[0].trim()||m,[n.locale,m]),q=c.useMemo(()=>{if("all"!==n.isActive)return+("active"===n.isActive)},[n.isActive]),s=c.useMemo(()=>({q:n.q.trim()||void 0,slug:n.slug.trim()||void 0,is_active:q,sort:n.sort,orderDir:n.orderDir,locale:p||void 0,limit:200,offset:0}),[n.q,n.slug,q,n.sort,n.orderDir,p]),t=(0,h.useListFaqsAdminQuery)(s,{refetchOnMountOrArgChange:!0}),u=c.useMemo(()=>{let a=t.data;return Array.isArray(a)?a:[]},[t.data]),v=u.length,[w,x]=c.useState([]);function y(a,b){x(c=>{if(a<0||b<0||a>=c.length||b>=c.length)return c;let d=c.slice(),[e]=d.splice(a,1);return d.splice(b,0,e),d})}c.useEffect(()=>x(u),[u]);let[z,A]=(0,h.useUpdateFaqAdminMutation)();async function B(){try{for(let a=0;a<w.length;a++){let b=w[a],c={display_order:a};await z({id:b.id,patch:c}).unwrap()}d.toast.success("Sıralama kaydedildi."),t.refetch()}catch(a){d.toast.error(a?.data?.error?.message||a?.message||"Sıralama kaydedilemedi.")}}let C=t.isLoading||t.isFetching||j||l||A.isLoading;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(k,{filters:n,total:v,onFiltersChange:o,onRefresh:()=>t.refetch(),locales:a??[],localesLoading:j||l,allowAllOption:!1}),(0,b.jsx)(r,{items:w,loading:C,activeLocale:p,enableMoveControls:!0,onMoveUp:a=>y(a,a-1),onMoveDown:a=>y(a,a+1),onSaveOrder:B,savingOrder:A.isLoading})]})}a.s(["default",()=>s],72314)}];

//# sourceMappingURL=src_app_%28main%29_admin_%28admin%29_faqs_admin-faqs-client_tsx_57c2b5dc._.js.map