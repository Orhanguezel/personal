module.exports=[43872,a=>{"use strict";var b=a.i(87924);let c=(0,a.i(70106).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var d=a.i(72131),e=a.i(50944),f=a.i(96221);a.i(58501);var g=a.i(13616),h=a.i(79755),i=a.i(91119);let j=({children:a})=>{let c=(0,e.useRouter)(),j=(0,h.useAdminT)(),{data:k,isLoading:l,isError:m}=(0,g.useStatusQuery)(),n=!!k?.authenticated,o=l||!n;return((0,d.useEffect)(()=>{l||(m||!n)&&c.push("/login")},[l,m,n,c]),l||!k)?(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"flex min-h-64 items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(f.Loader2,{className:"size-6 animate-spin text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:j("admin.db.auth.loading")})]})})})}):n?(0,b.jsx)(b.Fragment,{children:a({authed:n,adminSkip:o})}):null};var k=a.i(23292),l=a.i(36338);let m=a=>String(a).padStart(2,"0"),n=({onChanged:a})=>{let c=(0,h.useAdminT)(),[e,f]=(0,d.useState)(""),[g,i]=(0,d.useState)(""),[j,{isLoading:n}]=(0,l.useCreateDbSnapshotMutation)(),[o,{isLoading:p}]=(0,l.useExportSqlMutation)(),q=n||p,r=async()=>{try{let b={};e.trim()&&(b.label=e.trim()),g.trim()&&(b.note=g.trim());let d=await j(b).unwrap();k.toast.success(c("admin.db.fullDb.snapshotCreated",{label:d.label||d.filename||d.id})),f(""),i(""),a?.()}catch(a){k.toast.error(a?.data?.error||a?.message||c("admin.db.fullDb.snapshotError"))}},s=async()=>{try{var b,d;let e,f,g,h;b=await o().unwrap(),e=new Date,f=`${e.getFullYear()}${m(e.getMonth()+1)}${m(e.getDate())}_${m(e.getHours())}${m(e.getMinutes())}`,d=`db_backup_${f}.sql`,g=URL.createObjectURL(b),(h=document.createElement("a")).href=g,h.download=d,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(g),k.toast.success(c("admin.db.fullDb.exportSuccess")),a?.()}catch(a){k.toast.error(a?.data?.error||a?.message||c("admin.db.fullDb.exportError"))}},t=async()=>{k.toast.info(c("admin.db.fullDb.jsonNotImplemented"))};return(0,b.jsx)("div",{className:"card mb-3",children:(0,b.jsx)("div",{className:"card-body py-3",children:(0,b.jsxs)("div",{className:"d-flex flex-column flex-lg-row gap-3 justify-content-between",children:[(0,b.jsxs)("div",{style:{minWidth:0,flex:2},children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("h5",{className:"mb-0 small fw-semibold",children:c("admin.db.fullDb.title")}),(0,b.jsx)("div",{className:"text-muted small",children:c("admin.db.fullDb.description")})]}),(0,b.jsxs)("div",{className:"row g-2 align-items-end",children:[(0,b.jsxs)("div",{className:"col-sm-4",children:[(0,b.jsx)("label",{className:"form-label small",children:c("admin.db.fullDb.snapshotLabel")}),(0,b.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:c("admin.db.fullDb.snapshotPlaceholder"),value:e,onChange:a=>f(a.target.value),disabled:q})]}),(0,b.jsxs)("div",{className:"col-sm-6",children:[(0,b.jsx)("label",{className:"form-label small",children:c("admin.db.fullDb.noteLabel")}),(0,b.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:c("admin.db.fullDb.notePlaceholder"),value:g,onChange:a=>i(a.target.value),disabled:q})]}),(0,b.jsx)("div",{className:"col-sm-2 d-flex justify-content-end",children:(0,b.jsx)("button",{type:"button",className:"btn btn-primary btn-sm mt-3 mt-sm-0",disabled:q,onClick:r,children:n?c("admin.db.fullDb.creating"):c("admin.db.fullDb.createButton")})})]})]}),(0,b.jsxs)("div",{className:"border-start ps-lg-3 ms-lg-3",style:{minWidth:0,flex:1},children:[(0,b.jsx)("div",{className:"small fw-semibold mb-1",children:c("admin.db.fullDb.downloadTitle")}),(0,b.jsx)("div",{className:"text-muted small mb-2",children:c("admin.db.fullDb.downloadDesc")}),(0,b.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,b.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:q,onClick:s,children:p?c("admin.db.fullDb.sqlPreparing"):c("admin.db.fullDb.sqlButton")}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:q,onClick:t,children:c("admin.db.fullDb.jsonButton")})]})]})]})})})};function o(a,b="İşlem sırasında hata oluştu."){if(!a)return b;if("string"==typeof a)return a;if("number"==typeof a||"boolean"==typeof a)return String(a);if(a instanceof Error)return a.message||b;let c=a?.data?.message??a?.data?.error??a?.message??a?.error??a?.statusText;if("string"==typeof c&&c.trim())return c;try{return JSON.stringify(a)}catch{return b}}let p=({title:a="Açıklama",children:c,align:e="start",icon:f="question",defaultOpen:g=!1,className:i="",minWidth:j=280,maxWidth:k=420})=>{let l=(0,h.useAdminT)(),m=(0,d.useId)(),n=(0,d.useMemo)(()=>`help_${m.replace(/[:]/g,"_")}`,[m]),[o,p]=(0,d.useState)(g),q=(0,d.useRef)(null),r=(0,d.useRef)(null),s=()=>p(!1);return(0,d.useEffect)(()=>{if(!o)return;let a=a=>{let b=a.target;if(!b)return;let c=q.current,d=r.current;c&&c.contains(b)||d&&d.contains(b)||s()},b=a=>{"Escape"===a.key&&s()};return document.addEventListener("mousedown",a,!0),document.addEventListener("keydown",b,!0),()=>{document.removeEventListener("mousedown",a,!0),document.removeEventListener("keydown",b,!0)}},[o]),(0,b.jsxs)("span",{ref:q,className:"d-inline-flex align-items-center position-relative "+i,style:{verticalAlign:"middle"},children:[(0,b.jsx)("button",{type:"button",className:"btn btn-link p-0 ms-1 text-decoration-none","aria-expanded":o,"aria-controls":n,title:a,onClick:()=>p(a=>!a),style:{lineHeight:1},children:(0,b.jsx)("span",{className:"d-inline-flex align-items-center justify-content-center border rounded-circle",style:{width:18,height:18,fontSize:12,userSelect:"none"},children:"bulb"===f?"i":"?"})}),o?(0,b.jsx)("div",{id:n,ref:r,className:"position-absolute",style:{zIndex:1050,top:"100%",marginTop:6,minWidth:j,maxWidth:k,..."end"===e?{right:0}:{left:0}},role:"dialog","aria-label":a,children:(0,b.jsx)("div",{className:"card shadow-sm border",children:(0,b.jsxs)("div",{className:"card-body py-2",children:[(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between gap-2 mb-1",children:[(0,b.jsx)("div",{className:"fw-semibold small",children:a}),(0,b.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:s,"aria-label":l("admin.db.help.closeButton"),title:l("admin.db.help.closeButton"),style:{padding:"0px 6px",lineHeight:1.2},children:"×"})]}),(0,b.jsx)("div",{className:"small text-muted",style:{maxHeight:220,overflow:"auto"},children:c}),(0,b.jsx)("div",{className:"mt-2 text-muted",style:{fontSize:11},children:l("admin.db.help.closeHint")})]})})}):null]})},q=({headline:a,children:c})=>(0,b.jsxs)("div",{children:[a?(0,b.jsx)("div",{className:"fw-semibold small mb-1",children:a}):null,(0,b.jsx)("div",{className:"small text-muted",children:c})]}),r=()=>{let a=(0,h.useAdminT)(),[c,e]=(0,d.useState)("text"),[f,g]=(0,d.useState)(""),[i,j]=(0,d.useState)(!0),[m,n]=(0,d.useState)(!1),[r,s]=(0,d.useState)(""),[t,u]=(0,d.useState)(!0),[v,w]=(0,d.useState)(!1),[x,y]=(0,d.useState)(null),[z,A]=(0,d.useState)(!0),[B,C]=(0,d.useState)(0),[D,{isLoading:E}]=(0,l.useImportSqlTextMutation)(),[F,{isLoading:G}]=(0,l.useImportSqlUrlMutation)(),[H,{isLoading:I}]=(0,l.useImportSqlFileMutation)(),J=E||G||I,K=(0,d.useMemo)(()=>"text"===c?a("admin.db.import.tabs.text"):"url"===c?a("admin.db.import.tabs.url"):a("admin.db.import.tabs.file"),[c,a]),L=async b=>{if(b.preventDefault(),!f.trim())return k.toast.error(a("admin.db.import.text.required"));if(!m){let b=i?a("admin.db.import.confirm.truncateYes"):a("admin.db.import.confirm.truncateNo");a("admin.db.import.confirm.text",{truncate:b});return}try{let b=await D({sql:f,truncateBefore:i,dryRun:m}).unwrap();if(!b?.ok)return k.toast.error(o(b?.error||b?.message||b,a("admin.db.import.error.text")));b.dryRun?k.toast.success(a("admin.db.import.success.dryRun")):(k.toast.success(a("admin.db.import.success.text")),g(""))}catch(b){k.toast.error(o(b,a("admin.db.import.error.textGeneric")))}},M=async b=>{if(b.preventDefault(),!r.trim())return k.toast.error(a("admin.db.import.url.required"));if(!v){let b=t?a("admin.db.import.confirm.truncateYes"):a("admin.db.import.confirm.truncateNo");a("admin.db.import.confirm.url",{url:r,truncate:b});return}try{let b=await F({url:r.trim(),truncateBefore:t,dryRun:v}).unwrap();if(!b?.ok)return k.toast.error(o(b?.error||b?.message||b,a("admin.db.import.error.url")));b.dryRun?k.toast.success(a("admin.db.import.success.dryRun")):(k.toast.success(a("admin.db.import.success.url")),s(""))}catch(b){k.toast.error(o(b,a("admin.db.import.error.urlGeneric")))}},N=async b=>{if(b.preventDefault(),!x)return k.toast.error(a("admin.db.import.file.required"));let c=z?a("admin.db.import.confirm.truncateYes"):a("admin.db.import.confirm.truncateNo");a("admin.db.import.confirm.file",{file:x.name,truncate:c})};return(0,b.jsxs)("div",{className:"card mb-3",children:[(0,b.jsxs)("div",{className:"card-header py-2 d-flex justify-content-between align-items-center flex-wrap gap-2 position-relative",children:[(0,b.jsxs)("span",{className:"small fw-semibold d-inline-flex align-items-center gap-2 flex-wrap",children:[a("admin.db.import.title")," ",(0,b.jsxs)("span",{className:"text-muted",children:["— ",K]}),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.helpTitle"),align:"end",children:(0,b.jsx)(q,{headline:a("admin.db.import.helpHeadline"),children:(0,b.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,b.jsx)("li",{children:a("admin.db.import.helpDesc1")}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Truncate"}),": ",a("admin.db.import.helpDesc2")]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Dry run"}),": ",a("admin.db.import.helpDesc3")]})]})})})]}),J&&(0,b.jsx)("span",{className:"badge bg-secondary small",children:a("admin.db.import.processing")})]}),(0,b.jsxs)("div",{className:"card-body position-relative",children:[(0,b.jsxs)("p",{className:"text-muted small mb-3",children:[(0,b.jsx)("strong",{children:a("admin.db.import.dangerLabel")})," ",a("admin.db.import.warning")]}),(0,b.jsxs)("ul",{className:"nav nav-tabs small mb-3 flex-wrap",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("text"===c?"active":""),onClick:()=>e("text"),disabled:J,children:a("admin.db.import.tabs.text")})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("url"===c?"active":""),onClick:()=>e("url"),disabled:J,children:a("admin.db.import.tabs.url")})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("file"===c?"active":""),onClick:()=>e("file"),disabled:J,children:a("admin.db.import.tabs.file")})})]}),"text"===c&&(0,b.jsxs)("form",{onSubmit:L,children:[(0,b.jsxs)("div",{className:"mb-2 position-relative",children:[(0,b.jsxs)("label",{className:"form-label small d-flex align-items-center gap-1 flex-wrap",children:[a("admin.db.import.text.label")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"}),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.text.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.text.helpHeadline"),children:(0,b.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,b.jsx)("li",{children:a("admin.db.import.text.helpDesc1")}),(0,b.jsx)("li",{children:a("admin.db.import.text.helpDesc2")}),(0,b.jsx)("li",{children:a("admin.db.import.text.helpDesc3")})]})})})]}),(0,b.jsx)("textarea",{className:"form-control form-control-sm",rows:8,value:f,onChange:a=>g(a.target.value),placeholder:a("admin.db.import.text.placeholder"),disabled:J})]}),(0,b.jsxs)("div",{className:"d-flex flex-wrap gap-3 mb-3",children:[(0,b.jsxs)("div",{className:"form-check position-relative",children:[(0,b.jsx)("input",{id:"import-text-truncate",className:"form-check-input",type:"checkbox",checked:i,onChange:a=>j(a.target.checked),disabled:J}),(0,b.jsxs)("label",{className:"form-check-label small",htmlFor:"import-text-truncate",children:[a("admin.db.import.truncate.label"),(0,b.jsx)(p,{icon:"bulb",title:a("admin.db.import.truncate.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.truncate.helpHeadline"),children:(0,b.jsx)("div",{children:a("admin.db.import.truncate.helpDesc")})})})]})]}),(0,b.jsxs)("div",{className:"form-check position-relative",children:[(0,b.jsx)("input",{id:"import-text-dryrun",className:"form-check-input",type:"checkbox",checked:m,onChange:a=>n(a.target.checked),disabled:J}),(0,b.jsxs)("label",{className:"form-check-label small",htmlFor:"import-text-dryrun",children:[a("admin.db.import.dryRun.label"),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.dryRun.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.dryRun.helpHeadline"),children:(0,b.jsx)("div",{children:a("admin.db.import.dryRun.helpDesc")})})})]})]})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:J,children:E?a("admin.db.import.buttons.importing"):a("admin.db.import.buttons.apply")})]}),"url"===c&&(0,b.jsxs)("form",{onSubmit:M,children:[(0,b.jsxs)("div",{className:"mb-2 position-relative",children:[(0,b.jsxs)("label",{className:"form-label small d-flex align-items-center gap-1 flex-wrap",children:[a("admin.db.import.url.label")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"}),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.url.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.url.helpHeadline"),children:(0,b.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,b.jsx)("li",{children:a("admin.db.import.url.helpDesc1")}),(0,b.jsx)("li",{children:a("admin.db.import.url.helpDesc2")}),(0,b.jsx)("li",{children:a("admin.db.import.url.helpDesc3")})]})})})]}),(0,b.jsx)("input",{type:"url",className:"form-control form-control-sm",placeholder:a("admin.db.import.url.placeholder"),value:r,onChange:a=>s(a.target.value),disabled:J})]}),(0,b.jsxs)("div",{className:"d-flex flex-wrap gap-3 mb-3",children:[(0,b.jsxs)("div",{className:"form-check position-relative",children:[(0,b.jsx)("input",{id:"import-url-truncate",className:"form-check-input",type:"checkbox",checked:t,onChange:a=>u(a.target.checked),disabled:J}),(0,b.jsxs)("label",{className:"form-check-label small",htmlFor:"import-url-truncate",children:[a("admin.db.import.truncate.label"),(0,b.jsx)(p,{icon:"bulb",title:a("admin.db.import.truncate.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.truncate.helpHeadline"),children:(0,b.jsx)("div",{children:a("admin.db.import.truncate.helpDesc")})})})]})]}),(0,b.jsxs)("div",{className:"form-check position-relative",children:[(0,b.jsx)("input",{id:"import-url-dryrun",className:"form-check-input",type:"checkbox",checked:v,onChange:a=>w(a.target.checked),disabled:J}),(0,b.jsxs)("label",{className:"form-check-label small",htmlFor:"import-url-dryrun",children:[a("admin.db.import.dryRun.label"),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.dryRun.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.dryRun.helpHeadline"),children:(0,b.jsx)("div",{children:a("admin.db.import.dryRun.helpDescUrl")})})})]})]})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:J,children:G?a("admin.db.import.buttons.importing"):a("admin.db.import.buttons.importFromUrl")})]}),"file"===c&&(0,b.jsxs)("form",{onSubmit:N,children:[(0,b.jsxs)("div",{className:"mb-2 position-relative",children:[(0,b.jsxs)("label",{className:"form-label small d-flex align-items-center gap-1 flex-wrap",children:[a("admin.db.import.file.label")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"}),(0,b.jsx)(p,{icon:"question",title:a("admin.db.import.file.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.file.helpHeadline"),children:(0,b.jsxs)("ul",{className:"mb-0 ps-3",children:[(0,b.jsx)("li",{children:a("admin.db.import.file.helpDesc1")}),(0,b.jsx)("li",{children:a("admin.db.import.file.helpDesc2")}),(0,b.jsx)("li",{children:a("admin.db.import.file.helpDesc3")})]})})})]}),(0,b.jsx)("input",{type:"file",className:"form-control form-control-sm",accept:".sql,.gz,.sql.gz",onChange:a=>y(a.target.files?.[0]||null),disabled:J},B),x&&(0,b.jsxs)("div",{className:"text-muted small mt-1",children:[a("admin.db.import.file.selected")," ",(0,b.jsx)("code",{children:x.name})]}),(0,b.jsxs)("div",{className:"text-muted small mt-1",children:[a("admin.common.note"),": ",a("admin.db.import.file.note")]})]}),(0,b.jsxs)("div",{className:"form-check mb-3 position-relative",children:[(0,b.jsx)("input",{id:"import-file-truncate",className:"form-check-input",type:"checkbox",checked:z,onChange:a=>A(a.target.checked),disabled:J}),(0,b.jsxs)("label",{className:"form-check-label small",htmlFor:"import-file-truncate",children:[a("admin.db.import.truncate.label"),(0,b.jsx)(p,{icon:"bulb",title:a("admin.db.import.truncate.helpTitle"),children:(0,b.jsx)(q,{headline:a("admin.db.import.truncate.helpHeadline"),children:(0,b.jsx)("div",{children:a("admin.db.import.truncate.helpDescFile")})})})]})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:J,children:I?a("admin.db.import.buttons.importing"):a("admin.db.import.buttons.importFromFile")})]})]})]})},s=a=>null==a?"":String(a);function t(a,b="tr-TR"){if(!a)return"-";try{let c=new Date(a);if(Number.isNaN(c.getTime()))return s(a)||"-";return c.toLocaleString(b)}catch{return s(a)||"-"}}function u(a){if(null==a||Number.isNaN(a))return"-";if(a<1024)return`${a} B`;let b=a/1024;if(b<1024)return`${b.toFixed(1)} KB`;let c=b/1024;if(c<1024)return`${c.toFixed(1)} MB`;let d=c/1024;return`${d.toFixed(1)} GB`}let v={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},w=({items:a,loading:c,refetch:e})=>{let f=(0,h.useAdminT)(),g=a||[],i=g.length>0,[j,{isLoading:k}]=(0,l.useRestoreDbSnapshotMutation)(),[m,{isLoading:n}]=(0,l.useDeleteDbSnapshotMutation)(),o=c||k||n,p=(0,d.useMemo)(()=>{let a=g.length;return Number.isFinite(a)?a:0},[g.length]),q=async a=>{f("admin.db.snapshots.restoreConfirm",{label:a.label||a.filename||a.id})},r=async a=>{f("admin.db.snapshots.deleteConfirm",{label:a.label||a.filename||a.id})};return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"card-header py-2 d-flex align-items-center justify-content-between",children:[(0,b.jsx)("span",{className:"small fw-semibold",children:f("admin.db.snapshots.title")}),(0,b.jsxs)("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o&&(0,b.jsx)("span",{className:"badge bg-secondary small",children:f("admin.db.snapshots.processing")}),(0,b.jsxs)("span",{className:"text-muted small",children:[f("admin.db.snapshots.total")," ",(0,b.jsx)("strong",{children:p})]})]})]}),(0,b.jsxs)("div",{className:"card-body p-0",children:[(0,b.jsxs)("div",{className:"d-none d-xl-block",children:[(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsxs)("table",{className:"table table-hover table-sm mb-0 align-middle",style:{width:"100%",minWidth:980,tableLayout:"fixed"},children:[(0,b.jsx)("thead",{className:"table-light",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-nowrap",style:{width:64},children:f("admin.db.snapshots.columns.index")}),(0,b.jsx)("th",{className:"text-nowrap",style:{width:280},children:f("admin.db.snapshots.columns.labelNote")}),(0,b.jsx)("th",{className:"text-nowrap",style:{width:380},children:f("admin.db.snapshots.columns.file")}),(0,b.jsx)("th",{className:"text-nowrap",style:{width:200},children:f("admin.db.snapshots.columns.created")}),(0,b.jsx)("th",{className:"text-nowrap",style:{width:120},children:f("admin.db.snapshots.columns.size")}),(0,b.jsx)("th",{className:"text-nowrap text-end",style:{width:220},children:f("admin.db.snapshots.columns.actions")})]})}),(0,b.jsxs)("tbody",{children:[i?g.map((a,c)=>{let d=s(a.label).trim(),e=s(a.note).trim(),g=s(a.filename).trim(),h=s(a.id).trim();return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-muted small text-nowrap",children:c+1}),(0,b.jsxs)("td",{style:{minWidth:0},children:[(0,b.jsx)("div",{className:"fw-semibold small",style:v,title:d||f("admin.db.snapshots.noLabel"),children:d||(0,b.jsx)("span",{className:"text-muted",children:f("admin.db.snapshots.noLabel")})}),e?(0,b.jsx)("div",{className:"text-muted small",style:v,title:e,children:e}):(0,b.jsx)("div",{className:"text-muted small",children:f("admin.db.snapshots.noNote")})]}),(0,b.jsxs)("td",{style:{minWidth:0},children:[(0,b.jsx)("div",{style:v,title:g||"-",children:(0,b.jsx)("code",{className:"small",children:g||"-"})}),(0,b.jsxs)("div",{className:"text-muted small",style:v,title:h,children:["ID: ",(0,b.jsx)("code",{className:"small",children:h})]})]}),(0,b.jsx)("td",{className:"text-muted small text-nowrap",children:t(a.created_at)}),(0,b.jsx)("td",{className:"small text-nowrap",children:u(a.size_bytes??null)}),(0,b.jsx)("td",{className:"text-end",children:(0,b.jsxs)("div",{className:"d-inline-flex gap-1 flex-nowrap",children:[(0,b.jsx)("button",{type:"button",className:"btn btn-outline-success btn-sm text-nowrap",disabled:o,onClick:()=>q(a),children:f("admin.db.snapshots.restore")}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm text-nowrap",disabled:o,onClick:()=>r(a),children:f("admin.db.snapshots.delete")})]})})]},h||`${c}`)}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,children:(0,b.jsx)("div",{className:"text-center text-muted small py-3",children:c?f("admin.db.snapshots.loading"):f("admin.db.snapshots.noData")})})}),c&&i&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"text-center py-3 text-muted small",children:f("admin.db.snapshots.loading")})})]})]})}),(0,b.jsx)("div",{className:"px-3 py-2 border-top",children:(0,b.jsx)("span",{className:"text-muted small",children:f("admin.db.snapshots.scrollNote")})})]}),(0,b.jsx)("div",{className:"d-block d-xl-none",children:i||c?c&&!i?(0,b.jsx)("div",{className:"px-3 py-3 text-center text-muted small",children:f("admin.db.snapshots.loading")}):(0,b.jsx)("div",{className:"p-2",children:(0,b.jsxs)("div",{className:"row g-2",children:[g.map((a,c)=>{let d=s(a.label).trim(),e=s(a.note).trim(),g=s(a.filename).trim(),h=s(a.id).trim();return(0,b.jsx)("div",{className:"col-12",children:(0,b.jsxs)("div",{className:"border rounded-3 p-3 bg-white",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[(0,b.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,b.jsxs)("span",{className:"badge bg-light text-dark border",children:["#",c+1]}),(0,b.jsx)("span",{className:"badge bg-secondary-subtle text-muted border",children:u(a.size_bytes??null)}),(0,b.jsx)("span",{className:"badge bg-light text-dark border",children:t(a.created_at)})]}),(0,b.jsxs)("div",{className:"d-flex gap-2 flex-wrap justify-content-end",children:[(0,b.jsx)("button",{type:"button",className:"btn btn-outline-success btn-sm",disabled:o,onClick:()=>q(a),children:f("admin.db.snapshots.restore")}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",disabled:o,onClick:()=>r(a),children:f("admin.db.snapshots.delete")})]})]}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"fw-semibold",style:{wordBreak:"break-word"},children:d||(0,b.jsx)("span",{className:"text-muted",children:f("admin.db.snapshots.noLabel")})}),e?(0,b.jsx)("div",{className:"text-muted small mt-1",style:{wordBreak:"break-word"},children:e}):(0,b.jsx)("div",{className:"text-muted small mt-1",children:f("admin.db.snapshots.noNote")})]}),(0,b.jsxs)("div",{className:"mt-2 text-muted small",style:{wordBreak:"break-word"},children:[(0,b.jsx)("div",{className:"fw-semibold text-dark small",children:f("admin.db.snapshots.columns.file")}),(0,b.jsx)("code",{children:g||"-"})]}),(0,b.jsxs)("div",{className:"mt-2 text-muted small",style:{wordBreak:"break-word"},children:[(0,b.jsx)("div",{className:"fw-semibold text-dark small",children:"ID"}),(0,b.jsx)("code",{children:h})]})]})},h||`${c}`)}),c&&i&&(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)("div",{className:"text-center text-muted small py-2",children:f("admin.db.snapshots.loading")})})]})}):(0,b.jsx)("div",{className:"px-3 py-3 text-center text-muted small",children:f("admin.db.snapshots.noData")})})]})]})},x=({adminSkip:a})=>{let{data:c,isLoading:d,isFetching:e,refetch:f}=(0,l.useListDbSnapshotsQuery)(void 0,{skip:a});return(0,b.jsx)(w,{items:c??[],loading:d||e,refetch:()=>{a||f()}})},y=({module:a,disabled:c})=>{let e=(0,h.useAdminT)(),[f,g]=(0,d.useState)("sql"),i=async()=>{k.toast.info(e("admin.db.modules.export.notImplemented"))};return(0,b.jsx)("div",{className:"border rounded-3 p-3",children:(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold small",children:e("admin.db.modules.export.title")}),(0,b.jsx)("div",{className:"text-muted small",children:e("admin.db.modules.export.description",{module:a})})]}),(0,b.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,b.jsxs)("select",{className:"form-select form-select-sm",value:f,onChange:a=>g(a.target.value),disabled:c||!1,children:[(0,b.jsx)("option",{value:"sql",children:e("admin.db.modules.export.format.sql")}),(0,b.jsx)("option",{value:"json",children:e("admin.db.modules.export.format.json")})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:i,disabled:c||!1,children:e("admin.db.modules.export.downloadButton")})]})]})})},z=({module:a,disabled:c})=>{let e=(0,h.useAdminT)(),[f,g]=(0,d.useState)("text"),[i,j]=(0,d.useState)(""),[l,m]=(0,d.useState)(!0),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(0),r=c||!1;(0,d.useMemo)(()=>"text"===f?e("admin.db.modules.import.tabs.text"):e("admin.db.modules.import.tabs.file"),[f,e]);let s=async a=>{a.preventDefault(),k.toast.info(e("admin.db.modules.import.notImplemented"))},t=async a=>{a.preventDefault(),k.toast.info(e("admin.db.modules.import.notImplemented"))};return(0,b.jsxs)("div",{className:"border rounded-3 p-3",children:[(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between flex-wrap gap-2 mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold small",children:e("admin.db.modules.import.title")}),(0,b.jsx)("div",{className:"text-muted small",children:e("admin.db.modules.import.description",{module:a})})]}),(0,b.jsxs)("div",{className:"form-check",children:[(0,b.jsx)("input",{id:"module-import-truncate",className:"form-check-input",type:"checkbox",checked:l,onChange:a=>m(a.target.checked),disabled:r}),(0,b.jsx)("label",{className:"form-check-label small",htmlFor:"module-import-truncate",children:e("admin.db.modules.import.truncate")})]})]}),(0,b.jsxs)("ul",{className:"nav nav-tabs small mb-3 flex-wrap",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("text"===f?"active":""),onClick:()=>g("text"),disabled:r,children:e("admin.db.modules.import.tabs.text")})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("file"===f?"active":""),onClick:()=>g("file"),disabled:r,children:e("admin.db.modules.import.tabs.file")})})]}),"text"===f&&(0,b.jsxs)("form",{onSubmit:s,children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsxs)("label",{className:"form-label small",children:[e("admin.db.modules.import.text.label")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)("textarea",{className:"form-control form-control-sm",rows:8,value:i,onChange:a=>j(a.target.value),placeholder:e("admin.db.modules.import.text.placeholder"),disabled:r})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:r,children:e("admin.db.modules.import.applyButton")})]}),"file"===f&&(0,b.jsxs)("form",{onSubmit:t,children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsxs)("label",{className:"form-label small",children:[e("admin.db.modules.import.file.label")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)("input",{type:"file",className:"form-control form-control-sm",accept:".sql,.gz,.sql.gz",onChange:a=>o(a.target.files?.[0]||null),disabled:r},p)]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:r,children:e("admin.db.modules.import.importButton")})]})]})},A=({module:a,disabled:c})=>{let d=(0,h.useAdminT)();return(0,b.jsxs)("div",{className:"border rounded-3 p-3",children:[(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold small",children:d("admin.db.modules.validate.title")}),(0,b.jsx)("div",{className:"text-muted small",children:d("admin.db.modules.validate.description")})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{},disabled:c||!1,children:d("admin.db.modules.validate.checkButton")})]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("div",{className:"text-muted small",children:d("admin.db.modules.validate.noResult")})})]})},B=({disabled:a})=>{let c=(0,h.useAdminT)(),[e,f]=(0,d.useState)("en"),[g,i]=(0,d.useState)("de"),[j,l]=(0,d.useState)(!1),[m,n]=(0,d.useState)(!0),o=a||!1,p=(0,d.useMemo)(()=>(void 0)??["tr","en","de"],[void 0]),q=async()=>{try{let a=await ({unwrap:async()=>({ok:!1,error:"Not implemented"})}).unwrap();if(!a?.ok)return k.toast.error(a?.error||c("admin.db.modules.ui.bootstrapError"));k.toast.success(c("admin.db.modules.ui.bootstrapSuccess"))}catch(a){k.toast.error(a?.data?.error||a?.message||c("admin.db.modules.ui.bootstrapErrorGeneric"))}};return(0,b.jsxs)("div",{className:"border rounded-3 p-3",children:[(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold small",children:c("admin.db.modules.ui.title")}),(0,b.jsx)("div",{className:"text-muted small",children:c("admin.db.modules.ui.description")})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>k.toast.error(c("admin.db.modules.ui.downloadError")),disabled:o||!0,children:c("admin.db.modules.ui.downloadButton")})]}),(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{className:"row g-2",children:[(0,b.jsxs)("div",{className:"col-md-3",children:[(0,b.jsx)("label",{className:"form-label small",children:c("admin.db.modules.ui.targetLocale")}),(0,b.jsx)("select",{className:"form-select form-select-sm",value:e,onChange:a=>f(a.target.value),disabled:o,children:p.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"col-md-3",children:[(0,b.jsx)("label",{className:"form-label small",children:c("admin.db.modules.ui.sourceLocale")}),(0,b.jsx)("select",{className:"form-select form-select-sm",value:g,onChange:a=>i(a.target.value),disabled:o,children:p.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"col-md-6 d-flex flex-wrap gap-3 align-items-end",children:[(0,b.jsxs)("div",{className:"form-check",children:[(0,b.jsx)("input",{id:"ui-overwrite",className:"form-check-input",type:"checkbox",checked:j,onChange:a=>l(a.target.checked),disabled:o}),(0,b.jsx)("label",{className:"form-check-label small",htmlFor:"ui-overwrite",children:c("admin.db.modules.ui.overwrite")})]}),(0,b.jsxs)("div",{className:"form-check",children:[(0,b.jsx)("input",{id:"ui-onlyUi",className:"form-check-input",type:"checkbox",checked:m,onChange:a=>n(a.target.checked),disabled:o}),(0,b.jsx)("label",{className:"form-check-label small",htmlFor:"ui-onlyUi",children:c("admin.db.modules.ui.onlyUiKeys")})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-warning btn-sm ms-auto",onClick:q,disabled:o,children:c("admin.db.modules.ui.bootstrapButton")})]})]})]})},C=["site_settings","products","categories","subcategories","services","faqs","custom_pages","menuitem","slider","footer_sections","library","reviews","support","users","offers","storage"],D=({adminSkip:a})=>{let c=(0,h.useAdminT)(),[e,f]=(0,d.useState)("products"),[g,i]=(0,d.useState)("export"),j="site_settings"===e,k=(0,d.useMemo)(()=>{let a=e.replace(/_/g," ");return a.charAt(0).toUpperCase()+a.slice(1)},[e]);return(0,b.jsxs)("div",{className:"card mb-3",children:[(0,b.jsxs)("div",{className:"card-header py-2 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"small fw-semibold",children:c("admin.db.modules.title")}),(0,b.jsx)("div",{className:"text-muted small",children:c("admin.db.modules.selected",{module:k})})]}),(0,b.jsx)("div",{className:"d-flex align-items-center gap-2",children:(0,b.jsx)("select",{className:"form-select form-select-sm",value:e,onChange:a=>f(a.target.value),disabled:a,children:C.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})})]}),(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsxs)("ul",{className:"nav nav-tabs small mb-3 flex-wrap",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("export"===g?"active":""),onClick:()=>i("export"),disabled:a,children:c("admin.db.modules.tabs.export")})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("import"===g?"active":""),onClick:()=>i("import"),disabled:a,children:c("admin.db.modules.tabs.import")})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("validate"===g?"active":""),onClick:()=>i("validate"),disabled:a,children:c("admin.db.modules.tabs.validate")})}),j&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link py-1 px-2 "+("ui"===g?"active":""),onClick:()=>i("ui"),disabled:a,children:c("admin.db.modules.tabs.ui")})})]}),"export"===g&&(0,b.jsx)(y,{module:e,disabled:a}),"import"===g&&(0,b.jsx)(z,{module:e,disabled:a}),"validate"===g&&(0,b.jsx)(A,{module:e,disabled:a}),"ui"===g&&j&&(0,b.jsx)(B,{disabled:a})]})]})};var E=a.i(96684),F=a.i(99570);a.s(["AdminDbClient",0,()=>{let a=(0,h.useAdminT)();return(0,b.jsx)(j,{children:({adminSkip:d})=>(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:a("admin.db.title")}),(0,b.jsxs)(E.Popover,{children:[(0,b.jsx)(E.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(F.Button,{variant:"ghost",size:"sm",className:"size-8 p-0",children:[(0,b.jsx)(c,{className:"size-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"sr-only",children:a("admin.db.help.pageTitle")})]})}),(0,b.jsx)(E.PopoverContent,{align:"start",className:"w-80",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:a("admin.db.help.dbAdmin")}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Full DB"}),":"," ",a("admin.db.help.fullDbDesc")]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Snapshot"}),":"," ",a("admin.db.help.snapshotDesc")]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Module Export/Import"}),":"," ",a("admin.db.help.moduleDesc")]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"UI (site_settings ui_*)"}),": ",a("admin.db.help.uiDesc")]})]})]})})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a("admin.db.description")})]})}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Full DB"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsx)(n,{}),(0,b.jsx)(r,{})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Snapshots"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(x,{adminSkip:d})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Module Export / Import"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(D,{adminSkip:d})})]})]})})}],43872)}];

//# sourceMappingURL=src_app_%28main%29_admin_%28admin%29_db__components_admin-db-client_tsx_37c326aa._.js.map